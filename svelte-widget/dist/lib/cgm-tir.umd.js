(function(Ht,ht){typeof exports=="object"&&typeof module<"u"?ht(exports):typeof define=="function"&&define.amd?define(["exports"],ht):(Ht=typeof globalThis<"u"?globalThis:Ht||self,ht(Ht.CgmTir={}))})(this,function(Ht){"use strict";var jh=Object.defineProperty;var t0=(Ht,ht,Le)=>ht in Ht?jh(Ht,ht,{enumerable:!0,configurable:!0,writable:!0,value:Le}):Ht[ht]=Le;var sr=(Ht,ht,Le)=>t0(Ht,typeof ht!="symbol"?ht+"":ht,Le);function ht(){}function Le(t){return t()}function ur(){return Object.create(null)}function dn(t){t.forEach(Le)}function fr(t){return typeof t=="function"}function ne(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Cl(t){return Object.keys(t).length===0}function se(t){return t??""}function c(t,e){t.appendChild(e)}function Lt(t,e,n){t.insertBefore(e,n||null)}function Et(t){t.parentNode&&t.parentNode.removeChild(t)}function q(t){return document.createElement(t)}function O(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function H(t){return document.createTextNode(t)}function et(){return H(" ")}function Ue(){return H("")}function He(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function u(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function kl(t){return Array.from(t.childNodes)}function kt(t,e){e=""+e,t.data!==e&&(t.data=e)}function j(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function Al(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}let mn;function vn(t){mn=t}function cr(){if(!mn)throw new Error("Function called outside component initialization");return mn}function pe(t){cr().$$.on_mount.push(t)}function Je(){const t=cr();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=Al(e,n,{cancelable:i});return r.slice().forEach(s=>{s.call(t,o)}),!o.defaultPrevented}return!0}}const $e=[],ye=[];let Ke=[];const hr=[],Dl=Promise.resolve();let _i=!1;function Nl(){_i||(_i=!0,Dl.then(gr))}function xi(t){Ke.push(t)}const bi=new Set;let je=0;function gr(){if(je!==0)return;const t=mn;do{try{for(;je<$e.length;){const e=$e[je];je++,vn(e),Sl(e.$$)}}catch(e){throw $e.length=0,je=0,e}for(vn(null),$e.length=0,je=0;ye.length;)ye.pop()();for(let e=0;e<Ke.length;e+=1){const n=Ke[e];bi.has(n)||(bi.add(n),n())}Ke.length=0}while($e.length);for(;hr.length;)hr.pop()();_i=!1,bi.clear(),vn(t)}function Sl(t){if(t.fragment!==null){t.update(),dn(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(xi)}}function Fl(t){const e=[],n=[];Ke.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Ke=e}const El=new Set;function Rl(t,e){t&&t.i&&(El.delete(t),t.i(e))}function Ll(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),xi(()=>{const o=t.$$.on_mount.map(Le).filter(fr);t.$$.on_destroy?t.$$.on_destroy.push(...o):dn(o),t.$$.on_mount=[]}),r.forEach(xi)}function Ul(t,e){const n=t.$$;n.fragment!==null&&(Fl(n.after_update),dn(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Hl(t,e){t.$$.dirty[0]===-1&&($e.push(t),Nl(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ie(t,e,n,i,r,o,s=null,f=[-1]){const a=mn;vn(t);const l=t.$$={fragment:null,ctx:[],props:o,update:ht,not_equal:r,bound:ur(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:ur(),dirty:f,skip_bound:!1,root:e.target||a.$$.root};s&&s(l.root);let d=!1;if(l.ctx=n?n(t,e.props||{},(h,m,...g)=>{const v=g.length?g[0]:m;return l.ctx&&r(l.ctx[h],l.ctx[h]=v)&&(!l.skip_bound&&l.bound[h]&&l.bound[h](v),d&&Hl(t,h)),m}):[],l.update(),d=!0,dn(l.before_update),l.fragment=i?i(l.ctx):!1,e.target){if(e.hydrate){const h=kl(e.target);l.fragment&&l.fragment.l(h),h.forEach(Et)}else l.fragment&&l.fragment.c();e.intro&&Rl(t.$$.fragment),Ll(t,e.target,e.anchor),gr()}vn(a)}class re{constructor(){sr(this,"$$");sr(this,"$$set")}$destroy(){Ul(this,1),this.$destroy=ht}$on(e,n){if(!fr(n))return ht;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!Cl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Pl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Pl);function Wn(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function zl(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function dr(t){let e,n,i;t.length!==2?(e=Wn,n=(f,a)=>Wn(t(f),a),i=(f,a)=>t(f)-a):(e=t===Wn||t===zl?t:Yl,n=t,i=t);function r(f,a,l=0,d=f.length){if(l<d){if(e(a,a)!==0)return d;do{const h=l+d>>>1;n(f[h],a)<0?l=h+1:d=h}while(l<d)}return l}function o(f,a,l=0,d=f.length){if(l<d){if(e(a,a)!==0)return d;do{const h=l+d>>>1;n(f[h],a)<=0?l=h+1:d=h}while(l<d)}return l}function s(f,a,l=0,d=f.length){const h=r(f,a,l,d-1);return h>l&&i(f[h-1],a)>-i(f[h],a)?h-1:h}return{left:r,center:s,right:o}}function Yl(){return 0}function ql(t){return t===null?NaN:+t}const Il=dr(Wn).right;dr(ql).center;function Vl(t,e){let n=0,i,r=0,o=0;for(let s of t)s!=null&&(s=+s)>=s&&(i=s-r,r+=i/++n,o+=i*(s-r));if(n>1)return o/(n-1)}const Wl=Math.sqrt(50),Bl=Math.sqrt(10),Xl=Math.sqrt(2);function Bn(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),s=o>=Wl?10:o>=Bl?5:o>=Xl?2:1;let f,a,l;return r<0?(l=Math.pow(10,-r)/s,f=Math.round(t*l),a=Math.round(e*l),f/l<t&&++f,a/l>e&&--a,l=-l):(l=Math.pow(10,r)*s,f=Math.round(t/l),a=Math.round(e/l),f*l<t&&++f,a*l>e&&--a),a<f&&.5<=n&&n<2?Bn(t,e,n*2):[f,a,l]}function Gl(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,o,s]=i?Bn(e,t,n):Bn(t,e,n);if(!(o>=r))return[];const f=o-r+1,a=new Array(f);if(i)if(s<0)for(let l=0;l<f;++l)a[l]=(o-l)/-s;else for(let l=0;l<f;++l)a[l]=(o-l)*s;else if(s<0)for(let l=0;l<f;++l)a[l]=(r+l)/-s;else for(let l=0;l<f;++l)a[l]=(r+l)*s;return a}function Mi(t,e,n){return e=+e,t=+t,n=+n,Bn(t,e,n)[2]}function Zl(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?Mi(e,t,n):Mi(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function Ql(t,e){let n=0,i=0;for(let r of t)r!=null&&(r=+r)>=r&&(++n,i+=r);if(n)return i/n}function Ti(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(r);++i<r;)o[i]=t+i*n;return o}function Ol(t){return t}var Ci=1,ki=2,Ai=3,wn=4,mr=1e-6;function Jl(t){return"translate("+t+",0)"}function $l(t){return"translate(0,"+t+")"}function Kl(t){return e=>+t(e)}function jl(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function ta(){return!this.__axis}function vr(t,e){var n=[],i=null,r=null,o=6,s=6,f=3,a=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=t===Ci||t===wn?-1:1,d=t===wn||t===ki?"x":"y",h=t===Ci||t===Ai?Jl:$l;function m(g){var v=i??(e.ticks?e.ticks.apply(e,n):e.domain()),p=r??(e.tickFormat?e.tickFormat.apply(e,n):Ol),k=Math.max(o,0)+f,E=e.range(),C=+E[0]+a,y=+E[E.length-1]+a,_=(e.bandwidth?jl:Kl)(e.copy(),a),F=g.selection?g.selection():g,U=F.selectAll(".domain").data([null]),R=F.selectAll(".tick").data(v,e).order(),T=R.exit(),M=R.enter().append("g").attr("class","tick"),A=R.select("line"),w=R.select("text");U=U.merge(U.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),R=R.merge(M),A=A.merge(M.append("line").attr("stroke","currentColor").attr(d+"2",l*o)),w=w.merge(M.append("text").attr("fill","currentColor").attr(d,l*k).attr("dy",t===Ci?"0em":t===Ai?"0.71em":"0.32em")),g!==F&&(U=U.transition(g),R=R.transition(g),A=A.transition(g),w=w.transition(g),T=T.transition(g).attr("opacity",mr).attr("transform",function(N){return isFinite(N=_(N))?h(N+a):this.getAttribute("transform")}),M.attr("opacity",mr).attr("transform",function(N){var x=this.parentNode.__axis;return h((x&&isFinite(x=x(N))?x:_(N))+a)})),T.remove(),U.attr("d",t===wn||t===ki?s?"M"+l*s+","+C+"H"+a+"V"+y+"H"+l*s:"M"+a+","+C+"V"+y:s?"M"+C+","+l*s+"V"+a+"H"+y+"V"+l*s:"M"+C+","+a+"H"+y),R.attr("opacity",1).attr("transform",function(N){return h(_(N)+a)}),A.attr(d+"2",l*o),w.attr(d,l*k).text(p),F.filter(ta).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===ki?"start":t===wn?"end":"middle"),F.each(function(){this.__axis=_})}return m.scale=function(g){return arguments.length?(e=g,m):e},m.ticks=function(){return n=Array.from(arguments),m},m.tickArguments=function(g){return arguments.length?(n=g==null?[]:Array.from(g),m):n.slice()},m.tickValues=function(g){return arguments.length?(i=g==null?null:Array.from(g),m):i&&i.slice()},m.tickFormat=function(g){return arguments.length?(r=g,m):r},m.tickSize=function(g){return arguments.length?(o=s=+g,m):o},m.tickSizeInner=function(g){return arguments.length?(o=+g,m):o},m.tickSizeOuter=function(g){return arguments.length?(s=+g,m):s},m.tickPadding=function(g){return arguments.length?(f=+g,m):f},m.offset=function(g){return arguments.length?(a=+g,m):a},m}function ea(t){return vr(Ai,t)}function na(t){return vr(wn,t)}var ia={value:()=>{}};function wr(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Xn(n)}function Xn(t){this._=t}function ra(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Xn.prototype=wr.prototype={constructor:Xn,on:function(t,e){var n=this._,i=ra(t+"",n),r,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((r=(t=i[o]).type)&&(r=oa(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(r=(t=i[o]).type)n[r]=pr(n[r],t.name,e);else if(e==null)for(r in n)n[r]=pr(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Xn(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};function oa(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function pr(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=ia,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Di="http://www.w3.org/1999/xhtml";const yr={svg:"http://www.w3.org/2000/svg",xhtml:Di,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Gn(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),yr.hasOwnProperty(e)?{space:yr[e],local:t}:t}function la(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Di&&e.documentElement.namespaceURI===Di?e.createElement(t):e.createElementNS(n,t)}}function aa(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function _r(t){var e=Gn(t);return(e.local?aa:la)(e)}function sa(){}function Ni(t){return t==null?sa:function(){return this.querySelector(t)}}function ua(t){typeof t!="function"&&(t=Ni(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,f=i[r]=new Array(s),a,l,d=0;d<s;++d)(a=o[d])&&(l=t.call(a,a.__data__,d,o))&&("__data__"in a&&(l.__data__=a.__data__),f[d]=l);return new oe(i,this._parents)}function fa(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function ca(){return[]}function xr(t){return t==null?ca:function(){return this.querySelectorAll(t)}}function ha(t){return function(){return fa(t.apply(this,arguments))}}function ga(t){typeof t=="function"?t=ha(t):t=xr(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var s=e[o],f=s.length,a,l=0;l<f;++l)(a=s[l])&&(i.push(t.call(a,a.__data__,l,s)),r.push(a));return new oe(i,r)}function br(t){return function(){return this.matches(t)}}function Mr(t){return function(e){return e.matches(t)}}var da=Array.prototype.find;function ma(t){return function(){return da.call(this.children,t)}}function va(){return this.firstElementChild}function wa(t){return this.select(t==null?va:ma(typeof t=="function"?t:Mr(t)))}var pa=Array.prototype.filter;function ya(){return Array.from(this.children)}function _a(t){return function(){return pa.call(this.children,t)}}function xa(t){return this.selectAll(t==null?ya:_a(typeof t=="function"?t:Mr(t)))}function ba(t){typeof t!="function"&&(t=br(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,f=i[r]=[],a,l=0;l<s;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&f.push(a);return new oe(i,this._parents)}function Tr(t){return new Array(t.length)}function Ma(){return new oe(this._enter||this._groups.map(Tr),this._parents)}function Zn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Zn.prototype={constructor:Zn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ta(t){return function(){return t}}function Ca(t,e,n,i,r,o){for(var s=0,f,a=e.length,l=o.length;s<l;++s)(f=e[s])?(f.__data__=o[s],i[s]=f):n[s]=new Zn(t,o[s]);for(;s<a;++s)(f=e[s])&&(r[s]=f)}function ka(t,e,n,i,r,o,s){var f,a,l=new Map,d=e.length,h=o.length,m=new Array(d),g;for(f=0;f<d;++f)(a=e[f])&&(m[f]=g=s.call(a,a.__data__,f,e)+"",l.has(g)?r[f]=a:l.set(g,a));for(f=0;f<h;++f)g=s.call(t,o[f],f,o)+"",(a=l.get(g))?(i[f]=a,a.__data__=o[f],l.delete(g)):n[f]=new Zn(t,o[f]);for(f=0;f<d;++f)(a=e[f])&&l.get(m[f])===a&&(r[f]=a)}function Aa(t){return t.__data__}function Da(t,e){if(!arguments.length)return Array.from(this,Aa);var n=e?ka:Ca,i=this._parents,r=this._groups;typeof t!="function"&&(t=Ta(t));for(var o=r.length,s=new Array(o),f=new Array(o),a=new Array(o),l=0;l<o;++l){var d=i[l],h=r[l],m=h.length,g=Na(t.call(d,d&&d.__data__,l,i)),v=g.length,p=f[l]=new Array(v),k=s[l]=new Array(v),E=a[l]=new Array(m);n(d,h,p,k,E,g,e);for(var C=0,y=0,_,F;C<v;++C)if(_=p[C]){for(C>=y&&(y=C+1);!(F=k[y])&&++y<v;);_._next=F||null}}return s=new oe(s,i),s._enter=f,s._exit=a,s}function Na(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Sa(){return new oe(this._exit||this._groups.map(Tr),this._parents)}function Fa(t,e,n){var i=this.enter(),r=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function Ea(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,s=Math.min(r,o),f=new Array(r),a=0;a<s;++a)for(var l=n[a],d=i[a],h=l.length,m=f[a]=new Array(h),g,v=0;v<h;++v)(g=l[v]||d[v])&&(m[v]=g);for(;a<r;++a)f[a]=n[a];return new oe(f,this._parents)}function Ra(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,o=i[r],s;--r>=0;)(s=i[r])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function La(t){t||(t=Ua);function e(h,m){return h&&m?t(h.__data__,m.__data__):!h-!m}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s=n[o],f=s.length,a=r[o]=new Array(f),l,d=0;d<f;++d)(l=s[d])&&(a[d]=l);a.sort(e)}return new oe(r,this._parents).order()}function Ua(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ha(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Pa(){return Array.from(this)}function za(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null}function Ya(){let t=0;for(const e of this)++t;return t}function qa(){return!this.node()}function Ia(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],o=0,s=r.length,f;o<s;++o)(f=r[o])&&t.call(f,f.__data__,o,r);return this}function Va(t){return function(){this.removeAttribute(t)}}function Wa(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ba(t,e){return function(){this.setAttribute(t,e)}}function Xa(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ga(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Za(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Qa(t,e){var n=Gn(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?Wa:Va:typeof e=="function"?n.local?Za:Ga:n.local?Xa:Ba)(n,e))}function Cr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Oa(t){return function(){this.style.removeProperty(t)}}function Ja(t,e,n){return function(){this.style.setProperty(t,e,n)}}function $a(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function Ka(t,e,n){return arguments.length>1?this.each((e==null?Oa:typeof e=="function"?$a:Ja)(t,e,n??"")):tn(this.node(),t)}function tn(t,e){return t.style.getPropertyValue(e)||Cr(t).getComputedStyle(t,null).getPropertyValue(e)}function ja(t){return function(){delete this[t]}}function ts(t,e){return function(){this[t]=e}}function es(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ns(t,e){return arguments.length>1?this.each((e==null?ja:typeof e=="function"?es:ts)(t,e)):this.node()[t]}function kr(t){return t.trim().split(/^|\s+/)}function Si(t){return t.classList||new Ar(t)}function Ar(t){this._node=t,this._names=kr(t.getAttribute("class")||"")}Ar.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Dr(t,e){for(var n=Si(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Nr(t,e){for(var n=Si(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function is(t){return function(){Dr(this,t)}}function rs(t){return function(){Nr(this,t)}}function os(t,e){return function(){(e.apply(this,arguments)?Dr:Nr)(this,t)}}function ls(t,e){var n=kr(t+"");if(arguments.length<2){for(var i=Si(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?os:e?is:rs)(n,e))}function as(){this.textContent=""}function ss(t){return function(){this.textContent=t}}function us(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function fs(t){return arguments.length?this.each(t==null?as:(typeof t=="function"?us:ss)(t)):this.node().textContent}function cs(){this.innerHTML=""}function hs(t){return function(){this.innerHTML=t}}function gs(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function ds(t){return arguments.length?this.each(t==null?cs:(typeof t=="function"?gs:hs)(t)):this.node().innerHTML}function ms(){this.nextSibling&&this.parentNode.appendChild(this)}function vs(){return this.each(ms)}function ws(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ps(){return this.each(ws)}function ys(t){var e=typeof t=="function"?t:_r(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function _s(){return null}function xs(t,e){var n=typeof t=="function"?t:_r(t),i=e==null?_s:typeof e=="function"?e:Ni(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function bs(){var t=this.parentNode;t&&t.removeChild(this)}function Ms(){return this.each(bs)}function Ts(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Cs(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ks(t){return this.select(t?Cs:Ts)}function As(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ds(t){return function(e){t.call(this,e,this.__data__)}}function Ns(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function Ss(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,o;n<r;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function Fs(t,e,n){return function(){var i=this.__on,r,o=Ds(e);if(i){for(var s=0,f=i.length;s<f;++s)if((r=i[s]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=e;return}}this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Es(t,e,n){var i=Ns(t+""),r,o=i.length,s;if(arguments.length<2){var f=this.node().__on;if(f){for(var a=0,l=f.length,d;a<l;++a)for(r=0,d=f[a];r<o;++r)if((s=i[r]).type===d.type&&s.name===d.name)return d.value}return}for(f=e?Fs:Ss,r=0;r<o;++r)this.each(f(i[r],e,n));return this}function Sr(t,e,n){var i=Cr(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function Rs(t,e){return function(){return Sr(this,t,e)}}function Ls(t,e){return function(){return Sr(this,t,e.apply(this,arguments))}}function Us(t,e){return this.each((typeof e=="function"?Ls:Rs)(t,e))}function*Hs(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length,s;r<o;++r)(s=i[r])&&(yield s)}var Fr=[null];function oe(t,e){this._groups=t,this._parents=e}function pn(){return new oe([[document.documentElement]],Fr)}function Ps(){return this}oe.prototype=pn.prototype={constructor:oe,select:ua,selectAll:ga,selectChild:wa,selectChildren:xa,filter:ba,data:Da,enter:Ma,exit:Sa,join:Fa,merge:Ea,selection:Ps,order:Ra,sort:La,call:Ha,nodes:Pa,node:za,size:Ya,empty:qa,each:Ia,attr:Qa,style:Ka,property:ns,classed:ls,text:fs,html:ds,raise:vs,lower:ps,append:ys,insert:xs,remove:Ms,clone:ks,datum:As,on:Es,dispatch:Us,[Symbol.iterator]:Hs};function _e(t){return typeof t=="string"?new oe([[document.querySelector(t)]],[document.documentElement]):new oe([[t]],Fr)}function Fi(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Er(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function yn(){}var _n=.7,Qn=1/_n,en="\\s*([+-]?\\d+)\\s*",xn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zs=/^#([0-9a-f]{3,8})$/,Ys=new RegExp(`^rgb\\(${en},${en},${en}\\)$`),qs=new RegExp(`^rgb\\(${xe},${xe},${xe}\\)$`),Is=new RegExp(`^rgba\\(${en},${en},${en},${xn}\\)$`),Vs=new RegExp(`^rgba\\(${xe},${xe},${xe},${xn}\\)$`),Ws=new RegExp(`^hsl\\(${xn},${xe},${xe}\\)$`),Bs=new RegExp(`^hsla\\(${xn},${xe},${xe},${xn}\\)$`),Rr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fi(yn,Pe,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Lr,formatHex:Lr,formatHex8:Xs,formatHsl:Gs,formatRgb:Ur,toString:Ur});function Lr(){return this.rgb().formatHex()}function Xs(){return this.rgb().formatHex8()}function Gs(){return qr(this).formatHsl()}function Ur(){return this.rgb().formatRgb()}function Pe(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=zs.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Hr(e):n===3?new Gt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?On(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?On(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ys.exec(t))?new Gt(e[1],e[2],e[3],1):(e=qs.exec(t))?new Gt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Is.exec(t))?On(e[1],e[2],e[3],e[4]):(e=Vs.exec(t))?On(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ws.exec(t))?Yr(e[1],e[2]/100,e[3]/100,1):(e=Bs.exec(t))?Yr(e[1],e[2]/100,e[3]/100,e[4]):Rr.hasOwnProperty(t)?Hr(Rr[t]):t==="transparent"?new Gt(NaN,NaN,NaN,0):null}function Hr(t){return new Gt(t>>16&255,t>>8&255,t&255,1)}function On(t,e,n,i){return i<=0&&(t=e=n=NaN),new Gt(t,e,n,i)}function Zs(t){return t instanceof yn||(t=Pe(t)),t?(t=t.rgb(),new Gt(t.r,t.g,t.b,t.opacity)):new Gt}function Ei(t,e,n,i){return arguments.length===1?Zs(t):new Gt(t,e,n,i??1)}function Gt(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}Fi(Gt,Ei,Er(yn,{brighter(t){return t=t==null?Qn:Math.pow(Qn,t),new Gt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?_n:Math.pow(_n,t),new Gt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Gt(ze(this.r),ze(this.g),ze(this.b),Jn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Pr,formatHex:Pr,formatHex8:Qs,formatRgb:zr,toString:zr}));function Pr(){return`#${Ye(this.r)}${Ye(this.g)}${Ye(this.b)}`}function Qs(){return`#${Ye(this.r)}${Ye(this.g)}${Ye(this.b)}${Ye((isNaN(this.opacity)?1:this.opacity)*255)}`}function zr(){const t=Jn(this.opacity);return`${t===1?"rgb(":"rgba("}${ze(this.r)}, ${ze(this.g)}, ${ze(this.b)}${t===1?")":`, ${t})`}`}function Jn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ze(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ye(t){return t=ze(t),(t<16?"0":"")+t.toString(16)}function Yr(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new fe(t,e,n,i)}function qr(t){if(t instanceof fe)return new fe(t.h,t.s,t.l,t.opacity);if(t instanceof yn||(t=Pe(t)),!t)return new fe;if(t instanceof fe)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),s=NaN,f=o-r,a=(o+r)/2;return f?(e===o?s=(n-i)/f+(n<i)*6:n===o?s=(i-e)/f+2:s=(e-n)/f+4,f/=a<.5?o+r:2-o-r,s*=60):f=a>0&&a<1?0:s,new fe(s,f,a,t.opacity)}function Os(t,e,n,i){return arguments.length===1?qr(t):new fe(t,e,n,i??1)}function fe(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Fi(fe,Os,Er(yn,{brighter(t){return t=t==null?Qn:Math.pow(Qn,t),new fe(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?_n:Math.pow(_n,t),new fe(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Gt(Ri(t>=240?t-240:t+120,r,i),Ri(t,r,i),Ri(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new fe(Ir(this.h),$n(this.s),$n(this.l),Jn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Jn(this.opacity);return`${t===1?"hsl(":"hsla("}${Ir(this.h)}, ${$n(this.s)*100}%, ${$n(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ir(t){return t=(t||0)%360,t<0?t+360:t}function $n(t){return Math.max(0,Math.min(1,t||0))}function Ri(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Li=t=>()=>t;function Js(t,e){return function(n){return t+n*e}}function $s(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Ks(t){return(t=+t)==1?Vr:function(e,n){return n-e?$s(e,n,t):Li(isNaN(e)?n:e)}}function Vr(t,e){var n=e-t;return n?Js(t,n):Li(isNaN(t)?e:t)}const Kn=function t(e){var n=Ks(e);function i(r,o){var s=n((r=Ei(r)).r,(o=Ei(o)).r),f=n(r.g,o.g),a=n(r.b,o.b),l=Vr(r.opacity,o.opacity);return function(d){return r.r=s(d),r.g=f(d),r.b=a(d),r.opacity=l(d),r+""}}return i.gamma=t,i}(1);function js(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(o){for(r=0;r<n;++r)i[r]=t[r]*(1-o)+e[r]*o;return i}}function tu(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function eu(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),o=new Array(n),s;for(s=0;s<i;++s)r[s]=Pi(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(f){for(s=0;s<i;++s)o[s]=r[s](f);return o}}function nu(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function ce(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function iu(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=Pi(t[r],e[r]):i[r]=e[r];return function(o){for(r in n)i[r]=n[r](o);return i}}var Ui=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hi=new RegExp(Ui.source,"g");function ru(t){return function(){return t}}function ou(t){return function(e){return t(e)+""}}function Wr(t,e){var n=Ui.lastIndex=Hi.lastIndex=0,i,r,o,s=-1,f=[],a=[];for(t=t+"",e=e+"";(i=Ui.exec(t))&&(r=Hi.exec(e));)(o=r.index)>n&&(o=e.slice(n,o),f[s]?f[s]+=o:f[++s]=o),(i=i[0])===(r=r[0])?f[s]?f[s]+=r:f[++s]=r:(f[++s]=null,a.push({i:s,x:ce(i,r)})),n=Hi.lastIndex;return n<e.length&&(o=e.slice(n),f[s]?f[s]+=o:f[++s]=o),f.length<2?a[0]?ou(a[0].x):ru(e):(e=a.length,function(l){for(var d=0,h;d<e;++d)f[(h=a[d]).i]=h.x(l);return f.join("")})}function Pi(t,e){var n=typeof e,i;return e==null||n==="boolean"?Li(e):(n==="number"?ce:n==="string"?(i=Pe(e))?(e=i,Kn):Wr:e instanceof Pe?Kn:e instanceof Date?nu:tu(e)?js:Array.isArray(e)?eu:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?iu:ce)(t,e)}function lu(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Br=180/Math.PI,zi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Xr(t,e,n,i,r,o){var s,f,a;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(a=t*n+e*i)&&(n-=t*a,i-=e*a),(f=Math.sqrt(n*n+i*i))&&(n/=f,i/=f,a/=f),t*i<e*n&&(t=-t,e=-e,a=-a,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*Br,skewX:Math.atan(a)*Br,scaleX:s,scaleY:f}}var jn;function au(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?zi:Xr(e.a,e.b,e.c,e.d,e.e,e.f)}function su(t){return t==null||(jn||(jn=document.createElementNS("http://www.w3.org/2000/svg","g")),jn.setAttribute("transform",t),!(t=jn.transform.baseVal.consolidate()))?zi:(t=t.matrix,Xr(t.a,t.b,t.c,t.d,t.e,t.f))}function Gr(t,e,n,i){function r(l){return l.length?l.pop()+" ":""}function o(l,d,h,m,g,v){if(l!==h||d!==m){var p=g.push("translate(",null,e,null,n);v.push({i:p-4,x:ce(l,h)},{i:p-2,x:ce(d,m)})}else(h||m)&&g.push("translate("+h+e+m+n)}function s(l,d,h,m){l!==d?(l-d>180?d+=360:d-l>180&&(l+=360),m.push({i:h.push(r(h)+"rotate(",null,i)-2,x:ce(l,d)})):d&&h.push(r(h)+"rotate("+d+i)}function f(l,d,h,m){l!==d?m.push({i:h.push(r(h)+"skewX(",null,i)-2,x:ce(l,d)}):d&&h.push(r(h)+"skewX("+d+i)}function a(l,d,h,m,g,v){if(l!==h||d!==m){var p=g.push(r(g)+"scale(",null,",",null,")");v.push({i:p-4,x:ce(l,h)},{i:p-2,x:ce(d,m)})}else(h!==1||m!==1)&&g.push(r(g)+"scale("+h+","+m+")")}return function(l,d){var h=[],m=[];return l=t(l),d=t(d),o(l.translateX,l.translateY,d.translateX,d.translateY,h,m),s(l.rotate,d.rotate,h,m),f(l.skewX,d.skewX,h,m),a(l.scaleX,l.scaleY,d.scaleX,d.scaleY,h,m),l=d=null,function(g){for(var v=-1,p=m.length,k;++v<p;)h[(k=m[v]).i]=k.x(g);return h.join("")}}}var uu=Gr(au,"px, ","px)","deg)"),fu=Gr(su,", ",")",")"),nn=0,bn=0,Mn=0,Zr=1e3,ti,Tn,ei=0,qe=0,ni=0,Cn=typeof performance=="object"&&performance.now?performance:Date,Qr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Yi(){return qe||(Qr(cu),qe=Cn.now()+ni)}function cu(){qe=0}function ii(){this._call=this._time=this._next=null}ii.prototype=Or.prototype={constructor:ii,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Yi():+n)+(e==null?0:+e),!this._next&&Tn!==this&&(Tn?Tn._next=this:ti=this,Tn=this),this._call=t,this._time=n,qi()},stop:function(){this._call&&(this._call=null,this._time=1/0,qi())}};function Or(t,e,n){var i=new ii;return i.restart(t,e,n),i}function hu(){Yi(),++nn;for(var t=ti,e;t;)(e=qe-t._time)>=0&&t._call.call(void 0,e),t=t._next;--nn}function Jr(){qe=(ei=Cn.now())+ni,nn=bn=0;try{hu()}finally{nn=0,du(),qe=0}}function gu(){var t=Cn.now(),e=t-ei;e>Zr&&(ni-=e,ei=t)}function du(){for(var t,e=ti,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:ti=n);Tn=t,qi(i)}function qi(t){if(!nn){bn&&(bn=clearTimeout(bn));var e=t-qe;e>24?(t<1/0&&(bn=setTimeout(Jr,t-Cn.now()-ni)),Mn&&(Mn=clearInterval(Mn))):(Mn||(ei=Cn.now(),Mn=setInterval(gu,Zr)),nn=1,Qr(Jr))}}function $r(t,e,n){var i=new ii;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var mu=wr("start","end","cancel","interrupt"),vu=[],Kr=0,jr=1,Ii=2,ri=3,to=4,Vi=5,oi=6;function li(t,e,n,i,r,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;wu(t,n,{name:e,index:i,group:r,on:mu,tween:vu,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Kr})}function Wi(t,e){var n=he(t,e);if(n.state>Kr)throw new Error("too late; already scheduled");return n}function be(t,e){var n=he(t,e);if(n.state>ri)throw new Error("too late; already running");return n}function he(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function wu(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=Or(o,0,n.time);function o(l){n.state=jr,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var d,h,m,g;if(n.state!==jr)return a();for(d in i)if(g=i[d],g.name===n.name){if(g.state===ri)return $r(s);g.state===to?(g.state=oi,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete i[d]):+d<e&&(g.state=oi,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete i[d])}if($r(function(){n.state===ri&&(n.state=to,n.timer.restart(f,n.delay,n.time),f(l))}),n.state=Ii,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Ii){for(n.state=ri,r=new Array(m=n.tween.length),d=0,h=-1;d<m;++d)(g=n.tween[d].value.call(t,t.__data__,n.index,n.group))&&(r[++h]=g);r.length=h+1}}function f(l){for(var d=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(a),n.state=Vi,1),h=-1,m=r.length;++h<m;)r[h].call(t,d);n.state===Vi&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){n.state=oi,n.timer.stop(),delete i[e];for(var l in i)return;delete t.__transition}}function pu(t,e){var n=t.__transition,i,r,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((i=n[s]).name!==e){o=!1;continue}r=i.state>Ii&&i.state<Vi,i.state=oi,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[s]}o&&delete t.__transition}}function yu(t){return this.each(function(){pu(this,t)})}function _u(t,e){var n,i;return function(){var r=be(this,t),o=r.tween;if(o!==n){i=n=o;for(var s=0,f=i.length;s<f;++s)if(i[s].name===e){i=i.slice(),i.splice(s,1);break}}r.tween=i}}function xu(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=be(this,t),s=o.tween;if(s!==i){r=(i=s).slice();for(var f={name:e,value:n},a=0,l=r.length;a<l;++a)if(r[a].name===e){r[a]=f;break}a===l&&r.push(f)}o.tween=r}}function bu(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=he(this.node(),n).tween,r=0,o=i.length,s;r<o;++r)if((s=i[r]).name===t)return s.value;return null}return this.each((e==null?_u:xu)(n,t,e))}function Bi(t,e,n){var i=t._id;return t.each(function(){var r=be(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return he(r,i).value[e]}}function eo(t,e){var n;return(typeof e=="number"?ce:e instanceof Pe?Kn:(n=Pe(e))?(e=n,Kn):Wr)(t,e)}function Mu(t){return function(){this.removeAttribute(t)}}function Tu(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Cu(t,e,n){var i,r=n+"",o;return function(){var s=this.getAttribute(t);return s===r?null:s===i?o:o=e(i=s,n)}}function ku(t,e,n){var i,r=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===r?null:s===i?o:o=e(i=s,n)}}function Au(t,e,n){var i,r,o;return function(){var s,f=n(this),a;return f==null?void this.removeAttribute(t):(s=this.getAttribute(t),a=f+"",s===a?null:s===i&&a===r?o:(r=a,o=e(i=s,f)))}}function Du(t,e,n){var i,r,o;return function(){var s,f=n(this),a;return f==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),a=f+"",s===a?null:s===i&&a===r?o:(r=a,o=e(i=s,f)))}}function Nu(t,e){var n=Gn(t),i=n==="transform"?fu:eo;return this.attrTween(t,typeof e=="function"?(n.local?Du:Au)(n,i,Bi(this,"attr."+t,e)):e==null?(n.local?Tu:Mu)(n):(n.local?ku:Cu)(n,i,e))}function Su(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Fu(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Eu(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&Fu(t,o)),n}return r._value=e,r}function Ru(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&Su(t,o)),n}return r._value=e,r}function Lu(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=Gn(t);return this.tween(n,(i.local?Eu:Ru)(i,e))}function Uu(t,e){return function(){Wi(this,t).delay=+e.apply(this,arguments)}}function Hu(t,e){return e=+e,function(){Wi(this,t).delay=e}}function Pu(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Uu:Hu)(e,t)):he(this.node(),e).delay}function zu(t,e){return function(){be(this,t).duration=+e.apply(this,arguments)}}function Yu(t,e){return e=+e,function(){be(this,t).duration=e}}function qu(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?zu:Yu)(e,t)):he(this.node(),e).duration}function Iu(t,e){if(typeof e!="function")throw new Error;return function(){be(this,t).ease=e}}function Vu(t){var e=this._id;return arguments.length?this.each(Iu(e,t)):he(this.node(),e).ease}function Wu(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;be(this,t).ease=n}}function Bu(t){if(typeof t!="function")throw new Error;return this.each(Wu(this._id,t))}function Xu(t){typeof t!="function"&&(t=br(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,f=i[r]=[],a,l=0;l<s;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&f.push(a);return new De(i,this._parents,this._name,this._id)}function Gu(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),s=new Array(i),f=0;f<o;++f)for(var a=e[f],l=n[f],d=a.length,h=s[f]=new Array(d),m,g=0;g<d;++g)(m=a[g]||l[g])&&(h[g]=m);for(;f<i;++f)s[f]=e[f];return new De(s,this._parents,this._name,this._id)}function Zu(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Qu(t,e,n){var i,r,o=Zu(e)?Wi:be;return function(){var s=o(this,t),f=s.on;f!==i&&(r=(i=f).copy()).on(e,n),s.on=r}}function Ou(t,e){var n=this._id;return arguments.length<2?he(this.node(),n).on.on(t):this.each(Qu(n,t,e))}function Ju(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function $u(){return this.on("end.remove",Ju(this._id))}function Ku(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ni(t));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var f=i[s],a=f.length,l=o[s]=new Array(a),d,h,m=0;m<a;++m)(d=f[m])&&(h=t.call(d,d.__data__,m,f))&&("__data__"in d&&(h.__data__=d.__data__),l[m]=h,li(l[m],e,n,m,l,he(d,n)));return new De(o,this._parents,e,n)}function ju(t){var e=this._name,n=this._id;typeof t!="function"&&(t=xr(t));for(var i=this._groups,r=i.length,o=[],s=[],f=0;f<r;++f)for(var a=i[f],l=a.length,d,h=0;h<l;++h)if(d=a[h]){for(var m=t.call(d,d.__data__,h,a),g,v=he(d,n),p=0,k=m.length;p<k;++p)(g=m[p])&&li(g,e,n,p,m,v);o.push(m),s.push(d)}return new De(o,s,e,n)}var tf=pn.prototype.constructor;function ef(){return new tf(this._groups,this._parents)}function nf(t,e){var n,i,r;return function(){var o=tn(this,t),s=(this.style.removeProperty(t),tn(this,t));return o===s?null:o===n&&s===i?r:r=e(n=o,i=s)}}function no(t){return function(){this.style.removeProperty(t)}}function rf(t,e,n){var i,r=n+"",o;return function(){var s=tn(this,t);return s===r?null:s===i?o:o=e(i=s,n)}}function of(t,e,n){var i,r,o;return function(){var s=tn(this,t),f=n(this),a=f+"";return f==null&&(a=f=(this.style.removeProperty(t),tn(this,t))),s===a?null:s===i&&a===r?o:(r=a,o=e(i=s,f))}}function lf(t,e){var n,i,r,o="style."+e,s="end."+o,f;return function(){var a=be(this,t),l=a.on,d=a.value[o]==null?f||(f=no(e)):void 0;(l!==n||r!==d)&&(i=(n=l).copy()).on(s,r=d),a.on=i}}function af(t,e,n){var i=(t+="")=="transform"?uu:eo;return e==null?this.styleTween(t,nf(t,i)).on("end.style."+t,no(t)):typeof e=="function"?this.styleTween(t,of(t,i,Bi(this,"style."+t,e))).each(lf(this._id,t)):this.styleTween(t,rf(t,i,e),n).on("end.style."+t,null)}function sf(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function uf(t,e,n){var i,r;function o(){var s=e.apply(this,arguments);return s!==r&&(i=(r=s)&&sf(t,s,n)),i}return o._value=e,o}function ff(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,uf(t,e,n??""))}function cf(t){return function(){this.textContent=t}}function hf(t){return function(){var e=t(this);this.textContent=e??""}}function gf(t){return this.tween("text",typeof t=="function"?hf(Bi(this,"text",t)):cf(t==null?"":t+""))}function df(t){return function(e){this.textContent=t.call(this,e)}}function mf(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&df(r)),e}return i._value=t,i}function vf(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,mf(t))}function wf(){for(var t=this._name,e=this._id,n=io(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],f=s.length,a,l=0;l<f;++l)if(a=s[l]){var d=he(a,e);li(a,t,n,l,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new De(i,this._parents,t,n)}function pf(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(o,s){var f={value:s},a={value:function(){--r===0&&o()}};n.each(function(){var l=be(this,i),d=l.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(f),e._.interrupt.push(f),e._.end.push(a)),l.on=e}),r===0&&o()})}var yf=0;function De(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function io(){return++yf}var Ne=pn.prototype;De.prototype={constructor:De,select:Ku,selectAll:ju,selectChild:Ne.selectChild,selectChildren:Ne.selectChildren,filter:Xu,merge:Gu,selection:ef,transition:wf,call:Ne.call,nodes:Ne.nodes,node:Ne.node,size:Ne.size,empty:Ne.empty,each:Ne.each,on:Ou,attr:Nu,attrTween:Lu,style:af,styleTween:ff,text:gf,textTween:vf,remove:$u,tween:bu,delay:Pu,duration:qu,ease:Vu,easeVarying:Bu,end:pf,[Symbol.iterator]:Ne[Symbol.iterator]};function _f(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var xf={time:null,delay:0,duration:250,ease:_f};function bf(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Mf(t){var e,n;t instanceof De?(e=t._id,t=t._name):(e=io(),(n=xf).time=Yi(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],f=s.length,a,l=0;l<f;++l)(a=s[l])&&li(a,t,e,l,s,n||bf(a,e));return new De(i,this._parents,t,e)}pn.prototype.interrupt=yu,pn.prototype.transition=Mf;const Xi=Math.PI,Gi=2*Xi,Ie=1e-6,Tf=Gi-Ie;function ro(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Cf(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return ro;const n=10**e;return function(i){this._+=i[0];for(let r=1,o=i.length;r<o;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class kf{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?ro:Cf(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,o,s){this._append`C${+e},${+n},${+i},${+r},${this._x1=+o},${this._y1=+s}`}arcTo(e,n,i,r,o){if(e=+e,n=+n,i=+i,r=+r,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,f=this._y1,a=i-e,l=r-n,d=s-e,h=f-n,m=d*d+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(m>Ie)if(!(Math.abs(h*a-l*d)>Ie)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let g=i-s,v=r-f,p=a*a+l*l,k=g*g+v*v,E=Math.sqrt(p),C=Math.sqrt(m),y=o*Math.tan((Xi-Math.acos((p+m-k)/(2*E*C)))/2),_=y/C,F=y/E;Math.abs(_-1)>Ie&&this._append`L${e+_*d},${n+_*h}`,this._append`A${o},${o},0,0,${+(h*g>d*v)},${this._x1=e+F*a},${this._y1=n+F*l}`}}arc(e,n,i,r,o,s){if(e=+e,n=+n,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let f=i*Math.cos(r),a=i*Math.sin(r),l=e+f,d=n+a,h=1^s,m=s?r-o:o-r;this._x1===null?this._append`M${l},${d}`:(Math.abs(this._x1-l)>Ie||Math.abs(this._y1-d)>Ie)&&this._append`L${l},${d}`,i&&(m<0&&(m=m%Gi+Gi),m>Tf?this._append`A${i},${i},0,1,${h},${e-f},${n-a}A${i},${i},0,1,${h},${this._x1=l},${this._y1=d}`:m>Ie&&this._append`A${i},${i},0,${+(m>=Xi)},${h},${this._x1=e+i*Math.cos(o)},${this._y1=n+i*Math.sin(o)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function Af(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ai(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function rn(t){return t=ai(Math.abs(t)),t?t[1]:NaN}function Df(t,e){return function(n,i){for(var r=n.length,o=[],s=0,f=t[0],a=0;r>0&&f>0&&(a+f+1>i&&(f=Math.max(1,i-a)),o.push(n.substring(r-=f,r+f)),!((a+=f+1)>i));)f=t[s=(s+1)%t.length];return o.reverse().join(e)}}function Nf(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Sf=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function si(t){if(!(e=Sf.exec(t)))throw new Error("invalid format: "+t);var e;return new Zi({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}si.prototype=Zi.prototype;function Zi(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Zi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ff(t){t:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var oo;function Ef(t,e){var n=ai(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(oo=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+ai(t,Math.max(0,e+o-1))[0]}function lo(t,e){var n=ai(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const ao={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Af,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>lo(t*100,e),r:lo,s:Ef,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function so(t){return t}var uo=Array.prototype.map,fo=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Rf(t){var e=t.grouping===void 0||t.thousands===void 0?so:Df(uo.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?so:Nf(uo.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",f=t.minus===void 0?"":t.minus+"",a=t.nan===void 0?"NaN":t.nan+"";function l(h){h=si(h);var m=h.fill,g=h.align,v=h.sign,p=h.symbol,k=h.zero,E=h.width,C=h.comma,y=h.precision,_=h.trim,F=h.type;F==="n"?(C=!0,F="g"):ao[F]||(y===void 0&&(y=12),_=!0,F="g"),(k||m==="0"&&g==="=")&&(k=!0,m="0",g="=");var U=p==="$"?n:p==="#"&&/[boxX]/.test(F)?"0"+F.toLowerCase():"",R=p==="$"?i:/[%p]/.test(F)?s:"",T=ao[F],M=/[defgprs%]/.test(F);y=y===void 0?6:/[gprs]/.test(F)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function A(w){var N=U,x=R,I,Y,L;if(F==="c")x=T(w)+x,w="";else{w=+w;var ot=w<0||1/w<0;if(w=isNaN(w)?a:T(Math.abs(w),y),_&&(w=Ff(w)),ot&&+w==0&&v!=="+"&&(ot=!1),N=(ot?v==="("?v:f:v==="-"||v==="("?"":v)+N,x=(F==="s"?fo[8+oo/3]:"")+x+(ot&&v==="("?")":""),M){for(I=-1,Y=w.length;++I<Y;)if(L=w.charCodeAt(I),48>L||L>57){x=(L===46?r+w.slice(I+1):w.slice(I))+x,w=w.slice(0,I);break}}}C&&!k&&(w=e(w,1/0));var xt=N.length+w.length+x.length,Q=xt<E?new Array(E-xt+1).join(m):"";switch(C&&k&&(w=e(Q+w,Q.length?E-x.length:1/0),Q=""),g){case"<":w=N+w+x+Q;break;case"=":w=N+Q+w+x;break;case"^":w=Q.slice(0,xt=Q.length>>1)+N+w+x+Q.slice(xt);break;default:w=Q+N+w+x;break}return o(w)}return A.toString=function(){return h+""},A}function d(h,m){var g=l((h=si(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(rn(m)/3)))*3,p=Math.pow(10,-v),k=fo[8+v/3];return function(E){return g(p*E)+k}}return{format:l,formatPrefix:d}}var ui,co,ho;Lf({thousands:",",grouping:[3],currency:["$",""]});function Lf(t){return ui=Rf(t),co=ui.format,ho=ui.formatPrefix,ui}function Uf(t){return Math.max(0,-rn(Math.abs(t)))}function Hf(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(rn(e)/3)))*3-rn(Math.abs(t)))}function Pf(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,rn(e)-rn(t))+1}function zf(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Yf(t){return function(){return t}}function qf(t){return+t}var go=[0,1];function on(t){return t}function Qi(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Yf(isNaN(e)?NaN:.5)}function If(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function Vf(t,e,n){var i=t[0],r=t[1],o=e[0],s=e[1];return r<i?(i=Qi(r,i),o=n(s,o)):(i=Qi(i,r),o=n(o,s)),function(f){return o(i(f))}}function Wf(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),o=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)r[s]=Qi(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(f){var a=Il(t,f,1,i)-1;return o[a](r[a](f))}}function Bf(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Xf(){var t=go,e=go,n=Pi,i,r,o,s=on,f,a,l;function d(){var m=Math.min(t.length,e.length);return s!==on&&(s=If(t[0],t[m-1])),f=m>2?Wf:Vf,a=l=null,h}function h(m){return m==null||isNaN(m=+m)?o:(a||(a=f(t.map(i),e,n)))(i(s(m)))}return h.invert=function(m){return s(r((l||(l=f(e,t.map(i),ce)))(m)))},h.domain=function(m){return arguments.length?(t=Array.from(m,qf),d()):t.slice()},h.range=function(m){return arguments.length?(e=Array.from(m),d()):e.slice()},h.rangeRound=function(m){return e=Array.from(m),n=lu,d()},h.clamp=function(m){return arguments.length?(s=m?!0:on,d()):s!==on},h.interpolate=function(m){return arguments.length?(n=m,d()):n},h.unknown=function(m){return arguments.length?(o=m,h):o},function(m,g){return i=m,r=g,d()}}function Gf(){return Xf()(on,on)}function Zf(t,e,n,i){var r=Zl(t,e,n),o;switch(i=si(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(o=Hf(r,s))&&(i.precision=o),ho(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=Pf(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=Uf(r))&&(i.precision=o-(i.type==="%")*2);break}}return co(i)}function Qf(t){var e=t.domain;return t.ticks=function(n){var i=e();return Gl(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return Zf(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,o=i.length-1,s=i[r],f=i[o],a,l,d=10;for(f<s&&(l=s,s=f,f=l,l=r,r=o,o=l);d-- >0;){if(l=Mi(s,f,n),l===a)return i[r]=s,i[o]=f,e(i);if(l>0)s=Math.floor(s/l)*l,f=Math.ceil(f/l)*l;else if(l<0)s=Math.ceil(s*l)/l,f=Math.floor(f*l)/l;else break;a=l}return t},t}function ln(){var t=Gf();return t.copy=function(){return Bf(t,ln())},zf.apply(t,arguments),Qf(t)}const Oi=new Date,Ji=new Date;function Me(t,e,n,i){function r(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return r.floor=o=>(t(o=new Date(+o)),o),r.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),r.round=o=>{const s=r(o),f=r.ceil(o);return o-s<f-o?s:f},r.offset=(o,s)=>(e(o=new Date(+o),s==null?1:Math.floor(s)),o),r.range=(o,s,f)=>{const a=[];if(o=r.ceil(o),f=f==null?1:Math.floor(f),!(o<s)||!(f>0))return a;let l;do a.push(l=new Date(+o)),e(o,f),t(o);while(l<o&&o<s);return a},r.filter=o=>Me(s=>{if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},(s,f)=>{if(s>=s)if(f<0)for(;++f<=0;)for(;e(s,-1),!o(s););else for(;--f>=0;)for(;e(s,1),!o(s););}),n&&(r.count=(o,s)=>(Oi.setTime(+o),Ji.setTime(+s),t(Oi),t(Ji),Math.floor(n(Oi,Ji))),r.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?r.filter(i?s=>i(s)%o===0:s=>r.count(0,s)%o===0):r)),r}const $i=1e3*60,kn=$i*60*24,mo=kn*7,ge=Me(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*$i)/kn,t=>t.getDate()-1);ge.range;const Ki=Me(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/kn,t=>t.getUTCDate()-1);Ki.range,Me(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/kn,t=>Math.floor(t/kn)).range;function Ve(t){return Me(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*$i)/mo)}const vo=Ve(0),fi=Ve(1),Of=Ve(2),Jf=Ve(3),an=Ve(4),$f=Ve(5),Kf=Ve(6);vo.range,fi.range,Of.range,Jf.range,an.range,$f.range,Kf.range;function We(t){return Me(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/mo)}const wo=We(0),ci=We(1),jf=We(2),tc=We(3),sn=We(4),ec=We(5),nc=We(6);wo.range,ci.range,jf.range,tc.range,sn.range,ec.range,nc.range;const Be=Me(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Be.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Me(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)}),Be.range;const Xe=Me(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Xe.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Me(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)}),Xe.range;function ji(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function tr(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function An(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function ic(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,o=t.days,s=t.shortDays,f=t.months,a=t.shortMonths,l=Dn(r),d=Nn(r),h=Dn(o),m=Nn(o),g=Dn(s),v=Nn(s),p=Dn(f),k=Nn(f),E=Dn(a),C=Nn(a),y={a:ot,A:xt,b:Q,B:lt,c:null,d:Mo,e:Mo,f:kc,g:Hc,G:zc,H:Mc,I:Tc,j:Cc,L:To,m:Ac,M:Dc,p:nt,q:st,Q:So,s:Fo,S:Nc,u:Sc,U:Fc,V:Ec,w:Rc,W:Lc,x:null,X:null,y:Uc,Y:Pc,Z:Yc,"%":No},_={a:At,A:X,b:P,B:$,c:null,d:ko,e:ko,f:Wc,g:jc,G:eh,H:qc,I:Ic,j:Vc,L:Ao,m:Bc,M:Xc,p:mt,q:b,Q:So,s:Fo,S:Gc,u:Zc,U:Qc,V:Oc,w:Jc,W:$c,x:null,X:null,y:Kc,Y:th,Z:nh,"%":No},F={a:A,A:w,b:N,B:x,c:I,d:xo,e:xo,f:yc,g:_o,G:yo,H:bo,I:bo,j:mc,L:pc,m:dc,M:vc,p:M,q:gc,Q:xc,s:bc,S:wc,u:sc,U:uc,V:fc,w:ac,W:cc,x:Y,X:L,y:_o,Y:yo,Z:hc,"%":_c};y.x=U(n,y),y.X=U(i,y),y.c=U(e,y),_.x=U(n,_),_.X=U(i,_),_.c=U(e,_);function U(B,tt){return function(G){var D=[],J=-1,S=0,z=B.length,V,Z,K;for(G instanceof Date||(G=new Date(+G));++J<z;)B.charCodeAt(J)===37&&(D.push(B.slice(S,J)),(Z=po[V=B.charAt(++J)])!=null?V=B.charAt(++J):Z=V==="e"?" ":"0",(K=tt[V])&&(V=K(G,Z)),D.push(V),S=J+1);return D.push(B.slice(S,J)),D.join("")}}function R(B,tt){return function(G){var D=An(1900,void 0,1),J=T(D,B,G+="",0),S,z;if(J!=G.length)return null;if("Q"in D)return new Date(D.Q);if("s"in D)return new Date(D.s*1e3+("L"in D?D.L:0));if(tt&&!("Z"in D)&&(D.Z=0),"p"in D&&(D.H=D.H%12+D.p*12),D.m===void 0&&(D.m="q"in D?D.q:0),"V"in D){if(D.V<1||D.V>53)return null;"w"in D||(D.w=1),"Z"in D?(S=tr(An(D.y,0,1)),z=S.getUTCDay(),S=z>4||z===0?ci.ceil(S):ci(S),S=Ki.offset(S,(D.V-1)*7),D.y=S.getUTCFullYear(),D.m=S.getUTCMonth(),D.d=S.getUTCDate()+(D.w+6)%7):(S=ji(An(D.y,0,1)),z=S.getDay(),S=z>4||z===0?fi.ceil(S):fi(S),S=ge.offset(S,(D.V-1)*7),D.y=S.getFullYear(),D.m=S.getMonth(),D.d=S.getDate()+(D.w+6)%7)}else("W"in D||"U"in D)&&("w"in D||(D.w="u"in D?D.u%7:"W"in D?1:0),z="Z"in D?tr(An(D.y,0,1)).getUTCDay():ji(An(D.y,0,1)).getDay(),D.m=0,D.d="W"in D?(D.w+6)%7+D.W*7-(z+5)%7:D.w+D.U*7-(z+6)%7);return"Z"in D?(D.H+=D.Z/100|0,D.M+=D.Z%100,tr(D)):ji(D)}}function T(B,tt,G,D){for(var J=0,S=tt.length,z=G.length,V,Z;J<S;){if(D>=z)return-1;if(V=tt.charCodeAt(J++),V===37){if(V=tt.charAt(J++),Z=F[V in po?tt.charAt(J++):V],!Z||(D=Z(B,G,D))<0)return-1}else if(V!=G.charCodeAt(D++))return-1}return D}function M(B,tt,G){var D=l.exec(tt.slice(G));return D?(B.p=d.get(D[0].toLowerCase()),G+D[0].length):-1}function A(B,tt,G){var D=g.exec(tt.slice(G));return D?(B.w=v.get(D[0].toLowerCase()),G+D[0].length):-1}function w(B,tt,G){var D=h.exec(tt.slice(G));return D?(B.w=m.get(D[0].toLowerCase()),G+D[0].length):-1}function N(B,tt,G){var D=E.exec(tt.slice(G));return D?(B.m=C.get(D[0].toLowerCase()),G+D[0].length):-1}function x(B,tt,G){var D=p.exec(tt.slice(G));return D?(B.m=k.get(D[0].toLowerCase()),G+D[0].length):-1}function I(B,tt,G){return T(B,e,tt,G)}function Y(B,tt,G){return T(B,n,tt,G)}function L(B,tt,G){return T(B,i,tt,G)}function ot(B){return s[B.getDay()]}function xt(B){return o[B.getDay()]}function Q(B){return a[B.getMonth()]}function lt(B){return f[B.getMonth()]}function nt(B){return r[+(B.getHours()>=12)]}function st(B){return 1+~~(B.getMonth()/3)}function At(B){return s[B.getUTCDay()]}function X(B){return o[B.getUTCDay()]}function P(B){return a[B.getUTCMonth()]}function $(B){return f[B.getUTCMonth()]}function mt(B){return r[+(B.getUTCHours()>=12)]}function b(B){return 1+~~(B.getUTCMonth()/3)}return{format:function(B){var tt=U(B+="",y);return tt.toString=function(){return B},tt},parse:function(B){var tt=R(B+="",!1);return tt.toString=function(){return B},tt},utcFormat:function(B){var tt=U(B+="",_);return tt.toString=function(){return B},tt},utcParse:function(B){var tt=R(B+="",!0);return tt.toString=function(){return B},tt}}}var po={"-":"",_:" ",0:"0"},Yt=/^\s*\d+/,rc=/^%/,oc=/[\\^$*+?|[\]().{}]/g;function Dt(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(e)+r:r)}function lc(t){return t.replace(oc,"\\$&")}function Dn(t){return new RegExp("^(?:"+t.map(lc).join("|")+")","i")}function Nn(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function ac(t,e,n){var i=Yt.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function sc(t,e,n){var i=Yt.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function uc(t,e,n){var i=Yt.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function fc(t,e,n){var i=Yt.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function cc(t,e,n){var i=Yt.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function yo(t,e,n){var i=Yt.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function _o(t,e,n){var i=Yt.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function hc(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function gc(t,e,n){var i=Yt.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function dc(t,e,n){var i=Yt.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function xo(t,e,n){var i=Yt.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function mc(t,e,n){var i=Yt.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function bo(t,e,n){var i=Yt.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function vc(t,e,n){var i=Yt.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function wc(t,e,n){var i=Yt.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function pc(t,e,n){var i=Yt.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function yc(t,e,n){var i=Yt.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function _c(t,e,n){var i=rc.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function xc(t,e,n){var i=Yt.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function bc(t,e,n){var i=Yt.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function Mo(t,e){return Dt(t.getDate(),e,2)}function Mc(t,e){return Dt(t.getHours(),e,2)}function Tc(t,e){return Dt(t.getHours()%12||12,e,2)}function Cc(t,e){return Dt(1+ge.count(Be(t),t),e,3)}function To(t,e){return Dt(t.getMilliseconds(),e,3)}function kc(t,e){return To(t,e)+"000"}function Ac(t,e){return Dt(t.getMonth()+1,e,2)}function Dc(t,e){return Dt(t.getMinutes(),e,2)}function Nc(t,e){return Dt(t.getSeconds(),e,2)}function Sc(t){var e=t.getDay();return e===0?7:e}function Fc(t,e){return Dt(vo.count(Be(t)-1,t),e,2)}function Co(t){var e=t.getDay();return e>=4||e===0?an(t):an.ceil(t)}function Ec(t,e){return t=Co(t),Dt(an.count(Be(t),t)+(Be(t).getDay()===4),e,2)}function Rc(t){return t.getDay()}function Lc(t,e){return Dt(fi.count(Be(t)-1,t),e,2)}function Uc(t,e){return Dt(t.getFullYear()%100,e,2)}function Hc(t,e){return t=Co(t),Dt(t.getFullYear()%100,e,2)}function Pc(t,e){return Dt(t.getFullYear()%1e4,e,4)}function zc(t,e){var n=t.getDay();return t=n>=4||n===0?an(t):an.ceil(t),Dt(t.getFullYear()%1e4,e,4)}function Yc(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Dt(e/60|0,"0",2)+Dt(e%60,"0",2)}function ko(t,e){return Dt(t.getUTCDate(),e,2)}function qc(t,e){return Dt(t.getUTCHours(),e,2)}function Ic(t,e){return Dt(t.getUTCHours()%12||12,e,2)}function Vc(t,e){return Dt(1+Ki.count(Xe(t),t),e,3)}function Ao(t,e){return Dt(t.getUTCMilliseconds(),e,3)}function Wc(t,e){return Ao(t,e)+"000"}function Bc(t,e){return Dt(t.getUTCMonth()+1,e,2)}function Xc(t,e){return Dt(t.getUTCMinutes(),e,2)}function Gc(t,e){return Dt(t.getUTCSeconds(),e,2)}function Zc(t){var e=t.getUTCDay();return e===0?7:e}function Qc(t,e){return Dt(wo.count(Xe(t)-1,t),e,2)}function Do(t){var e=t.getUTCDay();return e>=4||e===0?sn(t):sn.ceil(t)}function Oc(t,e){return t=Do(t),Dt(sn.count(Xe(t),t)+(Xe(t).getUTCDay()===4),e,2)}function Jc(t){return t.getUTCDay()}function $c(t,e){return Dt(ci.count(Xe(t)-1,t),e,2)}function Kc(t,e){return Dt(t.getUTCFullYear()%100,e,2)}function jc(t,e){return t=Do(t),Dt(t.getUTCFullYear()%100,e,2)}function th(t,e){return Dt(t.getUTCFullYear()%1e4,e,4)}function eh(t,e){var n=t.getUTCDay();return t=n>=4||n===0?sn(t):sn.ceil(t),Dt(t.getUTCFullYear()%1e4,e,4)}function nh(){return"+0000"}function No(){return"%"}function So(t){return+t}function Fo(t){return Math.floor(+t/1e3)}var un,Sn,Eo;ih({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ih(t){return un=ic(t),Sn=un.format,un.parse,Eo=un.utcFormat,un.utcParse,un}function qt(t){return function(){return t}}function Ro(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new kf(e)}function Lo(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Uo(t){this._context=t}Uo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Ho(t){return new Uo(t)}function Po(t){return t[0]}function zo(t){return t[1]}function Fn(t,e){var n=qt(!0),i=null,r=Ho,o=null,s=Ro(f);t=typeof t=="function"?t:t===void 0?Po:qt(t),e=typeof e=="function"?e:e===void 0?zo:qt(e);function f(a){var l,d=(a=Lo(a)).length,h,m=!1,g;for(i==null&&(o=r(g=s())),l=0;l<=d;++l)!(l<d&&n(h=a[l],l,a))===m&&((m=!m)?o.lineStart():o.lineEnd()),m&&o.point(+t(h,l,a),+e(h,l,a));if(g)return o=null,g+""||null}return f.x=function(a){return arguments.length?(t=typeof a=="function"?a:qt(+a),f):t},f.y=function(a){return arguments.length?(e=typeof a=="function"?a:qt(+a),f):e},f.defined=function(a){return arguments.length?(n=typeof a=="function"?a:qt(!!a),f):n},f.curve=function(a){return arguments.length?(r=a,i!=null&&(o=r(i)),f):r},f.context=function(a){return arguments.length?(a==null?i=o=null:o=r(i=a),f):i},f}function de(t,e,n){var i=null,r=qt(!0),o=null,s=Ho,f=null,a=Ro(l);t=typeof t=="function"?t:t===void 0?Po:qt(+t),e=typeof e=="function"?e:qt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?zo:qt(+n);function l(h){var m,g,v,p=(h=Lo(h)).length,k,E=!1,C,y=new Array(p),_=new Array(p);for(o==null&&(f=s(C=a())),m=0;m<=p;++m){if(!(m<p&&r(k=h[m],m,h))===E)if(E=!E)g=m,f.areaStart(),f.lineStart();else{for(f.lineEnd(),f.lineStart(),v=m-1;v>=g;--v)f.point(y[v],_[v]);f.lineEnd(),f.areaEnd()}E&&(y[m]=+t(k,m,h),_[m]=+e(k,m,h),f.point(i?+i(k,m,h):y[m],n?+n(k,m,h):_[m]))}if(C)return f=null,C+""||null}function d(){return Fn().defined(r).curve(s).context(o)}return l.x=function(h){return arguments.length?(t=typeof h=="function"?h:qt(+h),i=null,l):t},l.x0=function(h){return arguments.length?(t=typeof h=="function"?h:qt(+h),l):t},l.x1=function(h){return arguments.length?(i=h==null?null:typeof h=="function"?h:qt(+h),l):i},l.y=function(h){return arguments.length?(e=typeof h=="function"?h:qt(+h),n=null,l):e},l.y0=function(h){return arguments.length?(e=typeof h=="function"?h:qt(+h),l):e},l.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:qt(+h),l):n},l.lineX0=l.lineY0=function(){return d().x(t).y(e)},l.lineY1=function(){return d().x(t).y(n)},l.lineX1=function(){return d().x(i).y(e)},l.defined=function(h){return arguments.length?(r=typeof h=="function"?h:qt(!!h),l):r},l.curve=function(h){return arguments.length?(s=h,o!=null&&(f=s(o)),l):s},l.context=function(h){return arguments.length?(h==null?o=f=null:f=s(o=h),l):o},l}function Yo(t){return t<0?-1:1}function qo(t,e,n){var i=t._x1-t._x0,r=e-t._x1,o=(t._y1-t._y0)/(i||r<0&&-0),s=(n-t._y1)/(r||i<0&&-0),f=(o*r+s*i)/(i+r);return(Yo(o)+Yo(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(f))||0}function Io(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function er(t,e,n){var i=t._x0,r=t._y0,o=t._x1,s=t._y1,f=(o-i)/3;t._context.bezierCurveTo(i+f,r+f*e,o-f,s-f*n,o,s)}function hi(t){this._context=t}hi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:er(this,this._t0,Io(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,er(this,Io(this,n=qo(this,t,e)),n);break;default:er(this,this._t0,n=qo(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},Object.create(hi.prototype).point=function(t,e){hi.prototype.point.call(this,e,t)};function nr(t){return new hi(t)}function En(t,e,n){this.k=t,this.x=e,this.y=n}En.prototype={constructor:En,scale:function(t){return t===1?this:new En(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new En(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},En.prototype;function rh(t){let e,n,i,r,o,s,f,a=t[0]?"-":"=",l,d,h,m,g,v,p,k,E,C,y,_,F,U,R,T,M,A,w,N,x,I,Y,L,ot,xt,Q,lt,nt,st,At,X;return{c(){e=q("div"),n=q("canvas"),r=et(),o=q("div"),s=q("div"),f=q("button"),l=H(a),d=et(),h=q("div"),m=H(t[4]),g=et(),v=q("div"),p=q("div"),k=q("button"),E=H("1d"),y=et(),_=q("button"),F=H("3d"),R=et(),T=q("button"),M=H("1w"),w=et(),N=q("button"),x=H("2w"),Y=et(),L=q("button"),ot=H("1m"),Q=et(),lt=q("button"),nt=H("3m"),u(n,"style",i=`width:100%; display:${t[0]?"block":"none"}; border:0;`),u(f,"type","button"),u(f,"class","qbtn svelte-1xibldd"),u(f,"title","Hide/show calendar canvas"),j(s,"display","flex"),j(s,"gap","8px"),j(s,"align-items","center"),j(s,"justify-content","flex-end"),j(s,"flex","0 0 auto"),j(h,"text-align","left"),j(h,"color","#000"),j(h,"font-size","12px"),j(h,"font-weight","600"),j(h,"min-width","160px"),j(h,"flex","1 1 auto"),u(k,"type","button"),u(k,"class",C=se(`qbtn ${t[3]===1?"active":""}`)+" svelte-1xibldd"),u(_,"type","button"),u(_,"class",U=se(`qbtn ${t[3]===3?"active":""}`)+" svelte-1xibldd"),u(T,"type","button"),u(T,"class",A=se(`qbtn ${t[3]===7?"active":""}`)+" svelte-1xibldd"),u(N,"type","button"),u(N,"class",I=se(`qbtn ${t[3]===14?"active":""}`)+" svelte-1xibldd"),u(L,"type","button"),u(L,"class",xt=se(`qbtn ${t[3]===30?"active":""}`)+" svelte-1xibldd"),u(lt,"type","button"),u(lt,"class",st=se(`qbtn ${t[3]===90?"active":""}`)+" svelte-1xibldd"),j(p,"display","flex"),j(p,"gap","16px"),j(p,"flex-wrap","wrap"),j(p,"justify-content","flex-end"),j(v,"display","flex"),j(v,"align-items","center"),j(v,"gap","20px"),j(v,"justify-content","flex-end"),j(v,"margin-left","auto"),u(o,"id","controlBar"),j(o,"display","flex"),j(o,"align-items","center"),j(o,"gap","12px"),j(o,"flex-wrap","wrap"),j(o,"margin","0 0 6px"),u(e,"class","cgm-widget"),j(e,"contain","layout")},m(P,$){Lt(P,e,$),c(e,n),t[15](n),c(e,r),c(e,o),c(o,s),c(s,f),c(f,l),c(o,d),c(o,h),c(h,m),t[17](h),c(o,g),c(o,v),c(v,p),c(p,k),c(k,E),c(p,y),c(p,_),c(_,F),c(p,R),c(p,T),c(T,M),c(p,w),c(p,N),c(N,x),c(p,Y),c(p,L),c(L,ot),c(p,Q),c(p,lt),c(lt,nt),At||(X=[He(f,"click",t[16]),He(k,"click",t[18]),He(_,"click",t[19]),He(T,"click",t[20]),He(N,"click",t[21]),He(L,"click",t[22]),He(lt,"click",t[23])],At=!0)},p(P,$){$[0]&1&&i!==(i=`width:100%; display:${P[0]?"block":"none"}; border:0;`)&&u(n,"style",i),$[0]&1&&a!==(a=P[0]?"-":"=")&&kt(l,a),$[0]&16&&kt(m,P[4]),$[0]&8&&C!==(C=se(`qbtn ${P[3]===1?"active":""}`)+" svelte-1xibldd")&&u(k,"class",C),$[0]&8&&U!==(U=se(`qbtn ${P[3]===3?"active":""}`)+" svelte-1xibldd")&&u(_,"class",U),$[0]&8&&A!==(A=se(`qbtn ${P[3]===7?"active":""}`)+" svelte-1xibldd")&&u(T,"class",A),$[0]&8&&I!==(I=se(`qbtn ${P[3]===14?"active":""}`)+" svelte-1xibldd")&&u(N,"class",I),$[0]&8&&xt!==(xt=se(`qbtn ${P[3]===30?"active":""}`)+" svelte-1xibldd")&&u(L,"class",xt),$[0]&8&&st!==(st=se(`qbtn ${P[3]===90?"active":""}`)+" svelte-1xibldd")&&u(lt,"class",st)},i:ht,o:ht,d(P){P&&Et(e),t[15](null),t[17](null),At=!1,dn(X)}}}const me=54;function oh(t,e,n){let{data:i}=e,{initialRange:r=null}=e,{externalRange:o=null}=e,{preset:s="N"}=e,{showMonthLabels:f=!0}=e,{showData:a=!0}=e,{showCanvas:l=!0}=e;const d=Je();let h,m;const g={l:48,r:12,t:8,b:8},v=[1,3,7,14,30,90];let p,k,E=24*60*60*1e3;const C=()=>new Date(i.t0).getTime(),y=()=>/mmol/i.test((i==null?void 0:i.units)||"mmol");function _(){return y()?s==="T"?{vlow:3,low:3.9,high:7.8,vhigh:13.9}:s==="P"?{vlow:3,low:3.5,high:7.8,vhigh:13.9}:{vlow:3,low:3.9,high:10,vhigh:13.9}:s==="T"?{vlow:54,low:70,high:140,vhigh:250}:s==="P"?{vlow:54,low:63,high:140,vhigh:250}:{vlow:54,low:70,high:180,vhigh:250}}let F=0,U=0,R=0,T=0;function M(S){let z=v[0],V=1/0;for(const Z of v){const K=Math.abs(Z-S);K<V&&(V=K,z=Z)}return z}function A(){return Math.max(1,Math.floor((T-R)/E)+1)}let w=14;const N=S=>{const z=new Date(S);return Date.UTC(z.getUTCFullYear(),z.getUTCMonth(),z.getUTCDate())};let x;function I(){x=new Map;for(let S=0;S<k.length;S++){const z=k[S];if(!(Number.isFinite(z)&&z>=0))continue;const V=N(p[S]);let Z=x.get(V);Z||(Z={valid:0,vl:0,l:0,t:0,h:0,vh:0},x.set(V,Z)),Z.valid++;const K=_();z<K.vlow?Z.vl++:z<K.low?Z.l++:z<=K.high?Z.t++:z<=K.vhigh?Z.h++:Z.vh++}}function Y(){p=Float64Array.from({length:i.glucose.length},(S,z)=>C()+z*i.stepMs),n(12,k=Float64Array.from(i.glucose)),F=N(p[0]),U=N(p[p.length-1]),n(13,R=(r==null?void 0:r.start)??F),n(14,T=(r==null?void 0:r.end)??U),I()}let L;function ot(){if(!h||!(x!=null&&x.size))return;const S=Math.max(1,window.devicePixelRatio||1),z=Math.max(320,h.getBoundingClientRect().width||900),V=new Date(F).getUTCFullYear(),Z=new Date(U).getUTCFullYear(),K=Ti(V,Z+1),yt=f?24:g.b,Tt=g.t+K.length*me+yt;n(1,h.style.width=z+"px",h),n(1,h.style.height=Tt+"px",h),n(1,h.width=Math.floor(z*S),h),n(1,h.height=Math.floor(Tt*S),h),L.setTransform(S,0,0,S,0,0),L.clearRect(0,0,z,Tt),L.fillStyle="#fff",L.fillRect(0,0,z,Tt);const ut=z-g.l-g.r;if(L.strokeStyle="#f0f0f0",L.lineWidth=1,K.forEach((vt,Ct)=>{const wt=g.t+Ct*me;for(let _t=1;_t<12;_t++){const rt=Date.UTC(vt,_t,1);if(rt<F||rt>U)continue;const pt=(Date.UTC(vt+1,0,1)-Date.UTC(vt,0,1))/E,it=g.l+Math.round((rt-Date.UTC(vt,0,1))/E*(ut/pt));L.beginPath(),L.moveTo(it,wt+6),L.lineTo(it,wt+me-6),L.stroke()}}),K.forEach((vt,Ct)=>{const wt=g.t+Ct*me;L.fillStyle="#444",L.font="12px system-ui, sans-serif",L.textAlign="right",L.textBaseline="middle",L.fillText(String(vt),g.l-8,wt+me/2);const _t=Date.UTC(vt,0,1),rt=Date.UTC(vt+1,0,1)-E,pt=Math.round((Date.UTC(vt+1,0,1)-Date.UTC(vt,0,1))/E),it=at=>g.l+Math.floor((at-Date.UTC(vt,0,1))/E*(ut/pt)),ft=me-10,dt=wt+5;if(!a){L.fillStyle="#efefef";for(let at=Math.max(_t,F);at<=Math.min(rt,U);at+=E){const Mt=it(at),W=it(at+E),bt=Math.max(1,W-Mt);L.fillRect(Mt,dt,bt,ft)}return}for(let at=Math.max(_t,F);at<=Math.min(rt,U);at+=E){const Mt=it(at),W=it(at+E),bt=Math.max(1,W-Mt),ct=x.get(at);if(!ct||!ct.valid){L.fillStyle="#efefef",L.globalAlpha=1,L.fillRect(Mt,dt,bt,ft);continue}const Rt=Math.max(1,Math.round(E/i.stepMs)),Pt={vl:ct.vl/ct.valid,l:ct.l/ct.valid,t:ct.t/ct.valid,h:ct.h/ct.valid,vh:ct.vh/ct.valid};let Wt=dt+ft;const Vt=(ve,Ut,Nt)=>{const St=Math.round(Ut*ft);St<=0||(Wt-=St,L.fillStyle=ve,L.globalAlpha=Nt,L.fillRect(Mt,Wt,bt,St))},It=ct.valid/Rt>=.5?.8:.4,Zt=ct.valid/Rt>=.5?.9:.6;Vt("#e57373",Pt.vl,It),Vt("#ff9e80",Pt.l,It),Vt("#86c89d",Pt.t,Zt),Vt("#ffcc80",Pt.h,It),Vt("#ff8a65",Pt.vh,It),L.globalAlpha=1}}),a){const vt=Math.max(F,Math.min(U,R)),Ct=Math.max(F,Math.min(U,T));K.forEach((wt,_t)=>{const rt=g.t+_t*me,pt=Date.UTC(wt,0,1),it=Date.UTC(wt+1,0,1)-1,ft=Math.max(pt,vt),dt=Math.min(it,Ct);if(ft>dt)return;const at=(Date.UTC(wt+1,0,1)-Date.UTC(wt,0,1))/E,Mt=Pt=>g.l+Math.floor((Pt-Date.UTC(wt,0,1))/E*(ut/at)),W=Mt(ft),bt=Mt(dt+1),ct=rt+5,Rt=me-10;L.save(),L.fillStyle="rgba(107,127,161,0.28)",L.fillRect(W,ct,Math.max(1,bt-W),Rt),L.strokeStyle="#6b7fa1",L.lineWidth=1.5,L.beginPath(),L.moveTo(W+.5,ct+.5),L.lineTo(W+.5,ct+Rt-.5),L.stroke(),L.beginPath(),L.moveTo(bt-.5,ct+.5),L.lineTo(bt-.5,ct+Rt-.5),L.stroke(),L.restore()})}if(f){const vt=Eo("%b"),Ct=K[K.length-1],wt=Date.UTC(Ct,0,1),rt=(Date.UTC(Ct+1,0,1)-wt)/E,pt=dt=>g.l+Math.round((dt-wt)/E*(ut/rt)),ft=g.t+(K.length-1)*me+me-5+.5;L.save(),L.strokeStyle="#bbb",L.lineWidth=1,L.fillStyle="#555",L.font="11px system-ui, sans-serif",L.textAlign="center",L.textBaseline="top";for(let dt=0;dt<12;dt++){const at=Date.UTC(Ct,dt,1),Mt=pt(at);L.beginPath(),L.moveTo(Mt,ft),L.lineTo(Mt,ft+4),L.stroke(),L.fillText(vt(new Date(Date.UTC(2e3,dt,1))),Mt,ft+6)}L.restore()}}function xt(S,z){const V=new Date(S),Z=new Date(z),K=Sn("%b %e"),yt=Sn("%b %e, %Y"),Tt=Sn("%e, %Y"),ut=Date.UTC(V.getUTCFullYear(),V.getUTCMonth(),V.getUTCDate()),vt=Date.UTC(Z.getUTCFullYear(),Z.getUTCMonth(),Z.getUTCDate());return ut===vt?yt(Z):V.getFullYear()===Z.getFullYear()?V.getMonth()===Z.getMonth()?`${K(V)}  ${Tt(Z)}`:`${K(V)}  ${yt(Z)}`:`${yt(V)}  ${yt(Z)}`}let Q="";function lt(){const S=A();n(3,w=M(S));const z=Math.max(0,Math.ceil((R-p[0])/i.stepMs)),V=Math.min(k.length-1,Math.floor((T-p[0])/i.stepMs));try{typeof window<"u"&&window.CGM_DEBUG&&console.log("[CgmTir] rangechange",{startISO:new Date(R).toISOString(),endISO:new Date(T).toISOString(),days:S,startIdx:z,endIdx:V})}catch{}d("rangechange",{start:R,end:T,days:S,startIdx:z,endIdx:V})}function nt(S){n(14,T=U),n(13,R=Math.max(F,T-S*E+1)),lt(),ot()}function st(S){const z=R+S*E,V=T+S*E,Z=Math.max(E,V-z);n(13,R=Math.max(F,Math.min(U-Z,z))),n(14,T=Math.min(U,R+Z)),lt(),ot()}function At(S){const z=A()*E*S;st(z/E)}function X(){const S=h;let z=!1,V=null,Z=null,K=0,yt=0;const Tt=6,ut=_t=>{const rt=new Date(_t);return Date.UTC(rt.getUTCFullYear(),rt.getUTCMonth(),rt.getUTCDate())};function vt(){const _t=Math.max(320,S.getBoundingClientRect().width||900),rt=_t-g.l-g.r,pt=Ti(new Date(F).getUTCFullYear(),new Date(U).getUTCFullYear()+1);return{cssW:_t,plotW:rt,years:pt}}function Ct(_t,rt){const pt=(Date.UTC(_t+1,0,1)-Date.UTC(_t,0,1))/E;return it=>g.l+Math.floor((it-Date.UTC(_t,0,1))/E*(rt/pt))}function wt(_t){const rt=S.getBoundingClientRect(),pt=_t.clientX-rt.left,it=_t.clientY-rt.top,{cssW:ft,years:dt}=vt(),at=Math.floor((it-8)/me);if(at<0||at>=dt.length)return null;const Mt=dt[at],W=g.l,bt=ft-g.r,ct=Math.max(W,Math.min(bt,pt)),Rt=(Date.UTC(Mt+1,0,1)-Date.UTC(Mt,0,1))/E,Pt=(ct-W)/(bt-W);let Wt=Date.UTC(Mt,0,1)+Pt*Rt*E;return Wt=Math.max(F,Math.min(U,Wt)),{t:Wt,yr:Mt,x:ct,rowIdx:at}}S.addEventListener("mousedown",_t=>{const rt=wt(_t);if(!rt)return;const{plotW:pt}=vt(),it=Ct(rt.yr,pt),ft=it(Math.max(Date.UTC(rt.yr,0,1),R)),dt=it(Math.min(Date.UTC(rt.yr+1,0,1)-1,T))+1;V="new",rt.x>=ft-Tt&&rt.x<=ft+Tt?V="resize-l":rt.x>=dt-Tt&&rt.x<=dt+Tt?V="resize-r":rt.x>ft&&rt.x<dt&&(V="move"),z=!0,Z=rt.t,K=R,yt=T,document.body.style.userSelect="none",S.style.cursor=V==="move"?"grabbing":V==="new"?"crosshair":"col-resize"}),window.addEventListener("mousemove",_t=>{const rt=wt(_t);if(!rt){z||(S.style.cursor="crosshair");return}if(!z){const{plotW:ft}=vt(),dt=Ct(rt.yr,ft),at=dt(Math.max(Date.UTC(rt.yr,0,1),R)),Mt=dt(Math.min(Date.UTC(rt.yr+1,0,1)-1,T))+1;rt.x>=at-Tt&&rt.x<=at+Tt||rt.x>=Mt-Tt&&rt.x<=Mt+Tt?S.style.cursor="col-resize":rt.x>at&&rt.x<Mt?S.style.cursor="grab":S.style.cursor="crosshair";return}const pt=rt.t,it=E;if(V==="new"){const ft=ut(Math.min(Z,pt)),dt=ut(Math.max(Z,pt));let at=Math.max(1,Math.floor((dt-ft)/it)+1);const Mt=M(at);if(pt>=Z){let W=ft,bt=W+Mt*it-1;bt>U&&(bt=U,W=Math.max(F,bt-Mt*it+1)),n(13,R=W),n(14,T=bt)}else{let W=dt+it-1,bt=W-Mt*it+1;bt<F&&(bt=F,W=Math.min(U,bt+Mt*it-1)),n(13,R=bt),n(14,T=W)}}else if(V==="resize-l"){const ft=Math.max(1,Math.floor((yt-ut(Math.min(pt,yt-it+1))+1)/it)),dt=M(ft);let at=yt-dt*it+1;at=Math.max(F,Math.min(at,yt-it+1)),n(13,R=at),n(14,T=yt)}else if(V==="resize-r"){const ft=Math.max(1,Math.floor((ut(pt)+it-1-K+1)/it)),dt=M(ft);let at=K+dt*it-1;at=Math.min(U,Math.max(at,K+it-1)),n(13,R=K),n(14,T=at)}else if(V==="move"){const ft=Math.round((ut(pt)-ut(Z))/it),dt=yt-K+1;let at=K+ft*it;at=Math.max(F,Math.min(U-dt+1,at)),n(13,R=at),n(14,T=at+dt-1)}lt(),ot()}),window.addEventListener("mouseup",()=>{z&&(z=!1,V=null,Z=null,document.body.style.userSelect="",S.style.cursor="crosshair")})}pe(()=>{L=h.getContext("2d"),Y(),ot();const S=Math.max(0,Math.ceil((R-p[0])/i.stepMs)),z=Math.min(k.length-1,Math.floor((T-p[0])/i.stepMs));d("ready",{start:R,end:T,startIdx:S,endIdx:z,days:A()}),lt(),X();const V=()=>ot(),Z=K=>{const yt=K.target&&K.target.tagName?K.target.tagName.toLowerCase():"";if(!(yt==="input"||yt==="textarea"||yt==="select"||K.defaultPrevented)){if(/^[1-6]$/.test(K.key)){const ut={1:1,2:3,3:7,4:14,5:30,6:90}[K.key];nt(ut),K.preventDefault();return}if(K.key==="ArrowLeft"||K.key==="ArrowRight"){K.shiftKey?At(K.key==="ArrowLeft"?-1:1):st(K.key==="ArrowLeft"?-1:1),K.preventDefault();return}}};return window.addEventListener("resize",V),window.addEventListener("keydown",Z),()=>window.removeEventListener("resize",V)});function P(S){ye[S?"unshift":"push"](()=>{h=S,n(1,h)})}const $=()=>{n(0,l=!l)};function mt(S){ye[S?"unshift":"push"](()=>{m=S,n(2,m)})}const b=()=>nt(1),B=()=>nt(3),tt=()=>nt(7),G=()=>nt(14),D=()=>nt(30),J=()=>nt(90);return t.$$set=S=>{"data"in S&&n(6,i=S.data),"initialRange"in S&&n(7,r=S.initialRange),"externalRange"in S&&n(8,o=S.externalRange),"preset"in S&&n(9,s=S.preset),"showMonthLabels"in S&&n(10,f=S.showMonthLabels),"showData"in S&&n(11,a=S.showData),"showCanvas"in S&&n(0,l=S.showCanvas)},t.$$.update=()=>{if(t.$$.dirty[0]&24832&&o&&typeof o.start=="number"&&typeof o.end=="number"){const S=o.start,z=o.end;(S!==R||z!==T)&&(n(13,R=S),n(14,T=z),lt(),ot())}t.$$.dirty[0]&24576&&n(4,Q=xt(R,T)),t.$$.dirty[0]&4608&&k&&s&&(I(),ot())},n(3,w=M(A())),[l,h,m,w,Q,nt,i,r,o,s,f,a,k,R,T,P,$,mt,b,B,tt,G,D,J]}class lh extends re{constructor(e){super(),ie(this,e,oh,rh,ne,{data:6,initialRange:7,externalRange:8,preset:9,showMonthLabels:10,showData:11,showCanvas:0},null,[-1,-1])}}function ah(t){let e,n,i,r,o,s,f,a,l,d,h,m,g,v,p,k,E,C,y,_,F,U;return{c(){e=q("div"),n=q("div"),i=q("div"),r=q("b"),r.textContent="Average Glucose",o=q("div"),o.textContent=`Goal: ${t[4]()?`Target ${t[5]().low.toFixed(1)}${t[5]().high.toFixed(1)} mmol/L`:`Target ${Math.round(t[5]().low)}${Math.round(t[5]().high)} mg/dL`}`,s=q("div"),f=H(t[0]),a=et(),l=q("div"),d=q("div"),d.innerHTML='<b>Glucose Management Indicator (GMI)</b><div class="muted svelte-1bp5ihd">Goal: &lt;7%</div>',h=q("div"),m=H(t[1]),g=et(),v=q("div"),p=q("div"),p.innerHTML='<b>Glucose Variability (CV)</b><div class="muted svelte-1bp5ihd">Goal: 36%</div>',k=q("div"),E=H(t[2]),C=et(),y=q("div"),_=H("Time CGM Active: "),F=H(t[3]),U=H("%"),u(o,"class","muted svelte-1bp5ihd"),u(i,"class","svelte-1bp5ihd"),u(s,"class","svelte-1bp5ihd"),u(n,"class","metric svelte-1bp5ihd"),u(d,"class","svelte-1bp5ihd"),u(h,"class","svelte-1bp5ihd"),u(l,"class","metric svelte-1bp5ihd"),u(p,"class","svelte-1bp5ihd"),u(k,"class","svelte-1bp5ihd"),u(v,"class","metric svelte-1bp5ihd"),u(y,"class","muted svelte-1bp5ihd"),j(y,"font-size","11px"),j(y,"margin-top","6px"),j(y,"margin-left","8px"),u(e,"class","summary"),j(e,"padding","0 10px")},m(R,T){Lt(R,e,T),c(e,n),c(n,i),c(i,r),c(i,o),c(n,s),c(s,f),c(e,a),c(e,l),c(l,d),c(l,h),c(h,m),c(e,g),c(e,v),c(v,p),c(v,k),c(k,E),c(e,C),c(e,y),c(y,_),c(y,F),c(y,U)},p(R,[T]){T&1&&kt(f,R[0]),T&2&&kt(m,R[1]),T&4&&kt(E,R[2]),T&8&&kt(F,R[3])},i:ht,o:ht,d(R){R&&Et(e)}}}function sh(t,e,n){let{data:i}=e,{range:r=null}=e,{preset:o="N"}=e,s="",f="",a="",l="",d,h;const m=()=>/mmol/i.test((i==null?void 0:i.units)||"mmol"),g=k=>m()?k*18:k;function v(){return m()?o==="T"?{vlow:3,low:3.9,high:7.8,vhigh:13.9}:o==="P"?{vlow:3,low:3.5,high:7.8,vhigh:13.9}:{vlow:3,low:3.9,high:10,vhigh:13.9}:o==="T"?{vlow:54,low:70,high:140,vhigh:250}:o==="P"?{vlow:54,low:63,high:140,vhigh:250}:{vlow:54,low:70,high:180,vhigh:250}}function p(){if(!i)return;const k=new Date(i.t0).getTime();n(9,d=Float64Array.from({length:i.glucose.length},(E,C)=>k+C*i.stepMs)),n(10,h=Float64Array.from(i.glucose))}return pe(()=>{p()}),t.$$set=k=>{"data"in k&&n(6,i=k.data),"range"in k&&n(7,r=k.range),"preset"in k&&n(8,o=k.preset)},t.$$.update=()=>{if(t.$$.dirty&64&&i&&p(),t.$$.dirty&1728&&i&&r&&d&&h){const{start:k,end:E}=r,C=Math.max(0,Math.ceil((k-d[0])/i.stepMs)),y=Math.min(h.length-1,Math.floor((E-d[0])/i.stepMs));try{typeof window<"u"&&window.CGM_DEBUG&&console.log("[CgmSummary] update",{startISO:new Date(k).toISOString(),endISO:new Date(E).toISOString(),stepMs:i.stepMs,i0:C,i1:y,len:h.length})}catch{}if(y<C)n(0,s=""),n(1,f=""),n(2,a=""),n(3,l="");else{const _=[];for(let L=C;L<=y;L++){const ot=h[L];Number.isFinite(ot)&&ot>=0&&_.push(ot)}const F=Math.max(1,y-C+1),R=100*_.length/F;n(3,l=`${R.toFixed(1)}%`);const T=Ql(_),M=Vl(_)??0,A=Math.sqrt(M),w=Number.isFinite(T)?3.31+.02392*g(T):NaN,N=Number.isFinite(T)&&T!==0?A/T*100:NaN;n(0,s=Number.isFinite(T)?m()?`${T.toFixed(1)} mmol/L`:`${Math.round(T)} mg/dL`:""),n(1,f=Number.isFinite(w)?`${w.toFixed(1)}%`:""),n(2,a=Number.isFinite(N)?`${N.toFixed(1)}%`:"");const x=Sn("%b %e, %Y"),I=new Date(k),Y=new Date(E);`${x(I)}${x(Y)}`,Date.UTC(I.getUTCFullYear(),I.getUTCMonth(),I.getUTCDate()),Date.UTC(Y.getUTCFullYear(),Y.getUTCMonth(),Y.getUTCDate())}}},[s,f,a,l,m,v,i,r,o,d,h]}class uh extends re{constructor(e){super(),ie(this,e,sh,ah,ne,{data:6,range:7,preset:8})}}function fh(t){let e;return{c(){e=H("General 70180 mg/dL")},m(n,i){Lt(n,e,i)},p:ht,d(n){n&&Et(e)}}}function ch(t){let e;return{c(){e=H("Pregnancy 63140 mg/dL")},m(n,i){Lt(n,e,i)},p:ht,d(n){n&&Et(e)}}}function hh(t){let e;return{c(){e=H("Tight 70140 mg/dL")},m(n,i){Lt(n,e,i)},p:ht,d(n){n&&Et(e)}}}function gh(t){let e;function n(o,s){return o[1]==="T"?vh:o[1]==="P"?mh:dh}let i=n(t),r=i(t);return{c(){r.c(),e=Ue()},m(o,s){r.m(o,s),Lt(o,e,s)},p(o,s){i!==(i=n(o))&&(r.d(1),r=i(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&Et(e),r.d(o)}}}function dh(t){let e;return{c(){e=H("General 3.910.0 mmol/L")},m(n,i){Lt(n,e,i)},d(n){n&&Et(e)}}}function mh(t){let e;return{c(){e=H("Pregnancy 3.57.8 mmol/L")},m(n,i){Lt(n,e,i)},d(n){n&&Et(e)}}}function vh(t){let e;return{c(){e=H("Tight 3.97.8 mmol/L")},m(n,i){Lt(n,e,i)},d(n){n&&Et(e)}}}function wh(t){let e,n,i,r,o,s,f,a,l,d,h,m,g,v,p,k=t[2].targ.toFixed(1)+"",E,C,y,_,F,U,R;function T(w,N){var x;return N&1&&(R=null),R==null&&(R=!!/mmol/i.test(((x=w[0])==null?void 0:x.units)||"mmol")),R?gh:w[1]==="T"?hh:w[1]==="P"?ch:fh}let M=T(t,-1),A=M(t);return{c(){e=q("div"),n=q("div"),i=q("div"),r=et(),o=q("div"),s=et(),f=q("div"),a=et(),l=q("div"),d=et(),h=q("div"),m=et(),g=q("div"),v=q("div"),p=q("span"),E=H(k),C=H("%"),y=H(" in range "),_=q("span"),_.textContent=" Goal >= 70%",F=et(),U=q("div"),A.c(),u(i,"class","seg vlow svelte-536eaw"),j(i,"width",t[2].vlow+"%"),u(i,"title","Very low"),u(o,"class","seg low svelte-536eaw"),j(o,"width",t[2].low+"%"),u(o,"title","Low"),u(f,"class","seg targ svelte-536eaw"),j(f,"width",t[2].targ+"%"),u(f,"title","Target"),u(l,"class","seg high svelte-536eaw"),j(l,"width",t[2].high+"%"),u(l,"title","High"),u(h,"class","seg vhigh svelte-536eaw"),j(h,"width",t[2].vhigh+"%"),u(h,"title","Very high"),u(n,"class","bar svelte-536eaw"),u(p,"class","strong svelte-536eaw"),u(_,"class","muted svelte-536eaw"),u(v,"class","left svelte-536eaw"),u(U,"class","right svelte-536eaw"),u(g,"class","legend svelte-536eaw"),u(e,"class","tirbar svelte-536eaw")},m(w,N){Lt(w,e,N),c(e,n),c(n,i),c(n,r),c(n,o),c(n,s),c(n,f),c(n,a),c(n,l),c(n,d),c(n,h),c(e,m),c(e,g),c(g,v),c(v,p),c(p,E),c(p,C),c(v,y),c(v,_),c(g,F),c(g,U),A.m(U,null)},p(w,[N]){N&4&&j(i,"width",w[2].vlow+"%"),N&4&&j(o,"width",w[2].low+"%"),N&4&&j(f,"width",w[2].targ+"%"),N&4&&j(l,"width",w[2].high+"%"),N&4&&j(h,"width",w[2].vhigh+"%"),N&4&&k!==(k=w[2].targ.toFixed(1)+"")&&kt(E,k),M===(M=T(w,N))&&A?A.p(w,N):(A.d(1),A=M(w),A&&(A.c(),A.m(U,null)))},i:ht,o:ht,d(w){w&&Et(e),A.d()}}}function ph(t,e,n){let{data:i}=e,{range:r=null}=e,{preset:o="N"}=e,s,f;const a=()=>/mmol/i.test((i==null?void 0:i.units)||"mmol"),l=()=>a()?o==="T"?{vlow:3,low:3.9,high:7.8,vhigh:13.9}:o==="P"?{vlow:3,low:3.5,high:7.8,vhigh:13.9}:{vlow:3,low:3.9,high:10,vhigh:13.9}:o==="T"?{vlow:54,low:70,high:140,vhigh:250}:o==="P"?{vlow:54,low:63,high:140,vhigh:250}:{vlow:54,low:70,high:180,vhigh:250};let d={vlow:0,low:0,targ:0,high:0,vhigh:0};function h(){if(!i)return;const m=new Date(i.t0).getTime();n(4,s=Float64Array.from({length:i.glucose.length},(g,v)=>m+v*i.stepMs)),n(5,f=Float64Array.from(i.glucose))}return pe(()=>{h()}),t.$$set=m=>{"data"in m&&n(0,i=m.data),"range"in m&&n(3,r=m.range),"preset"in m&&n(1,o=m.preset)},t.$$.update=()=>{if(t.$$.dirty&1&&i&&h(),t.$$.dirty&59&&i&&r&&s&&f&&o){const{start:m,end:g}=r,v=Math.max(0,Math.ceil((m-s[0])/i.stepMs)),p=Math.min(f.length-1,Math.floor((g-s[0])/i.stepMs));if(p<v)n(2,d={vlow:0,low:0,targ:0,high:0,vhigh:0});else{const k=l();let E={vlow:0,low:0,targ:0,high:0,vhigh:0},C=0;for(let y=v;y<=p;y++){const _=f[y];Number.isFinite(_)&&_>=0&&(C++,_<k.vlow?E.vlow++:_<k.low?E.low++:_<=k.high?E.targ++:_<=k.vhigh?E.high++:E.vhigh++)}C===0?n(2,d={vlow:0,low:0,targ:0,high:0,vhigh:0}):n(2,d={vlow:E.vlow/C*100,low:E.low/C*100,targ:E.targ/C*100,high:E.high/C*100,vhigh:E.vhigh/C*100})}}},[i,o,d,r,s,f]}class yh extends re{constructor(e){super(),ie(this,e,ph,wh,ne,{data:0,range:3,preset:1})}}function _h(t){let e;return{c(){e=O("svg"),j(e,"width","100%"),j(e,"height","260px"),j(e,"display","block")},m(n,i){Lt(n,e,i),t[6](e)},p:ht,i:ht,o:ht,d(n){n&&Et(e),t[6](null)}}}function Rn(t,e){if(!t.length)return NaN;const n=(t.length-1)*e,i=Math.floor(n),r=n-i;return t[i]+(t[Math.min(t.length-1,i+1)]-t[i])*(r||0)}function xh(t,e,n){let{data:i}=e,{range:r=null}=e,{preset:o="N"}=e,s,f=900,a=260;const l={l:50,r:60,t:20,b:26},d=24*60*60*1e3,h=()=>/mmol/i.test((i==null?void 0:i.units)||"mmol"),m=()=>h()?o==="T"?{vlow:3,low:3.9,high:7.8,vhigh:13.9}:o==="P"?{vlow:3,low:3.5,high:7.8,vhigh:13.9}:{vlow:3,low:3.9,high:10,vhigh:13.9}:o==="T"?{vlow:54,low:70,high:140,vhigh:250}:o==="P"?{vlow:54,low:63,high:140,vhigh:250}:{vlow:54,low:70,high:180,vhigh:250};let g,v;function p(){const y=new Date(i.t0).getTime();n(4,g=Float64Array.from({length:i.glucose.length},(_,F)=>y+F*i.stepMs)),n(5,v=Float64Array.from(i.glucose))}function k(y,_){const F=Math.max(1,Math.round(d/i.stepMs)),U=Array.from({length:F},()=>[]),R=new Set;for(let M=y;M<=_;M++){const A=v[M];if(!(Number.isFinite(A)&&A>=0))continue;const w=g[M],N=new Date(w),x=new Date(N.getFullYear(),N.getMonth(),N.getDate()).getTime();R.add(x);let I=Math.round((w-x)/i.stepMs);I<0?I=0:I>=F&&(I=F-1),U[I].push(A)}return{series:U.map((M,A)=>{const w=Float64Array.from(M).sort();return{t:A,p05:Rn(w,.05),p25:Rn(w,.25),p50:Rn(w,.5),p75:Rn(w,.75),p95:Rn(w,.95)}}),samplesPerDay:F}}function E(){if(!s||!i||!r||!g||!v)return;const y=s.getBoundingClientRect();f=Math.max(360,y.width||900),a=Math.max(220,y.height||260);const _=_e(s);_.selectAll("*").remove();const F=Math.max(0,Math.ceil((r.start-g[0])/i.stepMs)),U=Math.min(v.length-1,Math.floor((r.end-g[0])/i.stepMs));if(U<F)return;const{series:R,samplesPerDay:T}=k(F,U);if(!R.flatMap(b=>[b.p05,b.p95]).filter(Number.isFinite).length){_.append("text").attr("x",l.l).attr("y",a/2).text("Not enough data in selection to compute AGP");return}const A=ln().domain([0,T-1]).range([l.l,f-l.r]),w=m(),N=h()?20:360,x=ln().domain([w.vlow,N]).range([a-l.b,l.t]),I=de().defined(b=>Number.isFinite(b.p05)&&Number.isFinite(b.p95)&&b.p05<w.low).x(b=>A(b.t)).y0(b=>x(Math.min(b.p95,w.low))).y1(b=>x(b.p05)),Y=de().defined(b=>Number.isFinite(b.p05)&&Number.isFinite(b.p95)&&b.p95>w.low&&b.p05<w.high).x(b=>A(b.t)).y0(b=>x(Math.min(b.p95,w.high))).y1(b=>x(Math.max(b.p05,w.low))),L=de().defined(b=>Number.isFinite(b.p05)&&Number.isFinite(b.p95)&&b.p95>w.high&&b.p05<w.vhigh).x(b=>A(b.t)).y0(b=>x(Math.min(b.p95,w.vhigh))).y1(b=>x(Math.max(b.p05,w.high))),ot=de().defined(b=>Number.isFinite(b.p05)&&Number.isFinite(b.p95)&&b.p95>w.vhigh&&b.p05<w.vhigh).x(b=>A(b.t)).y0(b=>x(b.p95)).y1(b=>x(w.vhigh)),xt=de().defined(b=>Number.isFinite(b.p05)&&Number.isFinite(b.p95)&&b.p05>w.vhigh).x(b=>A(b.t)).y0(b=>x(b.p95)).y1(b=>x(b.p05));_.append("rect").attr("x",l.l).attr("width",f-l.r-l.l).attr("y",x(w.high)).attr("height",x(w.low)-x(w.high)).attr("fill","#1a9850").attr("opacity",.1),_.append("path").attr("d",I(R)).attr("fill","#d73027").attr("opacity",.18),_.append("path").attr("d",Y(R)).attr("fill","#1a9850").attr("opacity",.12),_.append("path").attr("d",L(R)).attr("fill","#fdae61").attr("opacity",.18),_.append("path").attr("d",ot(R)).attr("fill","#f46d43").attr("opacity",.26),_.append("path").attr("d",xt(R)).attr("fill","#f46d43").attr("opacity",.26);const Q=de().defined(b=>Number.isFinite(b.p25)&&Number.isFinite(b.p75)&&b.p75>w.low&&b.p25<w.high).x(b=>A(b.t)).y0(b=>x(Math.min(Math.max(b.p25,w.low),w.high))).y1(b=>x(Math.max(Math.min(b.p75,w.high),w.low))),lt=de().defined(b=>Number.isFinite(b.p25)&&Number.isFinite(b.p75)&&b.p75>w.high&&b.p25<w.vhigh).x(b=>A(b.t)).y0(b=>x(Math.min(b.p75,w.vhigh))).y1(b=>x(Math.max(b.p25,w.high))),nt=de().defined(b=>Number.isFinite(b.p25)&&Number.isFinite(b.p75)&&b.p75>w.vhigh&&b.p25<w.vhigh).x(b=>A(b.t)).y0(b=>x(b.p75)).y1(b=>x(w.vhigh)),st=de().defined(b=>Number.isFinite(b.p25)&&Number.isFinite(b.p75)&&b.p25<w.low).x(b=>A(b.t)).y0(b=>x(b.p25)).y1(b=>x(Math.min(b.p75,w.low)));_.append("path").attr("d",st(R)).attr("fill","#d73027").attr("opacity",.35),_.append("path").attr("d",Q(R)).attr("fill","#1a9850").attr("opacity",.25),_.append("path").attr("d",lt(R)).attr("fill","#fdae61").attr("opacity",.35),_.append("path").attr("d",nt(R)).attr("fill","#f46d43").attr("opacity",.45);try{let G=function(z,V,Z){return z<Z&&V>=Z||z>Z&&V<=Z},D=function(z,V,Z,K,yt){return{t:z+(yt-V)*(Z-z)/(K-V),p50:yt}};const b=z=>z<w.low?"#d73027":z>w.vhigh?"#f46d43":z>w.high?"#fdae61":"#1a9850",B=Fn().x(z=>A(z.t)).y(z=>x(z.p50)),tt=(z,V,Z,K)=>{!Number.isFinite(Z.p50)||!Number.isFinite(K.p50)||((!z.length||z[z.length-1].color!==V)&&z.push({color:V,arr:[Z]}),z[z.length-1].arr.push(K))};let J=[],S=null;for(let z=0;z<R.length;z++){const V=R[z];if(!Number.isFinite(V.p50)){S=null;continue}if(!S){S=V;continue}const Z=S.t,K=S.p50,yt=V.t,Tt=V.p50;let ut=[{t:Z,p50:K}],vt=K,Ct=Z;const wt=[w.low,w.high,w.vhigh];(Tt>K?wt:wt.slice().reverse()).forEach(pt=>{if(G(vt,Tt,pt)){const it=D(Ct,vt,yt,Tt,pt);ut.push(it),vt=it.p50,Ct=it.t}}),ut.push({t:yt,p50:Tt});for(let pt=1;pt<ut.length;pt++){const it=ut[pt-1],ft=ut[pt],dt=(it.p50+ft.p50)/2+(ft.p50===it.p50?ft.t>it.t?1e-6:-1e-6:0),at=b(dt);tt(J,at,it,ft)}S=V}J.forEach(z=>{z.arr.length>=2&&_.append("path").attr("d",B(z.arr)).attr("stroke",z.color).attr("fill","none").attr("stroke-width",2)})}catch{}_.append("line").attr("x1",l.l).attr("x2",f-l.r).attr("y1",x(w.high)).attr("y2",x(w.high)).attr("stroke","#6ea77b").attr("stroke-width",1),_.append("line").attr("x1",l.l).attr("x2",f-l.r).attr("y1",x(w.low)).attr("y2",x(w.low)).attr("stroke","#6ea77b").attr("stroke-width",1),_.append("line").attr("x1",l.l).attr("x2",f-l.r).attr("y1",x(w.vlow)).attr("y2",x(w.vlow)).attr("stroke","#cccccc").attr("stroke-width",1),_.append("line").attr("x1",l.l).attr("x2",f-l.r).attr("y1",x(w.vhigh)).attr("y2",x(w.vhigh)).attr("stroke","#cccccc").attr("stroke-width",1);const At=60*60*1e3/i.stepMs,X=Ti(0,24,3).map(b=>Math.round(b*At)),P=b=>b===0||b===24?"12am":b<12?`${b}am`:b===12?"12pm":`${b-12}pm`;_.append("g").attr("transform",`translate(0,${a-l.b})`).call(ea(A).tickValues(X).tickFormat(b=>P(Math.round(b/At))).tickSizeOuter(0));const $=[m().vlow,m().low,m().high,m().vhigh,h()?20:360].filter(b=>b>=w.vlow&&b<=N),mt=h()?b=>Math.round(b*10)/10:b=>Math.round(b);_.append("g").attr("transform",`translate(${l.l},0)`).call(na(x).tickValues($).tickFormat(mt)).call(b=>b.select(".domain").remove());try{const b=G=>{for(let D=R.length-1;D>=0;D--){const J=R[D][G];if(Number.isFinite(J))return{t:R[D].t,v:J}}return null},tt=(G,D)=>{if(!D)return;const J=Math.min(f-l.r-2,A(D.t)+41),S=x(D.v);_e(s).append("text").attr("x",J+5).attr("y",S).attr("dy","0.35em").attr("text-anchor","start").attr("fill","#000").attr("font-size",11).attr("font-weight",G===50?700:400).text(`${G}%`)};tt(5,b("p05")),tt(25,b("p25")),tt(50,b("p50")),tt(75,b("p75")),tt(95,b("p95"))}catch{}try{let J=function(S){const z=x(S),V=_e(s).append("text").attr("x",-9999).attr("y",-9999).attr("fill","#fff").attr("font-size",11).attr("font-weight",700).text(D(S)),Z=V.node().getBBox();V.remove();const K=Math.ceil(Z.width),yt=l.l-8-(K+6*2),Tt=z-16/2;_e(s).append("rect").attr("x",yt).attr("y",Tt).attr("rx",5).attr("ry",5).attr("width",K+6*2).attr("height",16).attr("fill",G),_e(s).append("text").attr("x",yt+6).attr("y",z).attr("dy","0.35em").attr("fill","#fff").attr("font-size",11).attr("font-weight",700).text(D(S))};const G="#1a9850",D=S=>{if(h()){const z=(Math.round(S*10)/10).toFixed(1);return z.endsWith(".0")?z.slice(0,-2):z}return Math.round(S).toString()};J(w.low),J(w.high)}catch{}}pe(()=>{p(),E(),window.addEventListener("resize",E)});function C(y){ye[y?"unshift":"push"](()=>{s=y,n(0,s)})}return t.$$set=y=>{"data"in y&&n(1,i=y.data),"range"in y&&n(2,r=y.range),"preset"in y&&n(3,o=y.preset)},t.$$.update=()=>{t.$$.dirty&62&&i&&r&&g&&v&&o&&E()},[s,i,r,o,g,v,C]}class bh extends re{constructor(e){super(),ie(this,e,xh,_h,ne,{data:1,range:2,preset:3})}}function Mh(t){let e,n,i,r,o,s,f,a,l,d,h,m,g,v,p=Te(t[0].vlow)+"",k,E,C,y,_=Te(t[0].low)+"",F,U,R,T,M,A=Te(t[0].targ)+"",w,N,x,I,Y=Te(t[0].high)+"",L,ot,xt,Q,lt=Te(t[0].vhigh)+"",nt,st,At,X;return{c(){e=q("div"),n=q("div"),i=q("div"),r=et(),o=q("div"),s=et(),f=q("div"),a=et(),l=q("div"),d=et(),h=q("div"),m=et(),g=q("div"),v=q("div"),k=H(p),E=H(" Very Low"),C=et(),y=q("div"),F=H(_),U=H(" Low"),R=et(),T=q("div"),M=q("span"),w=H(A),N=H(" In Range"),x=et(),I=q("div"),L=H(Y),ot=H(" High"),xt=et(),Q=q("div"),nt=H(lt),st=H(" Very High"),At=et(),X=q("div"),X.textContent=`${t[1]()} Range Used: ${t[2]()}`,u(i,"class","seg vlow svelte-10886f1"),j(i,"flex-basis",t[0].vlow+"%"),u(o,"class","seg low svelte-10886f1"),j(o,"flex-basis",t[0].low+"%"),u(f,"class","seg targ svelte-10886f1"),j(f,"flex-basis",t[0].targ+"%"),u(l,"class","seg high svelte-10886f1"),j(l,"flex-basis",t[0].high+"%"),u(h,"class","seg vhigh svelte-10886f1"),j(h,"flex-basis",t[0].vhigh+"%"),u(n,"class","stack svelte-10886f1"),u(v,"class","row small svelte-10886f1"),u(y,"class","row small svelte-10886f1"),u(M,"class","strong svelte-10886f1"),u(T,"class","row big svelte-10886f1"),u(I,"class","row small svelte-10886f1"),u(Q,"class","row small svelte-10886f1"),u(X,"class","note svelte-10886f1"),u(g,"class","labels svelte-10886f1"),u(e,"class","tir-card svelte-10886f1")},m(P,$){Lt(P,e,$),c(e,n),c(n,i),c(n,r),c(n,o),c(n,s),c(n,f),c(n,a),c(n,l),c(n,d),c(n,h),c(e,m),c(e,g),c(g,v),c(v,k),c(v,E),c(g,C),c(g,y),c(y,F),c(y,U),c(g,R),c(g,T),c(T,M),c(M,w),c(T,N),c(g,x),c(g,I),c(I,L),c(I,ot),c(g,xt),c(g,Q),c(Q,nt),c(Q,st),c(g,At),c(g,X)},p(P,[$]){$&1&&j(i,"flex-basis",P[0].vlow+"%"),$&1&&j(o,"flex-basis",P[0].low+"%"),$&1&&j(f,"flex-basis",P[0].targ+"%"),$&1&&j(l,"flex-basis",P[0].high+"%"),$&1&&j(h,"flex-basis",P[0].vhigh+"%"),$&1&&p!==(p=Te(P[0].vlow)+"")&&kt(k,p),$&1&&_!==(_=Te(P[0].low)+"")&&kt(F,_),$&1&&A!==(A=Te(P[0].targ)+"")&&kt(w,A),$&1&&Y!==(Y=Te(P[0].high)+"")&&kt(L,Y),$&1&&lt!==(lt=Te(P[0].vhigh)+"")&&kt(nt,lt)},i:ht,o:ht,d(P){P&&Et(e)}}}function Te(t){return!Number.isFinite(t)||t<=0?"0 %":t<1?"<1 %":`${Math.round(t)} %`}function Th(t,e,n){const i=Je();let{data:r}=e,{range:o=null}=e,{preset:s="N"}=e,f,a;const l=()=>/mmol/i.test((r==null?void 0:r.units)||"mmol"),d=()=>l()?s==="T"?{vlow:3,low:3.9,high:7.8,vhigh:13.9}:s==="P"?{vlow:3,low:3.5,high:7.8,vhigh:13.9}:{vlow:3,low:3.9,high:10,vhigh:13.9}:s==="T"?{vlow:54,low:70,high:140,vhigh:250}:s==="P"?{vlow:54,low:63,high:140,vhigh:250}:{vlow:54,low:70,high:180,vhigh:250};let h={vlow:0,low:0,targ:0,high:0,vhigh:0},m=0,g=0;function v(){if(!r)return;const C=new Date(r.t0).getTime();n(6,f=Float64Array.from({length:r.glucose.length},(y,_)=>C+_*r.stepMs)),n(7,a=Float64Array.from(r.glucose))}function p(){try{i("stats",{pct:h,present:m,expected:g,preset:s,units:(r==null?void 0:r.units)||"mmol/L"})}catch{}}function k(){return s==="T"?"Tight":s==="P"?"Pregnancy":"General"}function E(){const C=d();if(l()){const y=_=>{const F=(Math.round(_*10)/10).toFixed(1);return F.endsWith(".0")?F.slice(0,-2):F};return`${y(C.low)}${y(C.high)} mmol/L`}return`${Math.round(C.low)}${Math.round(C.high)} mg/dL`}return t.$$set=C=>{"data"in C&&n(3,r=C.data),"range"in C&&n(4,o=C.range),"preset"in C&&n(5,s=C.preset)},t.$$.update=()=>{if(t.$$.dirty&8&&r&&v(),t.$$.dirty&248&&r&&o&&f&&a&&s){const{start:C,end:y}=o,_=Math.max(0,Math.ceil((C-f[0])/r.stepMs)),F=Math.min(a.length-1,Math.floor((y-f[0])/r.stepMs));if(F<_)n(0,h={vlow:0,low:0,targ:0,high:0,vhigh:0}),m=0,g=0;else{const U=d();let R={vlow:0,low:0,targ:0,high:0,vhigh:0},T=0;for(let M=_;M<=F;M++){const A=a[M];Number.isFinite(A)&&A>=0&&(T++,A<U.vlow?R.vlow++:A<U.low?R.low++:A<=U.high?R.targ++:A<=U.vhigh?R.high++:R.vhigh++)}m=T,g=Math.max(1,F-_+1),T===0?n(0,h={vlow:0,low:0,targ:0,high:0,vhigh:0}):n(0,h={vlow:R.vlow/T*100,low:R.low/T*100,targ:R.targ/T*100,high:R.high/T*100,vhigh:R.vhigh/T*100})}p()}},[h,k,E,r,o,s,f,a]}class Ch extends re{constructor(e){super(),ie(this,e,Th,Mh,ne,{data:3,range:4,preset:5})}}function kh(t){let e,n,i,r,o,s,f,a,l,d,h,m,g,v,p,k,E,C,y,_,F,U,R,T,M,A,w,N=t[2](t[0].vhigh)+"",x,I,Y,L,ot,xt=t[2](t[0].high)+"",Q,lt,nt,st,At,X,P=t[3]()+"",$,mt,b,B,tt,G,D,J,S=t[2](t[0].targ)+"",z,V,Z,K,yt,Tt,ut,vt,Ct,wt,_t=t[2](t[0].low)+"",rt,pt,it,ft,dt,at=t[2](t[0].vlow)+"",Mt,W,bt,ct,Rt,Pt,Wt=t[4]()+"",Vt,It,Zt,ve,Ut;return{c(){e=q("div"),n=q("div"),i=q("div"),r=q("div"),o=et(),s=q("div"),f=et(),a=q("div"),l=et(),d=q("div"),h=et(),m=q("div"),g=et(),v=q("div"),p=q("div"),k=q("span"),k.textContent=`${t[5](t[1]().high)}`,E=et(),C=q("div"),y=q("span"),y.textContent=`${t[5](t[1]().vhigh)}`,_=et(),F=q("div"),U=q("div"),R=q("div"),R.textContent="Goal: <5%",T=et(),M=q("div"),A=q("div"),A.textContent="Very High",w=q("div"),x=H(N),I=et(),Y=q("div"),L=q("div"),L.textContent="High",ot=q("div"),Q=H(xt),lt=et(),nt=q("div"),st=q("div"),At=et(),X=q("div"),$=H(P),mt=H("% "),b=q("span"),b.textContent="Goal: <25%",B=et(),tt=q("div"),G=q("div"),D=q("div"),D.textContent="Target",J=q("div"),z=H(S),V=et(),Z=q("div"),Z.textContent="Goal: 70%",K=et(),yt=q("div"),yt.textContent="Each 5% increase is clinically beneficial",Tt=et(),ut=q("div"),vt=q("div"),Ct=q("div"),Ct.textContent="Low",wt=q("div"),rt=H(_t),pt=et(),it=q("div"),ft=q("div"),ft.textContent="Very Low",dt=q("div"),Mt=H(at),W=et(),bt=q("div"),ct=q("div"),Rt=et(),Pt=q("div"),Vt=H(Wt),It=H("% "),Zt=q("span"),Zt.textContent="Goal: <4%",ve=et(),Ut=q("div"),Ut.textContent="Each 1% time in range = about 15 minutes",u(r,"class","seg vhigh svelte-5qe12v"),j(r,"flex-basis",t[0].vhigh+"%"),u(s,"class","seg high svelte-5qe12v"),j(s,"flex-basis",t[0].high+"%"),u(a,"class","seg targ svelte-5qe12v"),j(a,"flex-basis",t[0].targ+"%"),u(d,"class","seg low svelte-5qe12v"),j(d,"flex-basis",t[0].low+"%"),u(m,"class","seg vlow svelte-5qe12v"),j(m,"flex-basis",t[0].vlow+"%"),u(i,"class","stack svelte-5qe12v"),u(k,"class","svelte-5qe12v"),u(p,"class","tick svelte-5qe12v"),j(p,"top","18%"),u(y,"class","svelte-5qe12v"),u(C,"class","tick svelte-5qe12v"),j(C,"top","6%"),u(v,"class","ticks svelte-5qe12v"),u(n,"class","barcol svelte-5qe12v"),u(R,"class","goal svelte-5qe12v"),u(A,"class","label svelte-5qe12v"),u(w,"class","val svelte-5qe12v"),u(M,"class","row svelte-5qe12v"),u(L,"class","label svelte-5qe12v"),u(ot,"class","val svelte-5qe12v"),u(Y,"class","row svelte-5qe12v"),u(st,"class","brace svelte-5qe12v"),u(b,"class","goaltext svelte-5qe12v"),u(X,"class","sum svelte-5qe12v"),u(nt,"class","bracket svelte-5qe12v"),u(U,"class","group top svelte-5qe12v"),u(D,"class","label svelte-5qe12v"),u(J,"class","val svelte-5qe12v"),u(G,"class","row emph svelte-5qe12v"),u(Z,"class","goal inline svelte-5qe12v"),u(yt,"class","note svelte-5qe12v"),u(tt,"class","group mid svelte-5qe12v"),u(Ct,"class","label svelte-5qe12v"),u(wt,"class","val svelte-5qe12v"),u(vt,"class","row svelte-5qe12v"),u(ft,"class","label svelte-5qe12v"),u(dt,"class","val svelte-5qe12v"),u(it,"class","row svelte-5qe12v"),u(ct,"class","brace svelte-5qe12v"),u(Zt,"class","goaltext svelte-5qe12v"),u(Pt,"class","sum svelte-5qe12v"),u(bt,"class","bracket small svelte-5qe12v"),u(ut,"class","group low svelte-5qe12v"),u(Ut,"class","foot svelte-5qe12v"),u(F,"class","rightcol svelte-5qe12v"),u(e,"class","agp-card svelte-5qe12v")},m(Nt,St){Lt(Nt,e,St),c(e,n),c(n,i),c(i,r),c(i,o),c(i,s),c(i,f),c(i,a),c(i,l),c(i,d),c(i,h),c(i,m),c(n,g),c(n,v),c(v,p),c(p,k),c(v,E),c(v,C),c(C,y),c(e,_),c(e,F),c(F,U),c(U,R),c(U,T),c(U,M),c(M,A),c(M,w),c(w,x),c(U,I),c(U,Y),c(Y,L),c(Y,ot),c(ot,Q),c(U,lt),c(U,nt),c(nt,st),c(nt,At),c(nt,X),c(X,$),c(X,mt),c(X,b),c(F,B),c(F,tt),c(tt,G),c(G,D),c(G,J),c(J,z),c(tt,V),c(tt,Z),c(tt,K),c(tt,yt),c(F,Tt),c(F,ut),c(ut,vt),c(vt,Ct),c(vt,wt),c(wt,rt),c(ut,pt),c(ut,it),c(it,ft),c(it,dt),c(dt,Mt),c(ut,W),c(ut,bt),c(bt,ct),c(bt,Rt),c(bt,Pt),c(Pt,Vt),c(Pt,It),c(Pt,Zt),c(F,ve),c(F,Ut)},p(Nt,[St]){St&1&&j(r,"flex-basis",Nt[0].vhigh+"%"),St&1&&j(s,"flex-basis",Nt[0].high+"%"),St&1&&j(a,"flex-basis",Nt[0].targ+"%"),St&1&&j(d,"flex-basis",Nt[0].low+"%"),St&1&&j(m,"flex-basis",Nt[0].vlow+"%"),St&1&&N!==(N=Nt[2](Nt[0].vhigh)+"")&&kt(x,N),St&1&&xt!==(xt=Nt[2](Nt[0].high)+"")&&kt(Q,xt),St&1&&S!==(S=Nt[2](Nt[0].targ)+"")&&kt(z,S),St&1&&_t!==(_t=Nt[2](Nt[0].low)+"")&&kt(rt,_t),St&1&&at!==(at=Nt[2](Nt[0].vlow)+"")&&kt(Mt,at)},i:ht,o:ht,d(Nt){Nt&&Et(e)}}}function Ah(t,e,n){const i=Je();let{data:r}=e,{range:o=null}=e,{preset:s="N"}=e,f,a;const l=()=>/mmol/i.test((r==null?void 0:r.units)||"mmol"),d=()=>l()?s==="T"?{vlow:3,low:3.9,high:7.8,vhigh:13.9}:s==="P"?{vlow:3,low:3.5,high:7.8,vhigh:13.9}:{vlow:3,low:3.9,high:10,vhigh:13.9}:s==="T"?{vlow:54,low:70,high:140,vhigh:250}:s==="P"?{vlow:54,low:63,high:140,vhigh:250}:{vlow:54,low:70,high:180,vhigh:250};let h={vlow:0,low:0,targ:0,high:0,vhigh:0},m=0;function g(){if(!r)return;const y=new Date(r.t0).getTime();n(9,f=Float64Array.from({length:r.glucose.length},(_,F)=>y+F*r.stepMs)),n(10,a=Float64Array.from(r.glucose))}function v(){try{i("stats",{pct:h,present:m,preset:s,units:(r==null?void 0:r.units)||"mmol/L"})}catch{}}const p=y=>`${Math.round(y)}%`,k=()=>Math.round(h.high+h.vhigh),E=()=>Math.round(h.low+h.vlow),C=y=>l()?(Math.round(y*10)/10).toString():Math.round(y).toString();return t.$$set=y=>{"data"in y&&n(6,r=y.data),"range"in y&&n(7,o=y.range),"preset"in y&&n(8,s=y.preset)},t.$$.update=()=>{if(t.$$.dirty&64&&r&&g(),t.$$.dirty&1984&&r&&o&&f&&a&&s){const{start:y,end:_}=o,F=Math.max(0,Math.ceil((y-f[0])/r.stepMs)),U=Math.min(a.length-1,Math.floor((_-f[0])/r.stepMs));if(U<F)n(0,h={vlow:0,low:0,targ:0,high:0,vhigh:0}),m=0;else{const R=d();let T={vlow:0,low:0,targ:0,high:0,vhigh:0},M=0;for(let A=F;A<=U;A++){const w=a[A];Number.isFinite(w)&&w>=0&&(M++,w<R.vlow?T.vlow++:w<R.low?T.low++:w<=R.high?T.targ++:w<=R.vhigh?T.high++:T.vhigh++)}m=M,M===0?n(0,h={vlow:0,low:0,targ:0,high:0,vhigh:0}):n(0,h={vlow:T.vlow/M*100,low:T.low/M*100,targ:T.targ/M*100,high:T.high/M*100,vhigh:T.vhigh/M*100})}v()}},[h,d,p,k,E,C,r,o,s,f,a]}class Dh extends re{constructor(e){super(),ie(this,e,Ah,kh,ne,{data:6,range:7,preset:8})}}function Nh(t){let e;return{c(){e=q("canvas"),j(e,"width","100%"),j(e,"height","auto"),j(e,"display","block")},m(n,i){Lt(n,e,i),t[6](e)},p:ht,i:ht,o:ht,d(n){n&&Et(e),t[6](null)}}}function Ln(t){return`${Math.round(t)}%`}function Sh(t,e,n){const i=Je();let{data:r}=e,{range:o=null}=e,{preset:s="N"}=e,f,a,l,d;const h=()=>/mmol/i.test((r==null?void 0:r.units)||"mmol"),m=()=>h()?s==="T"?{vlow:3,low:3.9,high:7.8,vhigh:13.9}:s==="P"?{vlow:3,low:3.5,high:7.8,vhigh:13.9}:{vlow:3,low:3.9,high:10,vhigh:13.9}:s==="T"?{vlow:54,low:70,high:140,vhigh:250}:s==="P"?{vlow:54,low:63,high:140,vhigh:250}:{vlow:54,low:70,high:180,vhigh:250},g={vlow:"#8a2f2f",low:"#d65b5b",targ:"#169b58",high:"#f1aa3b",vhigh:"#e47c2f"},v={tick:11,goal:11,label:16,targetLabel:18,note:11,percentXL:30,percentL:24};let p={vlow:0,low:0,targ:0,high:0,vhigh:0},k=0;function E(){if(!r)return;const M=new Date(r.t0).getTime();n(4,l=Float64Array.from({length:r.glucose.length},(A,w)=>M+w*r.stepMs)),n(5,d=Float64Array.from(r.glucose))}function C(){try{i("stats",{pct:p,present:k,preset:s,units:(r==null?void 0:r.units)||"mmol/L"})}catch{}}function y(M){return h()?(Math.round(M*10)/10).toString():Math.round(M).toString()}function _(M,A,w,N,x){a.beginPath(),a.moveTo(M+x,A),a.lineTo(M+w-x,A),a.arcTo(M+w,A,M+w,A+x,x),a.lineTo(M+w,A+N-x),a.arcTo(M+w,A+N,M+w-x,A+N,x),a.lineTo(M+x,A+N),a.arcTo(M,A+N,M,A+N-x,x),a.lineTo(M,A+x),a.arcTo(M,A,M+x,A,x)}function F(M,A,w,N,x){a.beginPath(),a.moveTo(M,w),a.lineTo(A-x,w),a.arcTo(A,w,A,w+x,x),a.lineTo(A,N-x),a.arcTo(A,N,A-x,N,x),a.lineTo(M,N)}function U(){if(!f)return;const M=Math.max(1,window.devicePixelRatio||1),A=Math.max(600,f.getBoundingClientRect().width||820),w=320;n(0,f.style.width=A+"px",f),n(0,f.style.height=w+"px",f),n(0,f.width=Math.floor(A*M),f),n(0,f.height=Math.floor(w*M),f),a.setTransform(M,0,0,M,0,0),a.clearRect(0,0,A,w),a.fillStyle="#fff",a.strokeStyle="#e5e7eb",a.lineWidth=1,_(8,8,A-16,w-16,12),a.fill(),a.stroke();const N=56,x=70,I=240,Y=36,L=72,ot=72,xt=80,Q=8,lt=8;let nt=Y;a.strokeStyle="#d6d9df",a.lineWidth=1,a.strokeRect(N,Y,x,I);const st=(_t,rt)=>{rt<=0||(a.fillStyle=_t,a.fillRect(N,nt,x,rt),nt+=rt)};st(g.vhigh,L),st(g.high,ot),st(g.targ,xt),st(g.low,Q),st(g.vlow,lt),a.fillStyle="#4b515a",a.font=`700 ${v.tick}px system-ui`,a.textAlign="right",a.textBaseline="middle";const At=Y+L,X=Y+L+ot;a.fillText(y(m().vhigh),N-10,At),a.fillText(y(m().high),N-10,X),a.textAlign="left",a.fillText(y(m().vhigh),N+x+10,At),a.fillText(y(m().high),N+x+10,X);const P=N+x+32;a.fillStyle="#8c939e",a.font=`600 ${v.goal}px system-ui`,a.textAlign="left",a.fillText("Goal: <5%",P,Y-8),a.fillStyle="#333",a.font=`800 ${v.label}px system-ui`,a.textAlign="left",a.textBaseline="alphabetic";const $=Y+16,mt=Y+48;a.fillText("Very High",P,$),a.textAlign="right",a.fillText(Ln(p.vhigh),P+148,$),a.textAlign="left",a.fillText("High",P,mt),a.textAlign="right",a.fillText(Ln(p.high),P+148,mt);const b=$-12,B=mt+10,tt=P+160,G=tt+240;a.strokeStyle="#b9bfc7",a.lineWidth=2,F(tt,G,b,B,14),a.stroke();const D=10,J=P-12,S=b;a.beginPath(),a.moveTo(J+D,S),a.arcTo(J,S,J,S+D,D),a.stroke(),a.font=`800 ${v.percentXL}px system-ui`,a.fillStyle="#333",a.textAlign="left",a.fillText(`${Math.round(p.vhigh+p.high)}%`,tt+24,(b+B)/2+10),a.textAlign="right",a.font=`600 ${v.goal}px system-ui`,a.fillStyle="#8c939e",a.fillText("Goal: <25%",G-10,(b+B)/2+10);const z=G,V=Y+118,Z=V+26,K=Z+6;a.fillStyle="#333",a.font=`800 ${v.targetLabel}px system-ui`,a.textAlign="left",a.fillText("Target",P,Z),a.textAlign="right",a.fillText(Ln(p.targ),P+148,Z),a.fillStyle="#8c939e",a.font=`600 ${v.goal}px system-ui`,a.textAlign="left",a.fillText("Goal: 70%",z-84,Z-2),a.strokeStyle="#9aa1ab",a.lineWidth=2,a.beginPath(),a.moveTo(P,K),a.lineTo(z,K),a.stroke(),a.textAlign="center",a.font=`${v.note}px system-ui`,a.fillText("Each 5% increase is clinically beneficial",(P+z)/2,K+16);const yt=V+86,Tt=yt+28;a.fillStyle="#333",a.font=`800 ${v.label}px system-ui`,a.textAlign="left",a.fillText("Low",P,yt),a.textAlign="right",a.fillText(Ln(p.low),P+148,yt),a.textAlign="left",a.fillText("Very Low",P,Tt),a.textAlign="right",a.fillText(Ln(p.vlow),P+148,Tt);const ut=P-12,vt=yt+6,Ct=Tt+8,wt=z;a.strokeStyle="#b9bfc7",a.lineWidth=2,a.beginPath(),a.moveTo(ut+12,vt),a.arcTo(ut,vt,ut,vt+12,12),a.lineTo(ut,Ct-12),a.arcTo(ut,Ct,ut+12,Ct,12),a.lineTo(wt,Ct),a.stroke(),a.textAlign="left",a.font=`800 ${v.percentL}px system-ui`,a.fillStyle="#333",a.fillText(`${Math.round(p.low+p.vlow)}%`,ut+80,Ct+8),a.textAlign="left",a.font=`600 ${v.goal}px system-ui`,a.fillStyle="#8c939e",a.fillText("Goal: <4%",ut+160,Ct-2),a.textAlign="right",a.fillStyle="#8c939e",a.font=`${v.note}px system-ui`,a.fillText("Each 1% time in range = about 15 minutes",A-24,Y+I+28)}function R(){U()}pe(()=>(a=f.getContext("2d"),U(),window.addEventListener("resize",R),()=>window.removeEventListener("resize",R)));function T(M){ye[M?"unshift":"push"](()=>{f=M,n(0,f)})}return t.$$set=M=>{"data"in M&&n(1,r=M.data),"range"in M&&n(2,o=M.range),"preset"in M&&n(3,s=M.preset)},t.$$.update=()=>{if(t.$$.dirty&2&&r&&E(),t.$$.dirty&62&&r&&o&&l&&d&&s){const{start:M,end:A}=o,w=Math.max(0,Math.ceil((M-l[0])/r.stepMs)),N=Math.min(d.length-1,Math.floor((A-l[0])/r.stepMs));if(N<w)p={vlow:0,low:0,targ:0,high:0,vhigh:0},k=0;else{const x=m();let I={vlow:0,low:0,targ:0,high:0,vhigh:0},Y=0;for(let L=w;L<=N;L++){const ot=d[L];Number.isFinite(ot)&&ot>=0&&(Y++,ot<x.vlow?I.vlow++:ot<x.low?I.low++:ot<=x.high?I.targ++:ot<=x.vhigh?I.high++:I.vhigh++)}k=Y,Y===0?p={vlow:0,low:0,targ:0,high:0,vhigh:0}:p={vlow:I.vlow/Y*100,low:I.low/Y*100,targ:I.targ/Y*100,high:I.high/Y*100,vhigh:I.vhigh/Y*100}}U(),C()}},[f,r,o,s,l,d,T]}class Fh extends re{constructor(e){super(),ie(this,e,Sh,Nh,ne,{data:1,range:2,preset:3})}}function Eh(t){let e;return{c(){e=q("canvas"),j(e,"width","100%"),j(e,"display","block")},m(n,i){Lt(n,e,i),t[4](e)},p:ht,i:ht,o:ht,d(n){n&&Et(e),t[4](null)}}}function Rh(t,e,n){const i=Je();let{data:r}=e,{range:o=null}=e,{preset:s="N"}=e,f,a,l,d;const h=()=>/mmol/i.test((r==null?void 0:r.units)||"mmol"),m=()=>h()?s==="T"?{vlow:3,low:3.9,high:7.8,vhigh:13.9}:s==="P"?{vlow:3,low:3.5,high:7.8,vhigh:13.9}:{vlow:3,low:3.9,high:10,vhigh:13.9}:s==="T"?{vlow:54,low:70,high:140,vhigh:250}:s==="P"?{vlow:54,low:63,high:140,vhigh:250}:{vlow:54,low:70,high:180,vhigh:250},g={vlow:"#8a2f2f",low:"#d65b5b",targ:"#169b58",high:"#f1aa3b",vhigh:"#e47c2f"};function v(){const T=new Date(r.t0).getTime();l=Float64Array.from({length:r.glucose.length},(M,A)=>T+A*r.stepMs),d=Float64Array.from(r.glucose)}let p={vlow:0,vhigh:0};function k(){if(!o||!l)return;const{start:T,end:M}=o,A=Math.max(0,Math.ceil((T-l[0])/r.stepMs)),w=Math.min(d.length-1,Math.floor((M-l[0])/r.stepMs));let N={vlow:0,vhigh:0},x=0;const I=m();for(let Y=A;Y<=w;Y++){const L=d[Y];Number.isFinite(L)&&L>=0&&(x++,L<I.vlow?N.vlow++:L>I.vhigh&&N.vhigh++)}x>0?(p.vlow=N.vlow/x*100,p.vhigh=N.vhigh/x*100):(p.vlow=0,p.vhigh=0),i("stats",{pct:p,preset:s,units:(r==null?void 0:r.units)||"mmol/L"})}const E={goal:14,label:28,tick:16};function C(T,M,A,w){a.beginPath(),a.moveTo(T+w,M),a.arcTo(T,M,T,M+w,w),a.lineTo(T,M+w),a.lineTo(T+A,M+w),a.stroke()}function y(T,M,A,w){a.beginPath(),a.moveTo(T+w,M),a.arcTo(T,M,T,M-w,w),a.lineTo(T,M-w),a.lineTo(T+A,M-w),a.stroke()}function _(T){return h()?(Math.round(T*10)/10).toString():Math.round(T).toString()}function F(){if(!f)return;const T=Math.max(1,window.devicePixelRatio||1),M=Math.max(480,f.getBoundingClientRect().width||600),A=680;n(0,f.style.width=M+"px",f),n(0,f.style.height=A+"px",f),n(0,f.width=Math.floor(M*T),f),n(0,f.height=Math.floor(A*T),f),a.setTransform(T,0,0,T,0,0),a.clearRect(0,0,M,A),a.fillStyle="#fff",a.fillRect(0,0,M,A);const w=80,N=90,x=120,I=440,Y=m(),L=140,ot=140,xt=140,Q=10,lt=10;let nt=x;a.fillStyle=g.vhigh,a.fillRect(w,nt,N,L),nt+=L,a.fillStyle="#e9e9e9",a.fillRect(w,nt,N,2),a.fillStyle=g.high,a.fillRect(w,nt,N,ot),nt+=ot,a.fillStyle="#e9e9e9",a.fillRect(w,nt,N,2),a.fillStyle=g.targ,a.fillRect(w,nt,N,xt),nt+=xt,a.fillStyle="rgba(255,255,255,0.35)",a.fillRect(w+6,nt-6,N-12,2),a.fillStyle=g.low,a.fillRect(w,nt,N,Q),nt+=Q,a.fillStyle=g.vlow,a.fillRect(w,nt,N,lt),a.fillStyle="#2f3741",a.font=`700 ${E.tick}px system-ui`,a.textAlign="right",a.textBaseline="middle";const st=x+L,At=x+L+ot;a.fillText(_(Y.vhigh),w-10,st),a.fillText(_(Y.high),w-10,At),a.textAlign="left",a.fillText(_(Y.vhigh),w+N+10,st),a.fillText(_(Y.high),w+N+10,At);const X=w+N+20,P=x-32;a.strokeStyle="#000",a.lineWidth=4,C(w-22,P,70,14),a.fillStyle="#8c939e",a.font=`600 ${E.goal}px system-ui`,a.textAlign="center",a.fillText("Goal: <5%",X+120,P-8),a.fillStyle="#111",a.font=`800 ${E.label}px system-ui`,a.textAlign="left",a.fillText("Very High",X,x-2),a.textAlign="right",a.fillText(`${Math.round(p.vhigh)}%`,X+260,x-2);const $=x+I+24;a.strokeStyle="#000",a.lineWidth=4,y(w-22,$,70,14),a.fillStyle="#111",a.font=`800 ${E.label}px system-ui`,a.textAlign="left",a.fillText("Very Low",X,$+10),a.textAlign="right",a.fillText(`${Math.round(p.vlow)}%`,X+260,$+10),a.fillStyle="#8c939e",a.font=`600 ${E.goal}px system-ui`,a.textAlign="center",a.fillText("Goal: <1%",X+120,$+46)}function U(){F()}pe(()=>(a=f.getContext("2d"),F(),window.addEventListener("resize",U),()=>window.removeEventListener("resize",U)));function R(T){ye[T?"unshift":"push"](()=>{f=T,n(0,f)})}return t.$$set=T=>{"data"in T&&n(1,r=T.data),"range"in T&&n(2,o=T.range),"preset"in T&&n(3,s=T.preset)},t.$$.update=()=>{t.$$.dirty&2&&r&&v()},k(),F(),[f,r,o,s,R]}class Lh extends re{constructor(e){super(),ie(this,e,Rh,Eh,ne,{data:1,range:2,preset:3})}}function Uh(t){let e;return{c(){e=O("svg"),j(e,"width","100%"),j(e,"display","block")},m(n,i){Lt(n,e,i),t[4](e)},p:ht,i:ht,o:ht,d(n){n&&Et(e),t[4](null)}}}function Hh(t,e,n){let{data:i}=e,{range:r=null}=e,{preset:o="N"}=e,s;const f=()=>/mmol/i.test((i==null?void 0:i.units)||"mmol");function a(){return f()?o==="T"?{vlow:3,low:3.9,high:7.8}:o==="P"?{vlow:3,low:3.5,high:7.8}:{vlow:3,low:3.9,high:10}:o==="T"?{vlow:54,low:70,high:140}:o==="P"?{vlow:54,low:63,high:140}:{vlow:54,low:70,high:180}}let l,d;function h(){if(!i)return;const v=new Date(i.t0).getTime();l=Float64Array.from({length:i.glucose.length},(p,k)=>v+k*i.stepMs),d=Float64Array.from(i.glucose)}function m(){if(!s||!i||!r||!l||!d)return;const v=_e(s);v.selectAll("*").remove();const p=s.getBoundingClientRect(),k=Math.max(360,p.width||1100),E=7,C=0,y={l:50,r:20,t:30,b:10},_=Math.max(140,Math.floor((k-y.l-y.r-(E-1)*C)/E)),F=86,U=18,R=r.start,T=r.end,M=ge.floor(new Date(R)).getTime(),A=ge.floor(new Date(T)).getTime(),w=new Date(M),N=new Date(A),x=(w.getDay()+6)%7,I=7-(N.getDay()+6)%7-1,Y=ge.offset(new Date(M),-x).getTime(),L=ge.offset(new Date(A),I).getTime(),ot=ge.range(new Date(Y),ge.offset(new Date(L),1)).map(P=>P.getTime()),xt=ot.length,Q=Math.ceil(xt/E),lt=y.t+Q*F+(Q-1)*C+y.b;s.setAttribute("height",lt);const nt=new Map(ot.map(P=>[P,[]]));for(let P=0;P<d.length;P++){const $=d[P];if(!(Number.isFinite($)&&$>=0))continue;const mt=l[P],b=ge.offset(new Date(L),1).getTime();if(mt<Y||mt>=b)continue;const B=ge.floor(new Date(mt)).getTime();nt.has(B)&&nt.get(B).push({t:mt-B,v:$,a:mt})}const st=a(),At=60*60*1e3/i.stepMs;["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].forEach((P,$)=>{Q>0&&_e(s).append("text").attr("x",y.l+$*(_+C)+_/2).attr("y",16).attr("text-anchor","middle").attr("fill","#555").attr("font-size",10).text(P)});for(let P=1;P<=E-1;P++){const $=y.l+P*(_+C);for(let mt=0;mt<Q;mt++){const b=y.t+mt*(F+C);_e(s).append("line").attr("x1",$).attr("x2",$).attr("y1",b+4).attr("y2",b+F-4).attr("stroke","#e6e6e6").attr("stroke-width",1)}}ot.forEach((P,$)=>{const mt=Math.floor($/E),b=$%E,B=y.l+b*(_+C),tt=y.t+mt*(F+C),G=v.append("g").attr("transform",`translate(${B},${tt})`),D=ln().domain([0,24*At-1]).range([0,_]),J=ln().domain(f()?[0,20]:[0,360]).range([F-U,0]);G.append("rect").attr("x",0).attr("y",J(st.high)).attr("width",_).attr("height",Math.max(1,J(st.low)-J(st.high))).attr("fill","#efefef"),G.append("line").attr("x1",0).attr("x2",_).attr("y1",J(st.high)).attr("y2",J(st.high)).attr("stroke","#2e7d32").attr("opacity",.7),G.append("line").attr("x1",0).attr("x2",_).attr("y1",J(st.low)).attr("y2",J(st.low)).attr("stroke","#2e7d32").attr("opacity",.7);const S=(nt.get(P)||[]).slice().sort((W,bt)=>W.t-bt.t),z=2*i.stepMs,V=[];let Z=[];for(const W of S){if(!Number.isFinite(W.v)){Z.length&&(V.push(Z),Z=[]);continue}Z.length&&W.t-Z[Z.length-1].t>z?(V.push(Z),Z=[W]):Z.push(W)}Z.length&&V.push(Z);const K=W=>W.a>=R&&W.a<=T,yt=de().defined(W=>Number.isFinite(W.v)&&W.v>st.high&&K(W)).x(W=>D(W.t/i.stepMs)).y0(W=>J(st.high)).y1(W=>J(W.v));V.forEach(W=>{W.length>1&&G.append("path").attr("d",yt(W)).attr("fill","#fdae61").attr("opacity",.35)});const Tt=de().defined(W=>Number.isFinite(W.v)&&W.v<st.low&&K(W)).x(W=>D(W.t/i.stepMs)).y0(W=>J(W.v)).y1(W=>J(st.low));V.forEach(W=>{W.length>1&&G.append("path").attr("d",Tt(W)).attr("fill","#d73027").attr("opacity",.25)}),Fn().x(W=>D(W.t/i.stepMs)).y(W=>J(W.v)).curve(nr);const ut=W=>Number.isFinite(W.v)&&K(W)&&W.v>=st.low&&W.v<=st.high,vt=W=>Number.isFinite(W.v)&&K(W)&&W.v<st.low,Ct=W=>Number.isFinite(W.v)&&K(W)&&W.v>st.high,wt=(W,bt)=>Fn().defined(W).x(ct=>D(ct.t/i.stepMs)).y(ct=>J(ct.v)).curve(nr),_t=wt(ut),rt=wt(vt),pt=wt(Ct);V.forEach(W=>{if(W.length>1){const bt=Fn().defined(ct=>Number.isFinite(ct.v)&&!K(ct)).x(ct=>D(ct.t/i.stepMs)).y(ct=>J(ct.v)).curve(nr);G.append("path").attr("d",bt(W)).attr("stroke","#c7c7c7").attr("fill","none").attr("stroke-width",1.2).attr("opacity",.8),G.append("path").attr("d",rt(W)).attr("stroke","#d73027").attr("fill","none").attr("stroke-width",1.5),G.append("path").attr("d",pt(W)).attr("stroke","#fdae61").attr("fill","none").attr("stroke-width",1.5),G.append("path").attr("d",_t(W)).attr("stroke","#1a9850").attr("fill","none").attr("stroke-width",1.5)}});const it=new Date(P),ft=it.getDate(),Mt=ft===1?`1 ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][it.getMonth()]}`:String(ft);G.append("text").attr("x",-12).attr("y",-8).attr("fill","#777").attr("font-size",10).attr("text-anchor","start").text(Mt),mt<Q-1&&G.append("text").attr("x",_/2).attr("y",F-2).attr("text-anchor","middle").attr("fill","#777").attr("font-size",10).text("12pm")})}pe(()=>{h(),m(),window.addEventListener("resize",m)});function g(v){ye[v?"unshift":"push"](()=>{s=v,n(0,s)})}return t.$$set=v=>{"data"in v&&n(1,i=v.data),"range"in v&&n(2,r=v.range),"preset"in v&&n(3,o=v.preset)},t.$$.update=()=>{t.$$.dirty&14&&i&&r&&o&&m()},[s,i,r,o,g]}class Ph extends re{constructor(e){super(),ie(this,e,Hh,Uh,ne,{data:1,range:2,preset:3})}}function zh(t){let e;return{c(){e=q("div"),j(e,"width","100%")},m(n,i){Lt(n,e,i),t[4](e)},p:ht,i:ht,o:ht,d(n){n&&Et(e),t[4](null)}}}function Yh(t){const e=Math.round(t/6e4),n=Math.floor(e/60),i=e%60;return`(${n}h${String(i).padStart(2,"0")}min)`}function qh(t,e,n){let{data:i}=e,{range:r=null}=e,{preset:o="N"}=e,s;const f={vlow:"#8a2f2f",low:"#d65b5b",targ:"#169b58",high:"#f1aa3b",vhigh:"#e47c2f"},a=()=>/mmol/i.test((i==null?void 0:i.units)||"mmol");function l(){return a()?o==="T"?{vlow:3,low:3.9,high:7.8,vhigh:13.9,unit:"mmol/L"}:o==="P"?{vlow:3,low:3.5,high:7.8,vhigh:13.9,unit:"mmol/L"}:{vlow:3,low:3.9,high:10,vhigh:13.9,unit:"mmol/L"}:o==="T"?{vlow:54,low:70,high:140,vhigh:250,unit:"mg/dL"}:o==="P"?{vlow:54,low:63,high:140,vhigh:250,unit:"mg/dL"}:{vlow:54,low:70,high:180,vhigh:250,unit:"mg/dL"}}let d,h;const m=()=>new Date(i.t0).getTime();function g(){return!h||!d?{i0:0,i1:h?h.length-1:0}:r?{i0:Math.max(0,Math.ceil((r.start-d[0])/i.stepMs)),i1:Math.min(h.length-1,Math.floor((r.end-d[0])/i.stepMs))}:{i0:0,i1:h.length-1}}const v=C=>(Math.round(C*10)/10).toFixed(1).replace(/\.0$/,"");function p(C,y){if(a()){const _=F=>v(F);return y==="vhigh"?`>${_(C.vhigh)} ${C.unit}`:y==="high"?`${_(C.high+.1)}${_(C.vhigh)} ${C.unit}`:y==="targ"?`${_(C.low)}${_(C.high)} ${C.unit}`:y==="low"?`${_(C.vlow)}${_(C.low-.1)} ${C.unit}`:`<${_(C.vlow)} ${C.unit}`}else{const _=F=>Math.round(F);return y==="vhigh"?`>${_(C.vhigh)} ${C.unit}`:y==="high"?`${_(C.high+1)}${_(C.vhigh)} ${C.unit}`:y==="targ"?`${_(C.low)}${_(C.high)} ${C.unit}`:y==="low"?`${_(C.vlow)}${_(C.low-1)} ${C.unit}`:`<${_(C.vlow)} ${C.unit}`}}function k(){if(!s||!h)return;const{i0:C,i1:y}=g(),_=l();let F=0,U={vlow:0,low:0,targ:0,high:0,vhigh:0};for(let Q=C;Q<=y;Q++){const lt=h[Q];Number.isFinite(lt)&&lt>=0&&(F++,lt<_.vlow?U.vlow++:lt<_.low?U.low++:lt<=_.high?U.targ++:lt<=_.vhigh?U.high++:U.vhigh++)}const R=Q=>F?Math.round(1e3*U[Q]/F)/10:0,T=Q=>U[Q]*i.stepMs,M=Math.max(700,s.getBoundingClientRect().width||700),A=360,w={l:78,r:50,t:20},N=_e(s).selectAll("svg").data([0]).join("svg").attr("width",M).attr("height",A);N.selectAll("*").remove();const x={x:w.l+20,w:56,top:w.t+18},I={vhigh:72,high:72,targ:140,low:20,vlow:20};let Y=x.top;["vhigh","high","targ","low","vlow"].forEach(Q=>{N.append("rect").attr("x",x.x).attr("y",Y).attr("width",x.w).attr("height",I[Q]).attr("fill",f[Q]),Y+=I[Q]});const L=(Q,lt)=>N.append("text").attr("x",x.x-10).attr("y",lt).attr("text-anchor","end").attr("dominant-baseline","middle").attr("font-weight",700).attr("fill","#222").text(Q);L(a()?v(_.vhigh):String(Math.round(_.vhigh)),x.top+I.vhigh),L(a()?v(_.high):String(Math.round(_.high)),x.top+I.vhigh+I.high),L(_.unit,x.top+I.vhigh+I.high+I.targ/2),L(a()?v(_.low):String(Math.round(_.low)),x.top+I.vhigh+I.high+I.targ),L(a()?v(_.vlow):String(Math.round(_.vlow)),x.top+I.vhigh+I.high+I.targ+I.low);const ot=[{k:"vhigh",label:"Very High"},{k:"high",label:"High"},{k:"targ",label:"Target"},{k:"low",label:"Low"},{k:"vlow",label:"Very Low"}],xt=Q=>w.t+30+Q*70;ot.forEach((Q,lt)=>{const nt=xt(lt);lt>0&&N.append("line").attr("x1",w.l+110).attr("x2",M-w.r).attr("y1",nt-24).attr("y2",nt-24).attr("stroke","#e1e4ea"),N.append("text").attr("x",w.l+120).attr("y",nt).attr("font-weight",800).attr("fill","#111").text(Q.label),N.append("text").attr("x",w.l+120+90).attr("y",nt).attr("fill","#888").text(p(_,Q.k)),N.append("text").attr("x",M-w.r-120).attr("y",nt).attr("text-anchor","end").attr("font-weight",800).attr("fill","#111").text(`${R(Q.k)}%`),N.append("text").attr("x",M-w.r-20).attr("y",nt).attr("fill","#888").text(Yh(T(Q.k)))})}pe(()=>k());function E(C){ye[C?"unshift":"push"](()=>{s=C,n(0,s)})}return t.$$set=C=>{"data"in C&&n(1,i=C.data),"range"in C&&n(2,r=C.range),"preset"in C&&n(3,o=C.preset)},t.$$.update=()=>{t.$$.dirty&2&&i&&(d=Float64Array.from({length:i.glucose.length},(C,y)=>m()+y*i.stepMs),h=Float64Array.from(i.glucose)),t.$$.dirty&14&&i&&(r||!0)&&o&&k()},[s,i,r,o,E]}class Ih extends re{constructor(e){super(),ie(this,e,qh,zh,ne,{data:1,range:2,preset:3})}}function Vh(t){let e,n,i,r=t[3](t[2]().vlow)+"",o,s,f=t[3](t[2]().low)+"",a,l,d=t[3](t[2]().high)+"",h,m,g=t[3](t[2]().vhigh)+"",v,p,k=t[2]().unit+"",E,C,y,_,F,U,R,T,M,A,w=t[3](t[2]().vhigh)+"",N,x=t[2]().unit+"",I,Y,L=t[0].vhigh.pct+"",ot,xt,Q,lt=t[0].vhigh.dur+"",nt,st,At,X,P=t[1]()?`${t[3](t[2]().high+.1)}-${t[3](t[2]().vhigh)} ${t[2]().unit}`:`${t[3](t[2]().high+1)}-${t[3](t[2]().vhigh)} ${t[2]().unit}`,$,mt,b=t[0].high.pct+"",B,tt,G,D=t[0].high.dur+"",J,S,z,V,Z=t[3](t[2]().low)+"",K,yt,Tt=t[3](t[2]().high)+"",ut,vt=t[2]().unit+"",Ct,wt,_t=t[0].targ.pct+"",rt,pt,it,ft=t[0].targ.dur+"",dt,at,Mt,W,bt=t[1]()?`${t[3](t[2]().vlow)}-${t[3](t[2]().low-.1)} ${t[2]().unit}`:`${t[3](t[2]().vlow)}-${t[3](t[2]().low-1)} ${t[2]().unit}`,ct,Rt,Pt=t[0].low.pct+"",Wt,Vt,It,Zt=t[0].low.dur+"",ve,Ut,Nt,St,fn,gi=t[3](t[2]().vlow)+"",zn,Se=t[2]().unit+"",Yn,Bt,Re=t[0].vlow.pct+"",cn,qn,le,we=t[0].vlow.dur+"",ae;return{c(){e=O("svg"),n=O("rect"),i=O("text"),o=H(r),s=O("text"),a=H(f),l=O("text"),h=H(d),m=O("text"),v=H(g),p=O("text"),E=H(k),C=O("rect"),y=O("rect"),_=O("rect"),F=O("rect"),U=O("rect"),R=O("text"),T=H("Very High"),M=O("text"),A=H(">"),N=H(w),I=H(x),Y=O("text"),ot=H(L),xt=H("%"),Q=O("text"),nt=H(lt),st=O("text"),At=H("High"),X=O("text"),$=H(P),mt=O("text"),B=H(b),tt=H("%"),G=O("text"),J=H(D),S=O("text"),z=H("Target"),V=O("text"),K=H(Z),yt=H("-"),ut=H(Tt),Ct=H(vt),wt=O("text"),rt=H(_t),pt=H("%"),it=O("text"),dt=H(ft),at=O("text"),Mt=H("Low"),W=O("text"),ct=H(bt),Rt=O("text"),Wt=H(Pt),Vt=H("%"),It=O("text"),ve=H(Zt),Ut=O("text"),Nt=H("Very Low"),St=O("text"),fn=H("<"),zn=H(gi),Yn=H(Se),Bt=O("text"),cn=H(Re),qn=H("%"),le=O("text"),ae=H(we),u(n,"x","15"),u(n,"y","40"),u(n,"width","50"),u(n,"height","210"),u(n,"fill","white"),u(n,"stroke","#ccc"),u(n,"stroke-width","1"),u(i,"x","10"),u(i,"y","250"),u(i,"font-size","10"),u(i,"fill","#666"),u(i,"text-anchor","end"),u(s,"x","10"),u(s,"y","220"),u(s,"font-size","10"),u(s,"fill","#666"),u(s,"text-anchor","end"),u(l,"x","10"),u(l,"y","165"),u(l,"font-size","10"),u(l,"fill","#666"),u(l,"text-anchor","end"),u(m,"x","10"),u(m,"y","85"),u(m,"font-size","10"),u(m,"fill","#666"),u(m,"text-anchor","end"),u(p,"x","8"),u(p,"y","155"),u(p,"font-size","10"),u(p,"fill","#666"),u(p,"text-anchor","middle"),u(p,"transform","rotate(-90, 8, 155)"),u(C,"x","15"),u(C,"y","40"),u(C,"width","50"),u(C,"height","25"),u(C,"fill","#ff6600"),u(y,"x","15"),u(y,"y","65"),u(y,"width","50"),u(y,"height","50"),u(y,"fill","#ff8c00"),u(_,"x","15"),u(_,"y","115"),u(_,"width","50"),u(_,"height","120"),u(_,"fill","#2d8f2d"),u(F,"x","15"),u(F,"y","235"),u(F,"width","50"),u(F,"height","12"),u(F,"fill","#990000"),u(U,"x","15"),u(U,"y","247"),u(U,"width","50"),u(U,"height","3"),u(U,"fill","#cc0000"),u(R,"x","80"),u(R,"y","48"),u(R,"font-size","11"),u(R,"font-weight","bold"),u(R,"fill","#333"),u(M,"x","80"),u(M,"y","60"),u(M,"font-size","9"),u(M,"fill","#666"),u(Y,"x","370"),u(Y,"y","48"),u(Y,"font-size","11"),u(Y,"font-weight","bold"),u(Y,"fill","#333"),u(Y,"text-anchor","end"),u(Q,"x","370"),u(Q,"y","60"),u(Q,"font-size","9"),u(Q,"fill","#666"),u(Q,"text-anchor","end"),u(st,"x","80"),u(st,"y","82"),u(st,"font-size","11"),u(st,"font-weight","bold"),u(st,"fill","#333"),u(X,"x","80"),u(X,"y","94"),u(X,"font-size","9"),u(X,"fill","#666"),u(mt,"x","370"),u(mt,"y","82"),u(mt,"font-size","11"),u(mt,"font-weight","bold"),u(mt,"fill","#333"),u(mt,"text-anchor","end"),u(G,"x","370"),u(G,"y","94"),u(G,"font-size","9"),u(G,"fill","#666"),u(G,"text-anchor","end"),u(S,"x","80"),u(S,"y","165"),u(S,"font-size","11"),u(S,"font-weight","bold"),u(S,"fill","#333"),u(V,"x","80"),u(V,"y","177"),u(V,"font-size","9"),u(V,"fill","#666"),u(wt,"x","370"),u(wt,"y","165"),u(wt,"font-size","11"),u(wt,"font-weight","bold"),u(wt,"fill","#333"),u(wt,"text-anchor","end"),u(it,"x","370"),u(it,"y","177"),u(it,"font-size","9"),u(it,"fill","#666"),u(it,"text-anchor","end"),u(at,"x","80"),u(at,"y","235"),u(at,"font-size","11"),u(at,"font-weight","bold"),u(at,"fill","#333"),u(W,"x","80"),u(W,"y","247"),u(W,"font-size","9"),u(W,"fill","#666"),u(Rt,"x","370"),u(Rt,"y","235"),u(Rt,"font-size","11"),u(Rt,"font-weight","bold"),u(Rt,"fill","#333"),u(Rt,"text-anchor","end"),u(It,"x","370"),u(It,"y","247"),u(It,"font-size","9"),u(It,"fill","#666"),u(It,"text-anchor","end"),u(Ut,"x","80"),u(Ut,"y","265"),u(Ut,"font-size","11"),u(Ut,"font-weight","bold"),u(Ut,"fill","#333"),u(St,"x","80"),u(St,"y","277"),u(St,"font-size","9"),u(St,"fill","#666"),u(Bt,"x","370"),u(Bt,"y","265"),u(Bt,"font-size","11"),u(Bt,"font-weight","bold"),u(Bt,"fill","#333"),u(Bt,"text-anchor","end"),u(le,"x","370"),u(le,"y","277"),u(le,"font-size","9"),u(le,"fill","#666"),u(le,"text-anchor","end"),u(e,"width","400"),u(e,"height","320"),u(e,"viewBox","0 0 400 320"),u(e,"xmlns","http://www.w3.org/2000/svg")},m(zt,Xt){Lt(zt,e,Xt),c(e,n),c(e,i),c(i,o),c(e,s),c(s,a),c(e,l),c(l,h),c(e,m),c(m,v),c(e,p),c(p,E),c(e,C),c(e,y),c(e,_),c(e,F),c(e,U),c(e,R),c(R,T),c(e,M),c(M,A),c(M,N),c(M,I),c(e,Y),c(Y,ot),c(Y,xt),c(e,Q),c(Q,nt),c(e,st),c(st,At),c(e,X),c(X,$),c(e,mt),c(mt,B),c(mt,tt),c(e,G),c(G,J),c(e,S),c(S,z),c(e,V),c(V,K),c(V,yt),c(V,ut),c(V,Ct),c(e,wt),c(wt,rt),c(wt,pt),c(e,it),c(it,dt),c(e,at),c(at,Mt),c(e,W),c(W,ct),c(e,Rt),c(Rt,Wt),c(Rt,Vt),c(e,It),c(It,ve),c(e,Ut),c(Ut,Nt),c(e,St),c(St,fn),c(St,zn),c(St,Yn),c(e,Bt),c(Bt,cn),c(Bt,qn),c(e,le),c(le,ae)},p(zt,[Xt]){Xt&1&&L!==(L=zt[0].vhigh.pct+"")&&kt(ot,L),Xt&1&&lt!==(lt=zt[0].vhigh.dur+"")&&kt(nt,lt),Xt&1&&b!==(b=zt[0].high.pct+"")&&kt(B,b),Xt&1&&D!==(D=zt[0].high.dur+"")&&kt(J,D),Xt&1&&_t!==(_t=zt[0].targ.pct+"")&&kt(rt,_t),Xt&1&&ft!==(ft=zt[0].targ.dur+"")&&kt(dt,ft),Xt&1&&Pt!==(Pt=zt[0].low.pct+"")&&kt(Wt,Pt),Xt&1&&Zt!==(Zt=zt[0].low.dur+"")&&kt(ve,Zt),Xt&1&&Re!==(Re=zt[0].vlow.pct+"")&&kt(cn,Re),Xt&1&&we!==(we=zt[0].vlow.dur+"")&&kt(ae,we)},i:ht,o:ht,d(zt){zt&&Et(e)}}}function Un(t,e){return e?Math.round(1e3*t/e)/10:0}function Hn(t){const e=Math.round(t/6e4),n=Math.floor(e/60),i=e%60;return`(${n}h${String(i).padStart(2,"0")}min)`}function Wh(t,e,n){let{data:i}=e,{range:r=null}=e,{preset:o="N"}=e;const s=()=>/mmol/i.test((i==null?void 0:i.units)||"mmol");function f(){return s()?o==="T"?{vlow:3,low:3.9,high:7.8,vhigh:13.9,unit:"mmol/L"}:o==="P"?{vlow:3,low:3.5,high:7.8,vhigh:13.9,unit:"mmol/L"}:{vlow:3,low:3.9,high:10,vhigh:13.9,unit:"mmol/L"}:o==="T"?{vlow:54,low:70,high:140,vhigh:250,unit:"mg/dL"}:o==="P"?{vlow:54,low:63,high:140,vhigh:250,unit:"mg/dL"}:{vlow:54,low:70,high:180,vhigh:250,unit:"mg/dL"}}let a,l;const d=()=>new Date(i.t0).getTime();function h(){if(!l)return{i0:0,i1:0};if(!r)return{i0:0,i1:l.length-1};const p=Math.max(0,Math.ceil((r.start-a[0])/i.stepMs)),k=Math.min(l.length-1,Math.floor((r.end-a[0])/i.stepMs));return{i0:p,i1:k}}const m=p=>s()?(Math.round(p*10)/10).toFixed(1).replace(/\.0$/,""):String(Math.round(p));let g={vhigh:{pct:0,dur:"(0min)"},high:{pct:0,dur:"(0min)"},targ:{pct:0,dur:"(0min)"},low:{pct:0,dur:"(0min)"},vlow:{pct:0,dur:"(0min)"}};function v(){if(!l)return;const p=f(),{i0:k,i1:E}=h();let C=0,y={vlow:0,low:0,targ:0,high:0,vhigh:0};for(let F=k;F<=E;F++){const U=l[F];Number.isFinite(U)&&U>=0&&(C++,U<p.vlow?y.vlow++:U<p.low?y.low++:U<=p.high?y.targ++:U<=p.vhigh?y.high++:y.vhigh++)}const _=i.stepMs;n(0,g={vhigh:{pct:Un(y.vhigh,C),dur:Hn(y.vhigh*_)},high:{pct:Un(y.high,C),dur:Hn(y.high*_)},targ:{pct:Un(y.targ,C),dur:Hn(y.targ*_)},low:{pct:Un(y.low,C),dur:Hn(y.low*_)},vlow:{pct:Un(y.vlow,C),dur:Hn(y.vlow*_)}})}return pe(v),t.$$set=p=>{"data"in p&&n(4,i=p.data),"range"in p&&n(5,r=p.range),"preset"in p&&n(6,o=p.preset)},t.$$.update=()=>{t.$$.dirty&16&&i&&(a=Float64Array.from({length:i.glucose.length},(p,k)=>d()+k*i.stepMs),l=Float64Array.from(i.glucose)),t.$$.dirty&112&&i&&(r||!0)&&o&&v()},[g,s,f,m,i,r,o]}class Bh extends re{constructor(e){super(),ie(this,e,Wh,Vh,ne,{data:4,range:5,preset:6})}}function Xh(t){let e;return{c(){e=q("div")},m(n,i){Lt(n,e,i),t[4](e)},p:ht,i:ht,o:ht,d(n){n&&Et(e),t[4](null)}}}function Pn(t,e){return e?Math.round(1e3*t/e)/10:0}function Gh(t,e,n){let{data:i}=e,{range:r=null}=e,{preset:o="N"}=e,s;const f=()=>/mmol/i.test((i==null?void 0:i.units)||"mmol");function a(){return f()?{vlow:3,low:3.9,high:o==="T"||o==="P"?7.8:10,vhigh:13.9}:o==="T"?{vlow:54,low:70,high:140,vhigh:250}:o==="P"?{vlow:54,low:63,high:140,vhigh:250}:{vlow:54,low:70,high:180,vhigh:250}}let l,d;const h=()=>new Date(i.t0).getTime();function m(){if(!d||!l)return{i0:0,i1:d?d.length-1:0};if(!r)return{i0:0,i1:d.length-1};const p=Math.max(0,Math.ceil((r.start-l[0])/i.stepMs)),k=Math.min(d.length-1,Math.floor((r.end-l[0])/i.stepMs));return{i0:p,i1:k}}function g(){if(!s||!d)return;const{i0:p,i1:k}=m(),E=a(),C=f()?7.8:140;let y=0,_=0,F=0,U=0,R=0,T=0;for(let X=p;X<=k;X++){const P=d[X];Number.isFinite(P)&&P>=0&&(y++,P<E.vlow?_++:P<E.low?F++:P<=E.high?U++:P<=E.vhigh?R++:T++,P>=E.low&&P<=C)}const M=[{name:"Very Low",pct:Pn(_,y),color:"#e57373",goal:"<1%"},{name:"Low",pct:Pn(F,y),color:"#ff9e80",goal:"<4%"},{name:"Target",pct:Pn(U,y),color:"#86c89d",goal:"70%"},{name:"High",pct:Pn(R,y),color:"#ffcc80",goal:"<25%"},{name:"Very High",pct:Pn(T,y),color:"#f46d43",goal:"<5%"}],A=300,w=Math.max(320,s.getBoundingClientRect().width||300),N={t:20,r:80,b:30,l:30},x=_e(s).selectAll("svg").data([0]).join("svg").attr("width",w).attr("height",A).style("overflow","visible");x.selectAll("*").remove();const I=ln().domain([0,100]).range([A-N.b,N.t]),Y=[];let L=null,ot=null,xt=0;M.forEach(X=>{const P=I(xt),$=I(xt+X.pct);x.append("rect").attr("x",N.l).attr("y",$).attr("width",60).attr("height",Math.max(0,P-$)).attr("fill",X.color),X.name=="High"||X.name=="Low"?Y.push({name:X.name,text:`${X.name} ${X.pct}%`,center:(P+$)/2,color:X.color}):Y.push({name:X.name,text:`${X.name} ${X.pct}% (goal ${X.goal})`,center:(P+$)/2,color:X.color}),X.name==="High"&&(L=P),X.name==="Very High"&&(ot=P),xt+=X.pct}),y===0&&x.append("rect").attr("x",N.l).attr("y",I(100)).attr("width",60).attr("height",I(0)-I(100)).attr("fill","#e6e6e6");const Q=14,lt=N.t+8,nt=A-N.b-8;Y.sort((X,P)=>X.center-P.center);for(let X=0;X<Y.length;X++){const P=Y[X-1];let $=Math.max(lt,Math.min(nt,Y[X].center));P&&$<P.y+Q&&($=P.y+Q),Y[X].y=$}for(let X=Y.length-2;X>=0;X--){const P=Y[X+1];Y[X].y>P.y-Q&&(Y[X].y=P.y-Q),Y[X].y<lt&&(Y[X].y=lt)}Y.forEach(X=>{x.append("line").attr("x1",N.l+60).attr("x2",N.l+66).attr("y1",X.y).attr("y2",X.y).attr("stroke",X.color).attr("opacity",.8),x.append("text").attr("x",N.l+70).attr("y",X.y).attr("dy","0.35em").attr("fill","#000").attr("font-size",11).text(X.text).attr("data-name",X.name)});try{const X=f(),P=E.high,$=E.vhigh,mt=N.l-6,b=B=>B.attr("text-anchor","end").attr("font-size",10).attr("font-weight",700).attr("fill","#000");L!==null&&x.append("text").attr("x",mt).attr("y",L).attr("dy","0.35em").call(b).text(P),ot!==null&&x.append("text").attr("x",mt).attr("y",ot).attr("dy","0.35em").call(b).text($)}catch{}const st="#000",At="#000";try{const X=Y.find(b=>b.name==="Very High"),P=Y.find(b=>b.name==="High");if(X&&P){const b=(X.y+P.y)/2,tt=`${Math.round((M[3].pct+M[4].pct)*10)/10}%  (goal ${M[1].goal})`,G=x.select('text[data-name="Very High"]').node(),D=x.select('text[data-name="High"]').node();let J=N.l+70;try{const S=G?parseFloat(G.getAttribute("x"))+G.getComputedTextLength():J,z=D?parseFloat(D.getAttribute("x"))+D.getComputedTextLength():J;J=Math.max(S,z)+12}catch{}x.append("line").attr("x1",J-6).attr("x2",J).attr("y1",b).attr("y2",b).attr("stroke",st).attr("opacity",.9),x.append("text").attr("x",J+4).attr("y",b).attr("dy","0.35em").attr("fill",st).attr("font-size",11).text(tt)}const $=Y.find(b=>b.name==="Very Low"),mt=Y.find(b=>b.name==="Low");if($&&mt){const b=($.y+mt.y)/2,tt=`${Math.round((M[0].pct+M[1].pct)*10)/10}% (goal ${M[3].goal})`;let G=N.l+70;try{const D=x.select('text[data-name="Low"]').node(),J=x.select('text[data-name="Very Low"]').node(),S=D?parseFloat(D.getAttribute("x"))+D.getComputedTextLength():G,z=J?parseFloat(J.getAttribute("x"))+J.getComputedTextLength():G;G=Math.max(S,z)+12}catch{}x.append("line").attr("x1",G-6).attr("x2",G).attr("y1",b).attr("y2",b).attr("stroke",At).attr("opacity",.9),x.append("text").attr("x",G+4).attr("y",b).attr("dy","0.35em").attr("fill",At).attr("font-size",11).text(tt)}}catch{}}pe(()=>{g()});function v(p){ye[p?"unshift":"push"](()=>{s=p,n(0,s)})}return t.$$set=p=>{"data"in p&&n(1,i=p.data),"range"in p&&n(2,r=p.range),"preset"in p&&n(3,o=p.preset)},t.$$.update=()=>{t.$$.dirty&2&&i&&(l=Float64Array.from({length:i.glucose.length},(p,k)=>h()+k*i.stepMs),d=Float64Array.from(i.glucose)),t.$$.dirty&14&&i&&(r||!0)&&o&&g()},[s,i,r,o,v]}class Zh extends re{constructor(e){super(),ie(this,e,Gh,Xh,ne,{data:1,range:2,preset:3})}}function Vo(t){let e,n,i;return{c(){e=O("line"),u(e,"x1","90"),u(e,"y1",n=30+t[1].high),u(e,"x2",ue),u(e,"y2",i=t[5].high-40),u(e,"stroke","#ccc"),u(e,"stroke-width","1")},m(r,o){Lt(r,e,o)},p(r,o){o&2&&n!==(n=30+r[1].high)&&u(e,"y1",n),o&32&&i!==(i=r[5].high-40)&&u(e,"y2",i)},d(r){r&&Et(e)}}}function Wo(t){let e,n,i;return{c(){e=O("line"),u(e,"x1","90"),u(e,"y1",n=30+t[1].targ),u(e,"x2",ue),u(e,"y2",i=t[5].targ-40),u(e,"stroke","#ccc"),u(e,"stroke-width","1")},m(r,o){Lt(r,e,o)},p(r,o){o&2&&n!==(n=30+r[1].targ)&&u(e,"y1",n),o&32&&i!==(i=r[5].targ-40)&&u(e,"y2",i)},d(r){r&&Et(e)}}}function Bo(t){let e,n,i;return{c(){e=O("line"),u(e,"x1","90"),u(e,"y1",n=30+t[1].low),u(e,"x2",ue),u(e,"y2",i=t[5].low-40),u(e,"stroke","#ccc"),u(e,"stroke-width","1")},m(r,o){Lt(r,e,o)},p(r,o){o&2&&n!==(n=30+r[1].low)&&u(e,"y1",n),o&32&&i!==(i=r[5].low-40)&&u(e,"y2",i)},d(r){r&&Et(e)}}}function Xo(t){let e,n,i;return{c(){e=O("rect"),u(e,"x","40"),u(e,"y",n=30+t[2].vlow),u(e,"width","50"),u(e,"height",i=t[3].vlow),u(e,"fill","#e57373")},m(r,o){Lt(r,e,o)},p(r,o){o&4&&n!==(n=30+r[2].vlow)&&u(e,"y",n),o&8&&i!==(i=r[3].vlow)&&u(e,"height",i)},d(r){r&&Et(e)}}}function Go(t){let e,n,i;return{c(){e=O("rect"),u(e,"x","40"),u(e,"y",n=30+t[2].low),u(e,"width","50"),u(e,"height",i=t[3].low),u(e,"fill","#ff9e80")},m(r,o){Lt(r,e,o)},p(r,o){o&4&&n!==(n=30+r[2].low)&&u(e,"y",n),o&8&&i!==(i=r[3].low)&&u(e,"height",i)},d(r){r&&Et(e)}}}function Zo(t){let e,n,i;return{c(){e=O("rect"),u(e,"x","40"),u(e,"y",n=30+t[2].targ),u(e,"width","50"),u(e,"height",i=t[3].targ),u(e,"fill","#86c89d")},m(r,o){Lt(r,e,o)},p(r,o){o&4&&n!==(n=30+r[2].targ)&&u(e,"y",n),o&8&&i!==(i=r[3].targ)&&u(e,"height",i)},d(r){r&&Et(e)}}}function Qo(t){let e,n,i;return{c(){e=O("rect"),u(e,"x","40"),u(e,"y",n=30+t[2].high),u(e,"width","50"),u(e,"height",i=t[3].high),u(e,"fill","#ffcc80")},m(r,o){Lt(r,e,o)},p(r,o){o&4&&n!==(n=30+r[2].high)&&u(e,"y",n),o&8&&i!==(i=r[3].high)&&u(e,"height",i)},d(r){r&&Et(e)}}}function Oo(t){let e,n,i;return{c(){e=O("rect"),u(e,"x","40"),u(e,"y",n=30+t[2].vhigh),u(e,"width","50"),u(e,"height",i=t[3].vhigh),u(e,"fill","#ff8a65")},m(r,o){Lt(r,e,o)},p(r,o){o&4&&n!==(n=30+r[2].vhigh)&&u(e,"y",n),o&8&&i!==(i=r[3].vhigh)&&u(e,"height",i)},d(r){r&&Et(e)}}}function Qh(t){let e,n,i,r,o=(t[7]()?t[8]().low.toFixed(1):t[8]().low)+"",s,f,a,l=(t[7]()?t[8]().high.toFixed(1):t[8]().high)+"",d,h,m,g=(t[7]()?t[8]().vhigh.toFixed(1):t[8]().vhigh)+"",v,p,k,E,C,y,_,F,U,R,T,M,A,w,N,x,I,Y,L=t[9]("vhigh")+"",ot,xt,Q,lt,nt=Math.round(t[0].vhigh)+"",st,At,X,P,$,mt=ke(t[4].vhigh)+"",b,B,tt,G,D,J,S,z,V,Z,K=t[9]("high")+"",yt,Tt,ut,vt,Ct=Math.round(t[0].high)+"",wt,_t,rt,pt,it,ft=ke(t[4].high)+"",dt,at,Mt,W,bt,ct,Rt,Pt,Wt,Vt,It=t[9]("targ")+"",Zt,ve,Ut,Nt,St=Math.round(t[0].targ)+"",fn,gi,zn,Se,Yn,Bt=ke(t[4].targ)+"",Re,cn,qn,le,we,ae,zt,Xt,ul,In,$h=t[9]("low")+"",fl,cl,Ae,Ge,di=Math.round(t[0].low)+"",rr,hl,gl,Ze,dl,mi=ke(t[4].low)+"",or,ml,vl,vi,hn,Fe,gn,wl,pl,Vn,Kh=t[9]("vlow")+"",yl,_l,Ee,Qe,wi=Math.round(t[0].vlow)+"",lr,xl,bl,Oe,Ml,pi=ke(t[4].vlow)+"",ar,Tl,yi,Qt=t[0].high>0&&Vo(t),Ot=t[0].targ>0&&Wo(t),Jt=t[0].low>0&&Bo(t),$t=t[3].vlow>0&&Xo(t),Kt=t[3].low>0&&Go(t),jt=t[3].targ>0&&Zo(t),te=t[3].high>0&&Qo(t),ee=t[3].vhigh>0&&Oo(t);return{c(){e=q("div"),n=O("svg"),i=O("rect"),r=O("text"),s=H(o),a=O("text"),d=H(l),m=O("text"),v=H(g),k=O("path"),Qt&&Qt.c(),C=Ue(),Ot&&Ot.c(),y=Ue(),Jt&&Jt.c(),_=O("path"),$t&&$t.c(),U=Ue(),Kt&&Kt.c(),R=Ue(),jt&&jt.c(),T=Ue(),te&&te.c(),M=Ue(),ee&&ee.c(),A=O("g"),w=O("text"),N=O("tspan"),x=H("Very High"),I=et(),Y=O("tspan"),ot=H(L),xt=et(),Q=O("text"),lt=O("tspan"),st=H(nt),At=H("%"),X=et(),P=O("tspan"),$=H("("),b=H(mt),B=H(")"),tt=et(),D=O("g"),J=O("text"),S=O("tspan"),z=H("High"),V=et(),Z=O("tspan"),yt=H(K),Tt=et(),ut=O("text"),vt=O("tspan"),wt=H(Ct),_t=H("%"),rt=et(),pt=O("tspan"),it=H("("),dt=H(ft),at=H(")"),Mt=et(),bt=O("g"),ct=O("text"),Rt=O("tspan"),Pt=H("Target"),Wt=et(),Vt=O("tspan"),Zt=H(It),ve=et(),Ut=O("text"),Nt=O("tspan"),fn=H(St),gi=H("%"),zn=et(),Se=O("tspan"),Yn=H("("),Re=H(Bt),cn=H(")"),qn=et(),we=O("g"),ae=O("text"),zt=O("tspan"),Xt=H("Low"),ul=et(),In=O("tspan"),fl=H($h),cl=et(),Ae=O("text"),Ge=O("tspan"),rr=H(di),hl=H("%"),gl=et(),Ze=O("tspan"),dl=H("("),or=H(mi),ml=H(")"),vl=et(),hn=O("g"),Fe=O("text"),gn=O("tspan"),wl=H("Very Low"),pl=et(),Vn=O("tspan"),yl=H(Kh),_l=et(),Ee=O("text"),Qe=O("tspan"),lr=H(wi),xl=H("%"),bl=et(),Oe=O("tspan"),Ml=H("("),ar=H(pi),Tl=H(")"),u(i,"x","40"),u(i,"y","30"),u(i,"width","50"),u(i,"height","180"),u(i,"fill","white"),u(i,"stroke","#ccc"),u(i,"stroke-width","1"),u(r,"x","35"),u(r,"y",f=30+t[6].low),u(r,"font-family","Arial, sans-serif"),u(r,"font-size","10"),u(r,"fill","#666"),u(r,"text-anchor","end"),u(a,"x","35"),u(a,"y",h=30+t[6].high),u(a,"font-family","Arial, sans-serif"),u(a,"font-size","10"),u(a,"fill","#666"),u(a,"text-anchor","end"),u(m,"x","35"),u(m,"y",p=30+t[6].vhigh),u(m,"font-family","Arial, sans-serif"),u(m,"font-size","10"),u(m,"fill","#666"),u(m,"text-anchor","end"),u(k,"d",E="M 40 "+(30+t[1].vhigh)+" L 65 "+(30+t[1].vhigh)+" L 65 25 Q 65 15 70 15 L "+ue+" 15"),u(k,"stroke","#ccc"),u(k,"stroke-width","1"),u(k,"fill","none"),u(_,"d",F="M 40 "+(30+t[1].vlow)+" L 65 "+(30+t[1].vlow)+" L 65 225 Q 65 230 70 230 L "+ue+" 230"),u(_,"stroke","#ccc"),u(_,"stroke-width","1"),u(_,"fill","none"),u(N,"font-size","12"),u(N,"font-weight","bold"),u(N,"fill","#333"),u(Y,"font-size","10"),u(Y,"fill","#777"),u(w,"x","103"),u(w,"y","0"),u(w,"font-family","Arial, sans-serif"),u(lt,"font-size","12"),u(lt,"font-weight","bold"),u(lt,"fill","#333"),u(P,"font-size","10"),u(P,"fill","#777"),u(Q,"x",ue),u(Q,"y","0"),u(Q,"font-family","Arial, sans-serif"),u(Q,"text-anchor","end"),u(A,"transform",G="translate(0, "+(t[5].vhigh-40)+")"),u(S,"font-size","12"),u(S,"font-weight","bold"),u(S,"fill","#333"),u(Z,"font-size","10"),u(Z,"fill","#777"),u(J,"x","103"),u(J,"y","0"),u(J,"font-family","Arial, sans-serif"),u(vt,"font-size","12"),u(vt,"font-weight","bold"),u(vt,"fill","#333"),u(pt,"font-size","10"),u(pt,"fill","#777"),u(ut,"x",ue),u(ut,"y","0"),u(ut,"font-family","Arial, sans-serif"),u(ut,"text-anchor","end"),u(D,"transform",W="translate(0, "+(t[5].high-40)+")"),u(Rt,"font-size","12"),u(Rt,"font-weight","bold"),u(Rt,"fill","#333"),u(Vt,"font-size","10"),u(Vt,"fill","#777"),u(ct,"x","103"),u(ct,"y","0"),u(ct,"font-family","Arial, sans-serif"),u(Nt,"font-size","12"),u(Nt,"font-weight","bold"),u(Nt,"fill","#333"),u(Se,"font-size","10"),u(Se,"fill","#777"),u(Ut,"x",ue),u(Ut,"y","0"),u(Ut,"font-family","Arial, sans-serif"),u(Ut,"text-anchor","end"),u(bt,"transform",le="translate(0, "+(t[5].targ-40)+")"),u(zt,"font-size","12"),u(zt,"font-weight","bold"),u(zt,"fill","#333"),u(In,"font-size","10"),u(In,"fill","#777"),u(ae,"x","103"),u(ae,"y","0"),u(ae,"font-family","Arial, sans-serif"),u(Ge,"font-size","12"),u(Ge,"font-weight","bold"),u(Ge,"fill","#333"),u(Ze,"font-size","10"),u(Ze,"fill","#777"),u(Ae,"x",ue),u(Ae,"y","0"),u(Ae,"font-family","Arial, sans-serif"),u(Ae,"text-anchor","end"),u(we,"transform",vi="translate(0, "+(t[5].low-40)+")"),u(gn,"font-size","12"),u(gn,"font-weight","bold"),u(gn,"fill","#333"),u(Vn,"font-size","10"),u(Vn,"fill","#777"),u(Fe,"x","103"),u(Fe,"y","0"),u(Fe,"font-family","Arial, sans-serif"),u(Qe,"font-size","12"),u(Qe,"font-weight","bold"),u(Qe,"fill","#333"),u(Oe,"font-size","10"),u(Oe,"fill","#777"),u(Ee,"x","340"),u(Ee,"y","0"),u(Ee,"font-family","Arial, sans-serif"),u(Ee,"text-anchor","end"),u(hn,"transform",yi="translate(0, "+(t[5].vlow-40)+")"),u(n,"width",t[10]),u(n,"height",Jo),u(n,"viewBox","0 0 "+t[10]+" "+Jo),u(n,"class","svelte-1d3n1f2"),u(e,"class","widget-container svelte-1d3n1f2")},m(gt,Ft){Lt(gt,e,Ft),c(e,n),c(n,i),c(n,r),c(r,s),c(n,a),c(a,d),c(n,m),c(m,v),c(n,k),Qt&&Qt.m(n,null),c(n,C),Ot&&Ot.m(n,null),c(n,y),Jt&&Jt.m(n,null),c(n,_),$t&&$t.m(n,null),c(n,U),Kt&&Kt.m(n,null),c(n,R),jt&&jt.m(n,null),c(n,T),te&&te.m(n,null),c(n,M),ee&&ee.m(n,null),c(n,A),c(A,w),c(w,N),c(N,x),c(w,I),c(w,Y),c(Y,ot),c(w,xt),c(A,Q),c(Q,lt),c(lt,st),c(lt,At),c(Q,X),c(Q,P),c(P,$),c(P,b),c(P,B),c(Q,tt),c(n,D),c(D,J),c(J,S),c(S,z),c(J,V),c(J,Z),c(Z,yt),c(J,Tt),c(D,ut),c(ut,vt),c(vt,wt),c(vt,_t),c(ut,rt),c(ut,pt),c(pt,it),c(pt,dt),c(pt,at),c(ut,Mt),c(n,bt),c(bt,ct),c(ct,Rt),c(Rt,Pt),c(ct,Wt),c(ct,Vt),c(Vt,Zt),c(ct,ve),c(bt,Ut),c(Ut,Nt),c(Nt,fn),c(Nt,gi),c(Ut,zn),c(Ut,Se),c(Se,Yn),c(Se,Re),c(Se,cn),c(Ut,qn),c(n,we),c(we,ae),c(ae,zt),c(zt,Xt),c(ae,ul),c(ae,In),c(In,fl),c(ae,cl),c(we,Ae),c(Ae,Ge),c(Ge,rr),c(Ge,hl),c(Ae,gl),c(Ae,Ze),c(Ze,dl),c(Ze,or),c(Ze,ml),c(Ae,vl),c(n,hn),c(hn,Fe),c(Fe,gn),c(gn,wl),c(Fe,pl),c(Fe,Vn),c(Vn,yl),c(Fe,_l),c(hn,Ee),c(Ee,Qe),c(Qe,lr),c(Qe,xl),c(Ee,bl),c(Ee,Oe),c(Oe,Ml),c(Oe,ar),c(Oe,Tl)},p(gt,[Ft]){Ft&64&&f!==(f=30+gt[6].low)&&u(r,"y",f),Ft&64&&h!==(h=30+gt[6].high)&&u(a,"y",h),Ft&64&&p!==(p=30+gt[6].vhigh)&&u(m,"y",p),Ft&2&&E!==(E="M 40 "+(30+gt[1].vhigh)+" L 65 "+(30+gt[1].vhigh)+" L 65 25 Q 65 15 70 15 L "+ue+" 15")&&u(k,"d",E),gt[0].high>0?Qt?Qt.p(gt,Ft):(Qt=Vo(gt),Qt.c(),Qt.m(n,C)):Qt&&(Qt.d(1),Qt=null),gt[0].targ>0?Ot?Ot.p(gt,Ft):(Ot=Wo(gt),Ot.c(),Ot.m(n,y)):Ot&&(Ot.d(1),Ot=null),gt[0].low>0?Jt?Jt.p(gt,Ft):(Jt=Bo(gt),Jt.c(),Jt.m(n,_)):Jt&&(Jt.d(1),Jt=null),Ft&2&&F!==(F="M 40 "+(30+gt[1].vlow)+" L 65 "+(30+gt[1].vlow)+" L 65 225 Q 65 230 70 230 L "+ue+" 230")&&u(_,"d",F),gt[3].vlow>0?$t?$t.p(gt,Ft):($t=Xo(gt),$t.c(),$t.m(n,U)):$t&&($t.d(1),$t=null),gt[3].low>0?Kt?Kt.p(gt,Ft):(Kt=Go(gt),Kt.c(),Kt.m(n,R)):Kt&&(Kt.d(1),Kt=null),gt[3].targ>0?jt?jt.p(gt,Ft):(jt=Zo(gt),jt.c(),jt.m(n,T)):jt&&(jt.d(1),jt=null),gt[3].high>0?te?te.p(gt,Ft):(te=Qo(gt),te.c(),te.m(n,M)):te&&(te.d(1),te=null),gt[3].vhigh>0?ee?ee.p(gt,Ft):(ee=Oo(gt),ee.c(),ee.m(n,A)):ee&&(ee.d(1),ee=null),Ft&1&&nt!==(nt=Math.round(gt[0].vhigh)+"")&&kt(st,nt),Ft&16&&mt!==(mt=ke(gt[4].vhigh)+"")&&kt(b,mt),Ft&32&&G!==(G="translate(0, "+(gt[5].vhigh-40)+")")&&u(A,"transform",G),Ft&1&&Ct!==(Ct=Math.round(gt[0].high)+"")&&kt(wt,Ct),Ft&16&&ft!==(ft=ke(gt[4].high)+"")&&kt(dt,ft),Ft&32&&W!==(W="translate(0, "+(gt[5].high-40)+")")&&u(D,"transform",W),Ft&1&&St!==(St=Math.round(gt[0].targ)+"")&&kt(fn,St),Ft&16&&Bt!==(Bt=ke(gt[4].targ)+"")&&kt(Re,Bt),Ft&32&&le!==(le="translate(0, "+(gt[5].targ-40)+")")&&u(bt,"transform",le),Ft&1&&di!==(di=Math.round(gt[0].low)+"")&&kt(rr,di),Ft&16&&mi!==(mi=ke(gt[4].low)+"")&&kt(or,mi),Ft&32&&vi!==(vi="translate(0, "+(gt[5].low-40)+")")&&u(we,"transform",vi),Ft&1&&wi!==(wi=Math.round(gt[0].vlow)+"")&&kt(lr,wi),Ft&16&&pi!==(pi=ke(gt[4].vlow)+"")&&kt(ar,pi),Ft&32&&yi!==(yi="translate(0, "+(gt[5].vlow-40)+")")&&u(hn,"transform",yi)},i:ht,o:ht,d(gt){gt&&Et(e),Qt&&Qt.d(),Ot&&Ot.d(),Jt&&Jt.d(),$t&&$t.d(),Kt&&Kt.d(),jt&&jt.d(),te&&te.d(),ee&&ee.d()}}}const Ce=180,Jo=240,ue=340;function ke(t){const e=Math.floor(t/60),n=Math.round(t%60);return e===0?`${n}min`:`${e}h${n.toString().padStart(2,"0")}min`}function Oh(t,e,n){let i,r,o,s,f;const a=Je();let{data:l}=e,{range:d=null}=e,{preset:h="N"}=e,m,g;const v=()=>/mmol/i.test((l==null?void 0:l.units)||"mmol"),p=()=>v()?h==="T"?{vlow:3,low:3.9,high:7.8,vhigh:13.9}:h==="P"?{vlow:3,low:3.5,high:7.8,vhigh:13.9}:{vlow:3,low:3.9,high:10,vhigh:13.9}:h==="T"?{vlow:54,low:70,high:140,vhigh:250}:h==="P"?{vlow:54,low:63,high:140,vhigh:250}:{vlow:54,low:70,high:180,vhigh:250};let k={vlow:0,low:0,targ:0,high:0,vhigh:0},E=0,C=0,y={vlow:0,low:0,targ:0,high:0,vhigh:0};function _(){if(!l)return;const T=new Date(l.t0).getTime();n(14,m=Float64Array.from({length:l.glucose.length},(M,A)=>T+A*l.stepMs)),n(15,g=Float64Array.from(l.glucose))}function F(){try{a("stats",{pct:k,present:E,expected:C,preset:h,units:(l==null?void 0:l.units)||"mmol/L"})}catch{}}function U(T){const M=p(),A=v()?"mmol/L":"mg/dL";return T==="vhigh"?`>${v()?M.vhigh.toFixed(1):Math.round(M.vhigh)} ${A}`:T==="high"?`${v()?(M.high+.1).toFixed(1):Math.round(M.high)+1}-${v()?M.vhigh.toFixed(1):Math.round(M.vhigh)} ${A}`:T==="targ"?`${v()?M.low.toFixed(1):Math.round(M.low)}-${v()?M.high.toFixed(1):Math.round(M.high)} ${A}`:T==="low"?`${v()?M.vlow.toFixed(1):Math.round(M.vlow)}-${v()?(M.low-.1).toFixed(1):Math.round(M.low)-1} ${A}`:T==="vlow"?`<${v()?M.vlow.toFixed(1):Math.round(M.vlow)} ${A}`:""}const R=ue+10;return t.$$set=T=>{"data"in T&&n(11,l=T.data),"range"in T&&n(12,d=T.range),"preset"in T&&n(13,h=T.preset)},t.$$.update=()=>{if(t.$$.dirty&2048&&l&&_(),t.$$.dirty&63488&&l&&d&&m&&g&&h){const{start:T,end:M}=d,A=Math.max(0,Math.ceil((T-m[0])/l.stepMs)),w=Math.min(g.length-1,Math.floor((M-m[0])/l.stepMs));if(w<A)n(0,k={vlow:0,low:0,targ:0,high:0,vhigh:0}),E=0,C=0,n(4,y={vlow:0,low:0,targ:0,high:0,vhigh:0});else{const N=p();let x={vlow:0,low:0,targ:0,high:0,vhigh:0},I=0;for(let Y=A;Y<=w;Y++){const L=g[Y];Number.isFinite(L)&&L>=0&&(I++,L<N.vlow?x.vlow++:L<N.low?x.low++:L<=N.high?x.targ++:L<=N.vhigh?x.high++:x.vhigh++)}if(E=I,C=Math.max(1,w-A+1),I===0)n(0,k={vlow:0,low:0,targ:0,high:0,vhigh:0}),n(4,y={vlow:0,low:0,targ:0,high:0,vhigh:0});else{n(0,k={vlow:x.vlow/I*100,low:x.low/I*100,targ:x.targ/I*100,high:x.high/I*100,vhigh:x.vhigh/I*100});const Y=24*60;n(4,y={vlow:x.vlow/I*Y,low:x.low/I*Y,targ:x.targ/I*Y,high:x.high/I*Y,vhigh:x.vhigh/I*Y})}}F()}t.$$.dirty&1&&n(3,i={vhigh:k.vhigh/100*Ce,high:k.high/100*Ce,targ:k.targ/100*Ce,low:k.low/100*Ce,vlow:k.vlow/100*Ce}),t.$$.dirty&8&&n(2,r={vlow:Ce-i.vlow,low:Ce-i.vlow-i.low,targ:Ce-i.vlow-i.low-i.targ,high:Ce-i.vlow-i.low-i.targ-i.high,vhigh:Ce-i.vlow-i.low-i.targ-i.high-i.vhigh}),t.$$.dirty&12&&n(1,o={vhigh:r.vhigh+i.vhigh/2,high:r.high+i.high/2,targ:r.targ+i.targ/2,low:r.low+i.low/2,vlow:r.vlow+i.vlow/2}),t.$$.dirty&4&&n(6,s={low:r.vlow,high:r.targ,vhigh:r.high}),t.$$.dirty&3&&n(5,f={vhigh:55,high:k.high>0?70+o.high:105,targ:k.targ>0?70+o.targ:181,low:k.low>0?70+o.low:242,vlow:270})},[k,o,r,i,y,f,s,v,p,U,R,l,d,h,m,g]}class Jh extends re{constructor(e){super(),ie(this,e,Oh,Qh,ne,{data:11,range:12,preset:13})}}function ir(t,e,n={}){const i=document.getElementById(t);if(!i)throw new Error(`No element with id "${t}"`);const r=new lh({target:i,props:{data:e,initialRange:n.initialRange??null,externalRange:null,preset:n.preset||"N",showMonthLabels:n.monthLabels??!0,showData:n.dataVisible??!0,showCanvas:n.canvasVisible??!0}}),o=new Map;let s=n.initialRange??null;function f(v,p){const k=o.get(v)||[];k.push(p),o.set(v,k)}r.$on("rangechange",v=>{var k;const p=v.detail;s={start:p.start,end:p.end},(k=o.get("rangechange"))==null||k.forEach(E=>E(p))}),r.$on("ready",v=>{var k;const p=v.detail;s={start:p.start,end:p.end},(k=o.get("ready"))==null||k.forEach(E=>E(p))});function a(v,p){if(typeof v=="number"&&typeof p=="number")r.$set({externalRange:{start:v,end:p}});else if(v&&typeof v.start=="number"&&typeof v.end=="number")r.$set({externalRange:{start:v.start,end:v.end}});else throw new Error("setRange expects (start:number, end:number) or {start,end}")}function l(){return s}function d(v){r.$set({preset:v})}function h(v){r.$set({showData:!!v})}function m(v){r.$set({showMonthLabels:!!v})}function g(v){r.$set({showCanvas:!!v})}return{on:f,setRange:a,getRange:l,setPreset:d,setDataVisible:h,setMonthLabels:m,setCanvasVisible:g,destroy:()=>r.$destroy()}}typeof window<"u"&&(window.createTirCalendar=ir,window.createCgmTir=ir);function $o(t,e,n={}){const i=document.getElementById(t);if(!i)throw new Error(`No element with id "${t}"`);let r=n.initialRange||null;const o=new uh({target:i,props:{data:e,range:r,preset:n.preset||"N"}});function s(l,d){if(typeof l=="number"&&typeof d=="number")o.$set({range:{start:l,end:d}});else if(l&&typeof l.start=="number"&&typeof l.end=="number")o.$set({range:l});else throw new Error("setRange expects (start:number, end:number) or {start,end}")}function f(l){o.$set({data:l})}if(n.source&&typeof n.source.on=="function"&&(n.source.on("rangechange",({start:l,end:d})=>s({start:l,end:d})),n.source.on("ready",({start:l,end:d})=>s({start:l,end:d})),typeof n.source.getRange=="function")){const l=n.source.getRange();l&&typeof l.start=="number"&&typeof l.end=="number"&&s(l)}function a(l){o.$set({preset:l})}return{setRange:s,setData:f,setPreset:a,destroy:()=>o.$destroy()}}typeof window<"u"&&(window.createCgmSummary=$o);function Ko(t,e,n={}){const i=document.getElementById(t);if(!i)throw new Error(`No element with id "${t}"`);let r=n.initialRange||null;const o=new yh({target:i,props:{data:e,range:r,preset:n.preset||"N"}});function s(l,d){if(typeof l=="number"&&typeof d=="number")o.$set({range:{start:l,end:d}});else if(l&&typeof l.start=="number"&&typeof l.end=="number")o.$set({range:l});else throw new Error("setRange expects (start:number, end:number) or {start,end}")}function f(l){o.$set({data:l})}if(n.source&&typeof n.source.on=="function"&&(n.source.on("rangechange",({start:l,end:d})=>s({start:l,end:d})),n.source.on("ready",({start:l,end:d})=>s({start:l,end:d})),typeof n.source.getRange=="function")){const l=n.source.getRange();l&&typeof l.start=="number"&&typeof l.end=="number"&&s(l)}function a(l){o.$set({preset:l})}return{setRange:s,setData:f,setPreset:a,destroy:()=>o.$destroy()}}typeof window<"u"&&(window.createCgmTir=Ko);function jo(t,e,n={}){const i=document.getElementById(t);if(!i)throw new Error(`No element with id "${t}"`);let r=n.initialRange||null;const o=new bh({target:i,props:{data:e,range:r,preset:n.preset||"N"}});function s(l,d){if(typeof l=="number"&&typeof d=="number")o.$set({range:{start:l,end:d}});else if(l&&typeof l.start=="number"&&typeof l.end=="number")o.$set({range:l});else throw new Error("setRange expects (start:number, end:number) or {start,end}")}function f(l){o.$set({data:l})}if(n.source&&typeof n.source.on=="function"&&(n.source.on("rangechange",({start:l,end:d})=>s({start:l,end:d})),n.source.on("ready",({start:l,end:d})=>s({start:l,end:d})),typeof n.source.getRange=="function")){const l=n.source.getRange();l&&typeof l.start=="number"&&typeof l.end=="number"&&s(l)}function a(l){o.$set({preset:l})}return{setRange:s,setData:f,setPreset:a,destroy:()=>o.$destroy()}}typeof window<"u"&&(window.createCgmAgp=jo);function tl(t,e,n={}){const i=document.getElementById(t);if(!i)throw new Error(`No element with id "${t}"`);let r=n.initialRange||null;const o=new Ih({target:i,props:{data:e,range:r,preset:n.preset||"N"}});function s(l,d){if(typeof l=="number"&&typeof d=="number")o.$set({range:{start:l,end:d}});else if(l&&typeof l.start=="number"&&typeof l.end=="number")o.$set({range:l});else throw new Error("setRange expects (start:number, end:number) or {start,end}")}function f(l){o.$set({data:l})}if(n.source&&typeof n.source.on=="function"&&(n.source.on("rangechange",({start:l,end:d})=>s({start:l,end:d})),n.source.on("ready",({start:l,end:d})=>s({start:l,end:d})),typeof n.source.getRange=="function")){const l=n.source.getRange();l&&typeof l.start=="number"&&typeof l.end=="number"&&s(l)}function a(l){o.$set({preset:l})}return{setRange:s,setData:f,setPreset:a,destroy:()=>o.$destroy()}}typeof window<"u"&&(window.createCgmTirModern=tl);function el(t,e,n={}){const i=document.getElementById(t);if(!i)throw new Error(`No element with id "${t}"`);let r=n.initialRange||null;const o=new Bh({target:i,props:{data:e,range:r,preset:n.preset||"N"}});function s(l,d){if(typeof l=="number"&&typeof d=="number")o.$set({range:{start:l,end:d}});else if(l&&typeof l.start=="number"&&typeof l.end=="number")o.$set({range:l});else throw new Error("setRange expects (start:number, end:number) or {start,end}")}function f(l){o.$set({data:l})}if(n.source&&typeof n.source.on=="function"&&(n.source.on("rangechange",({start:l,end:d})=>s({start:l,end:d})),n.source.on("ready",({start:l,end:d})=>s({start:l,end:d})),typeof n.source.getRange=="function")){const l=n.source.getRange();l&&typeof l.start=="number"&&typeof l.end=="number"&&s(l)}function a(l){o.$set({preset:l})}return{setRange:s,setData:f,setPreset:a,destroy:()=>o.$destroy()}}typeof window<"u"&&(window.createCgmTirClaude=el);function nl(t,e,n={}){const i=document.getElementById(t);if(!i)throw new Error(`No element with id "${t}"`);let r=n.initialRange||null;const o=new Zh({target:i,props:{data:e,range:r,preset:n.preset||"N"}});function s(l,d){if(typeof l=="number"&&typeof d=="number")o.$set({range:{start:l,end:d}});else if(l&&typeof l.start=="number"&&typeof l.end=="number")o.$set({range:l});else throw new Error("setRange expects (start:number, end:number) or {start,end}")}function f(l){o.$set({data:l})}if(n.source&&typeof n.source.on=="function"&&(n.source.on("rangechange",({start:l,end:d})=>s({start:l,end:d})),n.source.on("ready",({start:l,end:d})=>s({start:l,end:d})),typeof n.source.getRange=="function")){const l=n.source.getRange();l&&typeof l.start=="number"&&typeof l.end=="number"&&s(l)}function a(l){o.$set({preset:l})}return{setRange:s,setData:f,setPreset:a,destroy:()=>o.$destroy()}}typeof window<"u"&&(window.createCgmTirVertical=nl);function il(t,e,n={}){const i=document.getElementById(t);if(!i)throw new Error(`No element with id "${t}"`);let r=n.initialRange||null;const o=new Ph({target:i,props:{data:e,range:r,preset:n.preset||"N"}});function s(l,d){if(typeof l=="number"&&typeof d=="number")o.$set({range:{start:l,end:d}});else if(l&&typeof l.start=="number"&&typeof l.end=="number")o.$set({range:l});else throw new Error("setRange expects (start:number, end:number) or {start,end}")}function f(l){o.$set({data:l})}function a(l){o.$set({preset:l})}if(n.source&&typeof n.source.on=="function"&&(n.source.on("rangechange",({start:l,end:d})=>s({start:l,end:d})),n.source.on("ready",({start:l,end:d})=>s({start:l,end:d})),typeof n.source.getRange=="function")){const l=n.source.getRange();l&&typeof l.start=="number"&&typeof l.end=="number"&&s(l)}return{setRange:s,setData:f,setPreset:a,destroy:()=>o.$destroy()}}typeof window<"u"&&(window.createCgmStrips=il);function rl(t,e,n={}){const i=document.getElementById(t);if(!i)throw new Error(`No element with id "${t}"`);let r=n.initialRange||null;const o=new Ch({target:i,props:{data:e,range:r,preset:n.preset||"N"}}),s=new Map;let f=null;function a(g,v){const p=s.get(g)||[];p.push(v),s.set(g,p)}o.$on("stats",g=>{var p;const v=g.detail;f=v,(p=s.get("stats"))==null||p.forEach(k=>k(v))});function l(g,v){if(typeof g=="number"&&typeof v=="number")o.$set({range:{start:g,end:v}});else if(g&&typeof g.start=="number"&&typeof g.end=="number")o.$set({range:g});else throw new Error("setRange expects (start:number, end:number) or {start,end}")}function d(g){o.$set({data:g})}if(n.source&&typeof n.source.on=="function"&&(n.source.on("rangechange",({start:g,end:v})=>l({start:g,end:v})),n.source.on("ready",({start:g,end:v})=>l({start:g,end:v})),typeof n.source.getRange=="function")){const g=n.source.getRange();g&&typeof g.start=="number"&&typeof g.end=="number"&&l(g)}function h(g){o.$set({preset:g})}function m(){return f}return{on:a,setRange:l,setData:d,setPreset:h,getStats:m,destroy:()=>o.$destroy()}}typeof window<"u"&&(window.createCgmTirCard=rl);function ol(t,e,n={}){const i=document.getElementById(t);if(!i)throw new Error(`No element with id "${t}"`);let r=n.initialRange||null;const o=new Dh({target:i,props:{data:e,range:r,preset:n.preset||"N"}}),s=new Map;let f=null;function a(g,v){const p=s.get(g)||[];p.push(v),s.set(g,p)}o.$on("stats",g=>{var p;const v=g.detail;f=v,(p=s.get("stats"))==null||p.forEach(k=>k(v))});function l(g,v){if(typeof g=="number"&&typeof v=="number")o.$set({range:{start:g,end:v}});else if(g&&typeof g.start=="number"&&typeof g.end=="number")o.$set({range:g});else throw new Error("setRange expects (start:number, end:number) or {start,end}")}function d(g){o.$set({data:g})}if(n.source&&typeof n.source.on=="function"&&(n.source.on("rangechange",({start:g,end:v})=>l({start:g,end:v})),n.source.on("ready",({start:g,end:v})=>l({start:g,end:v})),typeof n.source.getRange=="function")){const g=n.source.getRange();g&&typeof g.start=="number"&&typeof g.end=="number"&&l(g)}function h(g){o.$set({preset:g})}function m(){return f}return{on:a,setRange:l,setData:d,setPreset:h,getStats:m,destroy:()=>o.$destroy()}}typeof window<"u"&&(window.createCgmTirAgpCard=ol);function ll(t,e,n={}){const i=document.getElementById(t);if(!i)throw new Error(`No element with id "${t}"`);let r=n.initialRange||null;const o=new Fh({target:i,props:{data:e,range:r,preset:n.preset||"N"}}),s=new Map;let f=null;function a(g,v){const p=s.get(g)||[];p.push(v),s.set(g,p)}o.$on("stats",g=>{var p;const v=g.detail;f=v,(p=s.get("stats"))==null||p.forEach(k=>k(v))});function l(g,v){if(typeof g=="number"&&typeof v=="number")o.$set({range:{start:g,end:v}});else if(g&&typeof g.start=="number"&&typeof g.end=="number")o.$set({range:g});else throw new Error("setRange expects (start:number, end:number) or {start,end}")}function d(g){o.$set({data:g})}if(n.source&&typeof n.source.on=="function"&&(n.source.on("rangechange",({start:g,end:v})=>l({start:g,end:v})),n.source.on("ready",({start:g,end:v})=>l({start:g,end:v})),typeof n.source.getRange=="function")){const g=n.source.getRange();g&&typeof g.start=="number"&&typeof g.end=="number"&&l(g)}function h(g){o.$set({preset:g})}function m(){return f}return{on:a,setRange:l,setData:d,setPreset:h,getStats:m,destroy:()=>o.$destroy()}}typeof window<"u"&&(window.createCgmTirAgpCardCanvas=ll);function al(t,e,n={}){const i=document.getElementById(t);if(!i)throw new Error(`No element with id "${t}"`);let r=n.initialRange||null;const o=new Lh({target:i,props:{data:e,range:r,preset:n.preset||"N"}}),s=new Map;function f(h,m){const g=s.get(h)||[];g.push(m),s.set(h,g)}o.$on("stats",h=>{var g;const m=h.detail;(g=s.get("stats"))==null||g.forEach(v=>v(m))});function a(h,m){if(typeof h=="number"&&typeof m=="number")o.$set({range:{start:h,end:m}});else if(h&&typeof h.start=="number"&&typeof h.end=="number")o.$set({range:h});else throw new Error("setRange expects (start:number, end:number) or {start,end}")}function l(h){o.$set({data:h})}if(n.source&&typeof n.source.on=="function"&&(n.source.on("rangechange",({start:h,end:m})=>a({start:h,end:m})),n.source.on("ready",({start:h,end:m})=>a({start:h,end:m})),typeof n.source.getRange=="function")){const h=n.source.getRange();h&&typeof h.start=="number"&&typeof h.end=="number"&&a(h)}function d(h){o.$set({preset:h})}return{on:f,setRange:a,setData:l,setPreset:d,destroy:()=>o.$destroy()}}typeof window<"u"&&(window.createCgmTirEndsCardCanvas=al);function sl(t,e,n={}){const i=document.getElementById(t);if(!i)throw new Error(`No element with id "${t}"`);let r=n.initialRange||null;const o=new Jh({target:i,props:{data:e,range:r,preset:n.preset||"N"}}),s=new Map;let f=null;function a(g,v){const p=s.get(g)||[];p.push(v),s.set(g,p)}o.$on("stats",g=>{var p;const v=g.detail;f=v,(p=s.get("stats"))==null||p.forEach(k=>k(v))});function l(g,v){if(typeof g=="number"&&typeof v=="number")o.$set({range:{start:g,end:v}});else if(g&&typeof g.start=="number"&&typeof g.end=="number")o.$set({range:g});else throw new Error("setRange expects (start:number, end:number) or {start,end}")}function d(g){o.$set({data:g})}if(n.source&&typeof n.source.on=="function"&&(n.source.on("rangechange",({start:g,end:v})=>l({start:g,end:v})),n.source.on("ready",({start:g,end:v})=>l({start:g,end:v})),typeof n.source.getRange=="function")){const g=n.source.getRange();g&&typeof g.start=="number"&&typeof g.end=="number"&&l(g)}function h(g){o.$set({preset:g})}function m(){return f}return{on:a,setRange:l,setData:d,setPreset:h,getStats:m,destroy:()=>o.$destroy()}}typeof window<"u"&&(window.createCgmTirDetailed=sl),Ht.createCgmAgp=jo,Ht.createCgmStrips=il,Ht.createCgmSummary=$o,Ht.createCgmTir=Ko,Ht.createCgmTirAgpCard=ol,Ht.createCgmTirAgpCardCanvas=ll,Ht.createCgmTirCard=rl,Ht.createCgmTirClaude=el,Ht.createCgmTirDetailed=sl,Ht.createCgmTirEndsCardCanvas=al,Ht.createCgmTirModern=tl,Ht.createCgmTirVertical=nl,Ht.createTirCalendar=ir,Object.defineProperty(Ht,Symbol.toStringTag,{value:"Module"})});
